# 1 "src/pkp.pnml"
# 1 "<built-in>"
# 1 "<command-line>"
# 31 "<command-line>"
# 1 "/usr/include/stdc-predef.h" 1 3 4
# 32 "<command-line>" 2
# 1 "src/pkp.pnml"
grf {
    grfid: "MV\01\03";
    name: string(STR_GRF_NAME);
    desc: string(STR_GRF_DESCRIPTION);
    version: 210;
    min_compatible_version: 208;

    param {
        param_disable_orig {
            type: bool;
            name: string(STR_PARAM_NAME_DISABLE_ORIG);
            desc: string(STR_PARAM_DESC_DISABLE_ORIG);
            def_value: 1;
        }
    }
    param {
        param_disable_mono_maglev {
            type: bool;
            name: string(STR_PARAM_NAME_DISABLE_MONO_MAGLEV);
            desc: string(STR_PARAM_DESC_DISABLE_MONO_MAGLEV);
            def_value: 1;
        }
    }
    param {
        param_keep_old_vehs {
            type: bool;
            bit: 0;
            name: string(STR_PARAM_NAME_KEEP_OLD_VEHS);
            desc: string(STR_PARAM_DESC_KEEP_OLD_VEHS);
        }
        param_replace_cargoes {
            type: bool;
            bit: 1;
            name: string(STR_PARAM_NAME_REPLACE_CARGOES);
            desc: string(STR_PARAM_DESC_REPLACE_CARGOES);
        }
        param_orig_intro_dates {
            type: bool;
            bit: 2;
            name: string(STR_PARAM_NAME_ORIG_INTRO_DATES);
            desc: string(STR_PARAM_DESC_ORIG_INTRO_DATES);
        }
    }
    param {
        param_tourists {
            type: int;
            min_value: 0;
            max_value: 2;
            def_value: 0;
            name: string(STR_PARAM_NAME_TOURISTS);
            desc: string(STR_PARAM_DESC_TOURISTS);
            names: {
                        0: string(STR_PARAM_TOURISTS_AUTO);
                        1: string(STR_PARAM_TOURISTS_MANUAL);
                        2: string(STR_PARAM_TOURISTS_OFF);
            };
        }
    }
    param {
        param_purchase_cost {
            type: int;
            min_value: 0;
            max_value: 3;
            def_value: 0;
            name: string(STR_PARAM_NAME_PURCHASE_COST);
            desc: string(STR_PARAM_DESC_PURCHASE_COST);
            names: {
                        0: string(STR_PARAM_COST_X1);
                        1: string(STR_PARAM_COST_X2);
                        2: string(STR_PARAM_COST_X4);
                        3: string(STR_PARAM_COST_X8);
            };
        }
    }
    param {
        param_running_cost {
            type: int;
            min_value: 0;
            max_value: 3;
            def_value: 0;
            name: string(STR_PARAM_NAME_RUNNING_COST);
            desc: string(STR_PARAM_DESC_RUNNING_COST);
            names: {
                        0: string(STR_PARAM_COST_X1);
                        1: string(STR_PARAM_COST_X2);
                        2: string(STR_PARAM_COST_X4);
                        3: string(STR_PARAM_COST_X8);
            };
        }
    }
}


if (ttd_platform != PLATFORM_OPENTTD) {

    error(FATAL, USED_WITH, "OpenTTD");
} else {

    if (openttd_version < version_openttd(1, 2, 0)) {

        error(FATAL, REQUIRES_OPENTTD, "1.2.0");
    }
}

train_width_32_px = 1;
traininfo_y_offset = 2;

if(param_disable_orig) {
    disable_item(FEAT_TRAINS, 0, 53);
}
if(param_disable_mono_maglev) {
    disable_item(FEAT_TRAINS, 54, 115);
}
basecost {
    PR_BUILD_VEHICLE_TRAIN: param_purchase_cost;
    PR_BUILD_VEHICLE_WAGON: param_purchase_cost + 4;
    PR_RUNNING_TRAIN_STEAM: param_running_cost + 1;
    PR_RUNNING_TRAIN_DIESEL: param_running_cost + 1;
    PR_RUNNING_TRAIN_ELECTRIC: param_running_cost + 1;
}
# 153 "src/pkp.pnml"
# 1 "src/templates.pnml" 1





template tmpl_sprite_purchase(x, y) {

    [x, y, 50, 12, -25, -8]
}
template tmpl_sprite_advertisement200(x, y) {

    [x, y, 200, 12, -100, -8]
}
template tmpl_sprite_advertisement300(x, y) {

    [x, y, 300, 12, -150, -8]
}
template tmpl_sprite_train_block1(x, y, z) {

    [x, y, 12*z, 28*z, -5*z, -16*z]
    [x+ 16*z, y, 26*z, 28*z, -17*z, -18*z]
    [x+ 46*z, y, 36*z, 20*z, -17*z, -14*z]
    [x+ 86*z, y, 26*z, 28*z, -7*z, -18*z]
}
template tmpl_sprite_train_block2(x, y, z) {

    [x+120*z, y, 12*z, 28*z, -5*z, -16*z]
    [x+136*z, y, 26*z, 28*z, -17*z, -18*z]
    [x+166*z, y, 36*z, 20*z, -17*z, -14*z]
    [x+206*z, y, 26*z, 28*z, -7*z, -18*z]
}
template tmpl_sprite_train(x, y) {
    tmpl_sprite_train_block1(x, y, 1)
    tmpl_sprite_train_block2(x, y, 1)
}
template tmpl_sprite_train_sym(x, y) {
    tmpl_sprite_train_block1(x, y, 1)
}
template tmpl_sprite_train_8(x, y) {
    tmpl_sprite_train_block1(x, y, 1)
    tmpl_sprite_train_block1(x, y, 1)
}
template tmpl_sprite_train_x2(x, y) {
    tmpl_sprite_train_block1(x, y, 2)
    tmpl_sprite_train_block2(x, y, 2)
}
template tmpl_sprite_train_sym_x2(x, y) {
    tmpl_sprite_train_block1(x, y, 2)
}
template tmpl_sprite_train_8_x2(x, y) {
    tmpl_sprite_train_block1(x, y, 2)
    tmpl_sprite_train_block1(x, y, 2)
}
template tmpl_sprite_train10_block(x, y, z, d) {

    [x, y, 12*z, 32*z, -5*z, (-16-2*d)*z]
    [x+ 16*z, y, 30*z, 30*z, (-21+2*d)*z, (-18-d)*z ]
    [x+ 50*z, y, 44*z, 20*z, (-25+4*d)*z, -14*z ]
    [x+ 98*z, y, 30*z, 30*z, (-11+2*d)*z, (-20+d)*z ]
    [x+134*z, y, 12*z, 32*z, -5*z, (-20+2*d)*z]
    [x+150*z, y, 30*z, 30*z, (-17-2*d)*z, (-20+d)*z ]
    [x+184*z, y, 44*z, 20*z, (-17-4*d)*z, -14*z ]
    [x+232*z, y, 30*z, 30*z, (-7-2*d)*z, (-18-d)*z ]
}
template tmpl_sprite_train10(x, y) {
    tmpl_sprite_train10_block(x, y, 1, 0)
}
template tmpl_sprite_train10_x2(x, y) {
    tmpl_sprite_train10_block(x, y, 2, 0)
}
template tmpl_sprite_train10_offset(x, y, d) {
    tmpl_sprite_train10_block(x, y, 1, d)
}
template tmpl_sprite_train10_offset_x2(x, y, d) {
    tmpl_sprite_train10_block(x, y, 2, d)
}
template tmpl_sprite_train12_block(x, y, z, d) {

    [x, y, 12*z, 36*z, -5*z, (-16-2*d)*z]
    [x+ 16*z, y, 34*z, 32*z, (-25+2*d)*z, (-18-d)*z ]
    [x+ 54*z, y, 52*z, 20*z, (-33+4*d)*z, -14*z ]
    [x+110*z, y, 34*z, 32*z, (-15+2*d)*z, (-22+d)*z ]
    [x+148*z, y, 12*z, 36*z, -5*z, (-24+2*d)*z]
    [x+164*z, y, 34*z, 32*z, (-17-2*d)*z, (-22+d)*z ]
    [x+202*z, y, 52*z, 20*z, (-17-4*d)*z, -14*z ]
    [x+258*z, y, 34*z, 32*z, (-7-2*d)*z, (-18-d)*z ]
}
template tmpl_sprite_train12(x, y) {
    tmpl_sprite_train12_block(x, y, 1, 0)
}
template tmpl_sprite_train12_x2(x, y) {
    tmpl_sprite_train12_block(x, y, 2, 0)
}
template tmpl_sprite_train12_offset(x, y, d) {
    tmpl_sprite_train12_block(x, y, 1, d)
}
template tmpl_sprite_train12_offset_x2(x, y, d) {
    tmpl_sprite_train12_block(x, y, 2, d)
}
# 122 "src/templates.pnml"
template tmpl_sprite_train12_block_l(x, y, z) {

    [x, y, 23*z, 31*z, -13*z, -16*z]
    [x+ 27*z, y, 42*z, 25*z, -33*z, -14*z]
    [x+ 73*z, y, 42*z, 25*z, -23*z, -17*z]
    [x+119*z, y, 23*z, 31*z, -6*z, -19*z]
    [x+148*z, y, 23*z, 31*z, -8*z, -19*z]
    [x+175*z, y, 42*z, 25*z, -15*z, -16*z]
    [x+221*z, y, 42*z, 25*z, -17*z, -16*z]
    [x+267*z, y, 23*z, 31*z, -5*z, -14*z]
}
template tmpl_sprite_train12_block_r(x, y, z) {

    [x+267*z, y, 23*z, 31*z, -8*z, -16*z]
    [x, y, 23*z, 31*z, -16*z, -14*z]
    [x+ 27*z, y, 42*z, 25*z, -23*z, -16*z]
    [x+ 73*z, y, 42*z, 25*z, -25*z, -16*z]
    [x+119*z, y, 23*z, 31*z, -13*z, -19*z]
    [x+148*z, y, 23*z, 31*z, -15*z, -19*z]
    [x+175*z, y, 42*z, 25*z, -17*z, -17*z]
    [x+221*z, y, 42*z, 25*z, -7*z, -14*z]
}
template tmpl_sprite_train12_l(x, y) {
    tmpl_sprite_train12_block_l(x, y, 1)
}
template tmpl_sprite_train12_r(x, y) {
    tmpl_sprite_train12_block_r(x, y, 1)
}
template tmpl_sprite_train12_rear_block(x, y, z) {

    [x, y+ 18*z, 12*z, 18*z, -5*z, -14*z]
    [x+ 16*z, y+ 16*z, 16*z, 16*z, -9*z, -10*z]
    [x+ 54*z, y, 18*z, 20*z, -1*z, -14*z]
    [x+110*z, y, 16*z, 22*z, 1*z, -14*z]
    [x+148*z, y, 1*z, 1*z, 0*z, 0*z]
    [x+182*z, y, 16*z, 22*z, -15*z, -14*z]
    [x+236*z, y, 18*z, 20*z, -15*z, -14*z]
    [x+276*z, y+ 16*z, 16*z, 16*z, -5*z, -10*z]
}
template tmpl_sprite_train12_rear(x, y) {
    tmpl_sprite_train12_rear_block(x, y, 1)
}
# 154 "src/pkp.pnml" 2
# 1 "src/vehicleids.pnml" 1






item(FEAT_TRAINS, item_dummy_1) { }
item(FEAT_TRAINS, item_dummy_2) { }
item(FEAT_TRAINS, item_dummy_3) { }
item(FEAT_TRAINS, item_dummy_4) { }
item(FEAT_TRAINS, item_goods_dummy_1) { }
item(FEAT_TRAINS, item_goods_dummy_3) { }
item(FEAT_TRAINS, item_bh_mail_dummy_3) { }
item(FEAT_TRAINS, item_enxx_mail_dummy_2) { }

item(FEAT_TRAINS, item_tp4) { }
item(FEAT_TRAINS, item_ok1) { }
item(FEAT_TRAINS, item_ty23) { }
item(FEAT_TRAINS, item_pt31) { }
item(FEAT_TRAINS, item_okz32) { }
item(FEAT_TRAINS, item_ty37) { }
item(FEAT_TRAINS, item_ty2) { }
item(FEAT_TRAINS, item_pt47) { }
item(FEAT_TRAINS, item_ol49) { }
item(FEAT_TRAINS, item_ty51) { }

item(FEAT_TRAINS, item_st43) { }
item(FEAT_TRAINS, item_st44) { }
item(FEAT_TRAINS, item_sp45) { }
item(FEAT_TRAINS, item_su45) { }
item(FEAT_TRAINS, item_su46) { }
item(FEAT_TRAINS, item_sm31) { }
item(FEAT_TRAINS, item_sp32) { }
item(FEAT_TRAINS, item_class66) { }
item(FEAT_TRAINS, item_br285) { }
item(FEAT_TRAINS, item_su160) { }
item(FEAT_TRAINS, item_sn81) { }
item(FEAT_TRAINS, item_sa137) { }

item(FEAT_TRAINS, item_ep02) { }
item(FEAT_TRAINS, item_et21) { }
item(FEAT_TRAINS, item_eu07) { }
item(FEAT_TRAINS, item_et22) { }
item(FEAT_TRAINS, item_ep08) { }
item(FEAT_TRAINS, item_ep05) { }
item(FEAT_TRAINS, item_et40) { }
item(FEAT_TRAINS, item_et41) { }
item(FEAT_TRAINS, item_et42) { }
item(FEAT_TRAINS, item_ep09) { }
item(FEAT_TRAINS, item_eu43) { }
item(FEAT_TRAINS, item_eu44) { }
item(FEAT_TRAINS, item_eu47) { }
item(FEAT_TRAINS, item_eu46) { }
item(FEAT_TRAINS, item_et26) { }

item(FEAT_TRAINS, item_en57) { }
item(FEAT_TRAINS, item_en71) { }
item(FEAT_TRAINS, item_ed72) { }
item(FEAT_TRAINS, item_ed74) { }
item(FEAT_TRAINS, item_en76) { }
item(FEAT_TRAINS, item_en57a) { }
item(FEAT_TRAINS, item_ed250) { }
item(FEAT_TRAINS, item_en63a) { }
item(FEAT_TRAINS, item_ed161) { }
item(FEAT_TRAINS, item_ed160) { }

item(FEAT_TRAINS, item_abdhmnu) { }
item(FEAT_TRAINS, item_ab9mnopuz) { }
item(FEAT_TRAINS, item_bipa) { }
item(FEAT_TRAINS, item_bdhpumn) { }
item(FEAT_TRAINS, item_twindexx) { }

item(FEAT_TRAINS, item_articulated_reserved_1) { }


item(FEAT_TRAINS, item_tkh1) { }
item(FEAT_TRAINS, item_tki3) { }
item(FEAT_TRAINS, item_okl27) { }
item(FEAT_TRAINS, item_tkt48) { }

item(FEAT_TRAINS, item_sm30) { }
item(FEAT_TRAINS, item_sm41) { }
item(FEAT_TRAINS, item_sm42) { }
item(FEAT_TRAINS, item_sp42) { }
item(FEAT_TRAINS, item_su42) { }
item(FEAT_TRAINS, item_6dl) { }
item(FEAT_TRAINS, item_sn61) { }
item(FEAT_TRAINS, item_sa106) { }

item(FEAT_TRAINS, item_ep01) { }

item(FEAT_TRAINS, item_gmy) { }
item(FEAT_TRAINS, item_ghmx) { }
item(FEAT_TRAINS, item_gmw) { }
item(FEAT_TRAINS, item_pdn) { }
item(FEAT_TRAINS, item_ohtx) { }

item(FEAT_TRAINS, item_fg) { }
item(FEAT_TRAINS, item_fy) { }
item(FEAT_TRAINS, item_fhx) { }
item(FEAT_TRAINS, item_dhxt) { }
item(FEAT_TRAINS, item_dwxz) { }
item(FEAT_TRAINS, item_bdwxzd) { }

item(FEAT_TRAINS, item_bcy) { }
item(FEAT_TRAINS, item_bcyh) { }
item(FEAT_TRAINS, item_bci) { }
item(FEAT_TRAINS, item_bh_ryf) { }
item(FEAT_TRAINS, item_bh_bon) { }

item(FEAT_TRAINS, item_bhxz) { }
item(FEAT_TRAINS, item_abhxz) { }
item(FEAT_TRAINS, item_abdnu) { }

item(FEAT_TRAINS, item_wlabwxz) { }
item(FEAT_TRAINS, item_wlab) { }
item(FEAT_TRAINS, item_wlab10mnouz) { }
item(FEAT_TRAINS, item_jhx) { }
item(FEAT_TRAINS, item_jhix) { }
item(FEAT_TRAINS, item_wrdmnu) { }
item(FEAT_TRAINS, item_wrmnouz) { }

item(FEAT_TRAINS, item_wddo) { }
item(FEAT_TRAINS, item_wddoh) { }
item(FEAT_TRAINS, item_wddo_2w) { }
item(FEAT_TRAINS, item_es) { }
item(FEAT_TRAINS, item_eaos) { }
item(FEAT_TRAINS, item_eanos) { }
item(FEAT_TRAINS, item_eanos_445w) { }
item(FEAT_TRAINS, item_eamos) { }
item(FEAT_TRAINS, item_fals) { }
item(FEAT_TRAINS, item_falns) { }
item(FEAT_TRAINS, item_kdt) { }
item(FEAT_TRAINS, item_kdth) { }
item(FEAT_TRAINS, item_kddet) { }
item(FEAT_TRAINS, item_ggs) { }
item(FEAT_TRAINS, item_gags) { }
item(FEAT_TRAINS, item_gbss) { }
item(FEAT_TRAINS, item_gbs) { }
item(FEAT_TRAINS, item_hbbins) { }
item(FEAT_TRAINS, item_habbins) { }
item(FEAT_TRAINS, item_slr) { }
item(FEAT_TRAINS, item_slrh) { }
item(FEAT_TRAINS, item_slms) { }
item(FEAT_TRAINS, item_ibhss) { }
item(FEAT_TRAINS, item_pdk31) { }
item(FEAT_TRAINS, item_pdkh31) { }
item(FEAT_TRAINS, item_kbkks) { }
item(FEAT_TRAINS, item_kgns) { }
item(FEAT_TRAINS, item_res) { }
item(FEAT_TRAINS, item_roos) { }
item(FEAT_TRAINS, item_sgs) { }
item(FEAT_TRAINS, item_sdgmnss) { }
item(FEAT_TRAINS, item_simms) { }
item(FEAT_TRAINS, item_smms) { }
item(FEAT_TRAINS, item_rh) { }
item(FEAT_TRAINS, item_rbh) { }
item(FEAT_TRAINS, item_zaes) { }
item(FEAT_TRAINS, item_zas) { }
item(FEAT_TRAINS, item_zans) { }
item(FEAT_TRAINS, item_rgh) { }
item(FEAT_TRAINS, item_uahs_fg460) { }
item(FEAT_TRAINS, item_zaekks) { }
item(FEAT_TRAINS, item_sn) { }
item(FEAT_TRAINS, item_sdw) { }
item(FEAT_TRAINS, item_sdwh) { }
item(FEAT_TRAINS, item_sddw_1s) { }
item(FEAT_TRAINS, item_sddw_2s) { }
item(FEAT_TRAINS, item_tikkms) { }
item(FEAT_TRAINS, item_ucs) { }
item(FEAT_TRAINS, item_uacs) { }
item(FEAT_TRAINS, item_uacns) { }
item(FEAT_TRAINS, item_ugpps) { }
item(FEAT_TRAINS, item_lekqss) { }
item(FEAT_TRAINS, item_tads) { }


item(FEAT_TRAINS, item_wm15a) { }
item(FEAT_TRAINS, item_pwm15) { }
# 155 "src/pkp.pnml" 2
# 1 "src/cargos.pnml" 1





cargotable {
    PASS, COAL, MAIL, OIL_, LVST, GOOD, GRAI, WOOD, IORE, STEL, VALU, PAPR, WHEA, FOOD, GOLD, RUBR,
    FRUT, MAIZ, CORE, WATR, DIAM, AORE, BEER, BDMT, BRCK, CERA, CERE, CLAY, CMNT, COPR, DYES, ENSP,
    FERT, FICR, FISH, FMSP, FRVG, GLAS, GRVL, LIME, MILK, MNSP, OLSD, PETR, PLAS, POTA, RCYC, RFPR,
    SAND, SCMT, SGBT, SGCN, SULP, TOUR, VEHI, WDPR, WOOL,

    SUGR, BEAN, BOOM, CASS, COKE, EOIL, IRON, METL, MNO2, NICK, NITR, NUTS, PHOS, PIPE, PORE, QLME,
    SASH, SLAG, VBOD, VPTS, ACID, CHLO, JAVA, POWR, KAOL, PEAT, SALT, ZINC,

    STAL, ALUM, NH3_, CBLK, STCB, CSTI, SOAP, CTAR, FECR, LYE_, O2__, COAT, STST, STSE, STSH, STWR,
    TYRE, VENG
}
# 156 "src/pkp.pnml" 2
# 1 "src/costs.pnml" 1
# 157 "src/pkp.pnml" 2
# 1 "src/palettes.pnml" 1
# 37 "src/palettes.pnml"
palette_cargo = reserve_sprites(0 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 -0 +1);
replace(palette_cargo) {
    recolour_sprite {
        0xAA: 0x01;
        0xAB: 0x01;
        0xAC: 0x02;
        0xAD: 0x02;
        0xAE: 0x03;
        0xAF: 0x04;
        }
    recolour_sprite {
        0xAA: 0x41;
        0xAB: 0x42;
        0xAC: 0x43;
        0xAD: 0x33;
        0xAE: 0x44;
        0xAF: 0x45;
        }
    recolour_sprite {
        0xAA: 0x40;
        0xAB: 0x41;
        0xAC: 0x42;
        0xAD: 0x43;
        0xAE: 0x33;
        0xAF: 0x44;
        }
    recolour_sprite {
        0xAA: 0x69;
        0xAB: 0x47;
        0xAC: 0x48;
        0xAD: 0x49;
        0xAE: 0x4A;
        0xAF: 0x4B;
        }
    recolour_sprite {
        0xAA: 0x58;
        0xAB: 0x40;
        0xAC: 0x1D;
        0xAD: 0xC2;
        0xAE: 0x42;
        0xAF: 0xD1;
        }
    recolour_sprite {
        0xAA: 0x58;
        0xAB: 0x19;
        0xAC: 0x36;
        0xAD: 0x1A;
        0xAE: 0x37;
        0xAF: 0x38;
        }
    recolour_sprite {
        0xAA: 0x2A;
        0xAB: 0x2B;
        0xAC: 0x4A;
        0xAD: 0x2C;
        0xAE: 0xA2;
        0xAF: 0x2E;
        }
    recolour_sprite {
        0xAA: 0x22;
        0xAB: 0x6D;
        0xAC: 0x4C;
        0xAD: 0x75;
        0xAE: 0x25;
        0xAF: 0x4F;
        }
    recolour_sprite {
        0xAA: 0x18;
        0xAB: 0x19;
        0xAC: 0x1A;
        0xAD: 0x1B;
        0xAE: 0x1C;
        0xAF: 0x1D;
        }
    recolour_sprite {
        0xAA: 0x07;
        0xAB: 0x08;
        0xAC: 0x09;
        0xAD: 0x0A;
        0xAE: 0x0B;
        0xAF: 0x0C;
        }
    recolour_sprite {
        0xAA: 0x08;
        0xAB: 0x0A;
        0xAC: 0x1E;
        0xAD: 0x0B;
        0xAE: 0x3B;
        0xAF: 0x0C;
        }
    recolour_sprite {
        0xAA: 0x22;
        0xAB: 0x6D;
        0xAC: 0x38;
        0xAD: 0x5C;
        0xAE: 0x6F;
        0xAF: 0x5E;
        }
    recolour_sprite {
        0xAA: 0x16;
        0xAB: 0x0D;
        0xAC: 0x87;
        0xAD: 0x0E;
        0xAE: 0xD2;
        0xAF: 0x0F;
        }
    recolour_sprite {
        0xAA: 0x6F;
        0xAB: 0x3A;
        0xAC: 0x1E;
        0xAD: 0x3B;
        0xAE: 0x26;
        0xAF: 0x27;
        }
    recolour_sprite {
        0xAA: 0x02;
        0xAB: 0x29;
        0xAC: 0x7B;
        0xAD: 0x11;
        0xAE: 0x72;
        0xAF: 0x4D;
        }
    recolour_sprite {
        0xAA: 0x22;
        0xAB: 0x6F;
        0xAC: 0x78;
        0xAD: 0x1F;
        0xAE: 0x27;
        0xAF: 0xA9;
        }
    recolour_sprite {
        0xAA: 0x35;
        0xAB: 0x19;
        0xAC: 0x6C;
        0xAD: 0x6D;
        0xAE: 0x40;
        0xAF: 0x39;
        }
    recolour_sprite {
        0xAA: 0x40;
        0xAB: 0x41;
        0xAC: 0x57;
        0xAD: 0x5E;
        0xAE: 0x42;
        0xAF: 0x32;
        }
    recolour_sprite {
        0xAA: 0x13;
        0xAB: 0x24;
        0xAC: 0x15;
        0xAD: 0x16;
        0xAE: 0x26;
        0xAF: 0x17;
        }

    recolour_sprite {
        0xAA: 0x6A;
        0xAB: 0x6B;
        0xAC: 0x05;
        0xAD: 0x6D;
        0xAE: 0x6E;
        0xAF: 0x39;
        }
    recolour_sprite {
        0xAA: 0x02;
        0xAB: 0x03;
        0xAC: 0x11;
        0xAD: 0x12;
        0xAE: 0x07;
        0xAF: 0x08;
        }
    recolour_sprite {
        0xAA: 0x06;
        0xAB: 0x13;
        0xAC: 0x6F;
        0xAD: 0x09;
        0xAE: 0x25;
        0xAF: 0x0B;
        }
    recolour_sprite {
        0xAA: 0x69;
        0xAB: 0x03;
        0xAC: 0x48;
        0xAD: 0x04;
        0xAE: 0x05;
        0xAF: 0x4A;
        }
    recolour_sprite {
        0xAA: 0x16;
        0xAB: 0x0B;
        0xAC: 0x0C;
        0xAD: 0x17;
        0xAE: 0x0D;
        0xAF: 0x0E;
        }
    recolour_sprite {
        0xAA: 0x74;
        0xAB: 0x09;
        0xAC: 0x76;
        0xAD: 0x77;
        0xAE: 0x26;
        0xAF: 0x79;
        }
    recolour_sprite {
        0xAA: 0x38;
        0xAB: 0x74;
        0xAC: 0x40;
        0xAD: 0x76;
        0xAE: 0x41;
        0xAF: 0x79;
        }
}


switch(FEAT_TRAINS, SELF, switch_bulk_recolour2, cargo_type_in_veh) {

    CASS: return palette_cargo + 0 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1;
    COKE: return palette_cargo + 0 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1;
    SLAG: return palette_cargo + 0 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1;
    MNO2: return palette_cargo + 0 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1;
    NITR: return palette_cargo + 0 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1;
    PHOS: return palette_cargo + 0 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1;
    PORE: return palette_cargo + 0 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1;
    return PALETTE_CC_DARK_BLUE;
   }
switch(FEAT_TRAINS, SELF, switch_bulk_recolour, cargo_type_in_veh) {
    COAL: return palette_cargo + 0;
    GRAI: return palette_cargo + 0 +1;
    WHEA: return palette_cargo + 0 +1;
    MAIZ: return palette_cargo + 0 +1 +1;
    IORE: return palette_cargo + 0 +1 +1 +1;
    FRUT: return palette_cargo + 0 +1 +1 +1 +1;
    CORE: return palette_cargo + 0 +1 +1 +1 +1 +1;
    AORE: return palette_cargo + 0 +1 +1 +1 +1 +1 +1;
    CLAY: return palette_cargo + 0 +1 +1 +1 +1 +1 +1 +1;
    FERT: return palette_cargo + 0 +1 +1 +1 +1 +1 +1 +1 +1;
    GRVL: return palette_cargo + 0 +1 +1 +1 +1 +1 +1 +1 +1 +1;
    LIME: return palette_cargo + 0 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1;
    OLSD: return palette_cargo + 0 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1;
    POTA: return palette_cargo + 0 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1;
    SAND: return palette_cargo + 0 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1;
    SCMT: return palette_cargo + 0 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1;
    SGBT: return palette_cargo + 0 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1;
    SGCN: return palette_cargo + 0 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1;
    SULP: return palette_cargo + 0 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1;
    BDMT: return palette_cargo + 0 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1 +1;
    return switch_bulk_recolour2;
   }
# 332 "src/palettes.pnml"
palette_lights_off_off = reserve_sprites(16);
replace(palette_lights_off_off) {
    recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCD: 0xC6..0xCD; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCD: 0x60..0x67; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCB: 0x2A..0x2F; 0xCC..0xCD: 0x30..0x31; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xC7: 0x3E..0x3F; 0xC8..0xCD: 0x40..0x45; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCA: 0xB3..0xB7; 0xCB..0xCD: 0xA4..0xA6; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCB: 0x9A..0x9F; 0xCC..0xCD: 0xA0..0xA1; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xC9: 0x52..0x55; 0xCA..0xCD: 0xCE..0xD1; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCD: 0x58..0x5F; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCD: 0x92..0x99; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCD: 0x72..0x79; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCD: 0x80..0x87; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCD: 0x88..0x8F; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6: 0x40; 0xC7..0xCC: 0xC0..0xC5; 0xCD: 0x27; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCD: 0x20..0x27; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCD: 0x04..0x0B; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCD: 0x08..0x0F; }
    }
palette_lights_off_white = reserve_sprites(16);
replace(palette_lights_off_white) {
    recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCD: 0xC6..0xCD; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCD: 0x60..0x67; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCB: 0x2A..0x2F; 0xCC..0xCD: 0x30..0x31; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xC7: 0x3E..0x3F; 0xC8..0xCD: 0x40..0x45; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCA: 0xB3..0xB7; 0xCB..0xCD: 0xA4..0xA6; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCB: 0x9A..0x9F; 0xCC..0xCD: 0xA0..0xA1; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xC9: 0x52..0x55; 0xCA..0xCD: 0xCE..0xD1; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCD: 0x58..0x5F; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCD: 0x92..0x99; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCD: 0x72..0x79; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCD: 0x80..0x87; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCD: 0x88..0x8F; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6: 0x40; 0xC7..0xCC: 0xC0..0xC5; 0xCD: 0x27; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCD: 0x20..0x27; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCD: 0x04..0x0B; } recolour_sprite { 0xAA: 0x18; 0xAB: 0x19; 0xAC: 0x19; 0xAD: 0x1A; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCD: 0x08..0x0F; }
    }
palette_lights_red_off = reserve_sprites(16);
replace(palette_lights_red_off) {
    recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCD: 0xC6..0xCD; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCD: 0x60..0x67; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCB: 0x2A..0x2F; 0xCC..0xCD: 0x30..0x31; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xC7: 0x3E..0x3F; 0xC8..0xCD: 0x40..0x45; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCA: 0xB3..0xB7; 0xCB..0xCD: 0xA4..0xA6; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCB: 0x9A..0x9F; 0xCC..0xCD: 0xA0..0xA1; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xC9: 0x52..0x55; 0xCA..0xCD: 0xCE..0xD1; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCD: 0x58..0x5F; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCD: 0x92..0x99; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCD: 0x72..0x79; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCD: 0x80..0x87; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCD: 0x88..0x8F; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6: 0x40; 0xC7..0xCC: 0xC0..0xC5; 0xCD: 0x27; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCD: 0x20..0x27; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCD: 0x04..0x0B; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x04; 0xAF: 0x05; 0xB0: 0x06; 0xC6..0xCD: 0x08..0x0F; }
    }
palette_lights_red_white = reserve_sprites(16);
replace(palette_lights_red_white) {
    recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCD: 0xC6..0xCD; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCD: 0x60..0x67; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCB: 0x2A..0x2F; 0xCC..0xCD: 0x30..0x31; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xC7: 0x3E..0x3F; 0xC8..0xCD: 0x40..0x45; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCA: 0xB3..0xB7; 0xCB..0xCD: 0xA4..0xA6; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCB: 0x9A..0x9F; 0xCC..0xCD: 0xA0..0xA1; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xC9: 0x52..0x55; 0xCA..0xCD: 0xCE..0xD1; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCD: 0x58..0x5F; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCD: 0x92..0x99; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCD: 0x72..0x79; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCD: 0x80..0x87; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCD: 0x88..0x8F; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6: 0x40; 0xC7..0xCC: 0xC0..0xC5; 0xCD: 0x27; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCD: 0x20..0x27; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCD: 0x04..0x0B; } recolour_sprite { 0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5; 0xAE: 0x0F; 0xAF: 0x0F; 0xB0: 0x0F; 0xC6..0xCD: 0x08..0x0F; }
    }


switch(FEAT_TRAINS, SELF, switch_lights_engine_2, (position_in_consist_from_end == 1)*2 + (position_in_consist == 0) ) {
    1: return palette_lights_off_white + company_colour1;
    2: return palette_lights_red_off + company_colour1;
    3: return palette_lights_red_white + company_colour1;
    return palette_lights_off_off + company_colour1;
}


palette_lights_red = reserve_sprites(1);
replace(palette_lights_red) { recolour_sprite {
        0xAA: 0xB7; 0xAB: 0xA4; 0xAC: 0xA4; 0xAD: 0xA5;
        } }
palette_lights_dark_olive = reserve_sprites(1);
replace(palette_lights_dark_olive) { recolour_sprite {
        0xAA: 0x18;
        0xAB: 0x18;
        0xAC: 0x19;
        0xAD: 0x1A;
        } }
palette_lights_dark_green = reserve_sprites(1);
replace(palette_lights_dark_green) { recolour_sprite {
        0xAA: 0x59;
        0xAB: 0x59;
        0xAC: 0x5A;
        0xAD: 0x5B;
        } }
palette_lights_dark_red = reserve_sprites(1);
replace(palette_lights_dark_red) { recolour_sprite {
        0xAA: 0xB5;
        0xAB: 0xB5;
        0xAC: 0xB6;
        0xAD: 0xB7;
        } }
palette_lights_dark_blue = reserve_sprites(1);
replace(palette_lights_dark_blue) { recolour_sprite {
        0xAA: 0x80;
        0xAB: 0x80;
        0xAC: 0x81;
        0xAD: 0x82;
        } }
palette_lights_light_blue = reserve_sprites(1);
replace(palette_lights_light_blue) { recolour_sprite {
        0xAA: 0x83;
        0xAB: 0x83;
        0xAC: 0x84;
        0xAD: 0x13;
        } }
palette_lights_brown = reserve_sprites(1);
replace(palette_lights_brown) { recolour_sprite {
        0xAA: 0x20;
        0xAB: 0x20;
        0xAC: 0x21;
        0xAD: 0x22;
        } }


switch(FEAT_TRAINS, SELF, switch_lights_wagon_olive_1, position_in_consist_from_end == 0 ) {
    1: return palette_lights_red;
    return palette_lights_dark_olive;
}
switch(FEAT_TRAINS, SELF, switch_lights_wagon_dkblue_1, position_in_consist_from_end == 0 ) {
    1: return palette_lights_red;
    return palette_lights_dark_blue;
}
switch(FEAT_TRAINS, SELF, switch_lights_wagon_ltblue_1, position_in_consist_from_end == 0 ) {
    1: return palette_lights_red;
    return palette_lights_light_blue;
}

switch(FEAT_TRAINS, SELF, switch_lights_wagon_olive_2, position_in_consist_from_end <= 1 ) {
    1: return palette_lights_red;
    return palette_lights_dark_olive;
}
switch(FEAT_TRAINS, SELF, switch_lights_wagon_green_2, position_in_consist_from_end <= 1 ) {
    1: return palette_lights_red;
    return palette_lights_dark_green;
}
switch(FEAT_TRAINS, SELF, switch_lights_wagon_red_2, position_in_consist_from_end <= 1 ) {
    1: return palette_lights_red;
    return palette_lights_dark_red;
}
switch(FEAT_TRAINS, SELF, switch_lights_wagon_dkblue_2, position_in_consist_from_end <= 1 ) {
    1: return palette_lights_red;
    return palette_lights_dark_blue;
}
switch(FEAT_TRAINS, SELF, switch_lights_wagon_ltblue_2, position_in_consist_from_end <= 1 ) {
    1: return palette_lights_red;
    return palette_lights_light_blue;
}
switch(FEAT_TRAINS, SELF, switch_lights_wagon_brown_2, position_in_consist_from_end <= 1 ) {
    1: return palette_lights_red;
    return palette_lights_brown;
}
# 158 "src/pkp.pnml" 2
# 1 "src/switches.pnml" 1
# 134 "src/switches.pnml"
switch(FEAT_TRAINS, SELF, switch_check_heating_combinations,
  [ STORE_TEMP((count_veh_id(item_tkh1) + count_veh_id(item_tki3) + count_veh_id(item_od13)/2 + count_veh_id(item_ti12)/2 + count_veh_id(item_tp4)/2 + count_veh_id(item_ty23)/2 + count_veh_id(item_ty37)/2 )*150 + (count_veh_id(item_ok1)/2 + count_veh_id(item_okl27) + count_veh_id(item_okz32)/2 + count_veh_id(item_tkt48) + count_veh_id(item_ty51)/2 + count_veh_id(item_sp42) )*180 + (count_veh_id(item_pt31)/2 + count_veh_id(item_ty2)/3 + count_veh_id(item_pt47)/2 + count_veh_id(item_ol49)/2 + count_veh_id(item_sp45)/2 )*225 + count_veh_id(item_ohxt)*270, 0),
    STORE_TEMP((count_veh_id(item_su42) + count_veh_id(item_ep02)/2 )*200 + (count_veh_id(item_su45)/2 + count_veh_id(item_sp32)/2 + count_veh_id(item_6dl) + count_veh_id(item_et21)/2 + count_veh_id(item_et22)/2 + count_veh_id(item_et40)/3 )*290 + (count_veh_id(item_su46)/2 + count_veh_id(item_su160)/2 + count_veh_id(item_ep05)/2 + count_veh_id(item_eu07)/2 + count_veh_id(item_ep09)/2 + count_veh_id(item_ep09)/2 + count_veh_id(item_et41)/3 + count_veh_id(item_et42)/3 + count_veh_id(item_eu43)/2 + count_veh_id(item_eu44)/2 + count_veh_id(item_eu47)/2 + count_veh_id(item_eu46)/2 + count_veh_id(item_et26)/2 )*450, 1),
    STORE_TEMP((count_veh_id(item_bcy) + count_veh_id(item_bcyh) + count_veh_id(item_bci))*25 + count_veh_id(item_bhxz)*36 + count_veh_id(item_abhxz)*45, 2),
 STORE_TEMP((count_veh_id(item_bdwxzd) + count_veh_id(item_bh_ryf) + count_veh_id(item_bh_bon))*36 + (count_veh_id(item_abdnu) + count_veh_id(item_jhix))*45 + count_veh_id(item_bipa)/6*45 * 3, 3),
    STORE_TEMP((count_veh_id(item_bdhpumn)/2 + count_veh_id(item_twindexx)/2 + count_veh_id(item_twindexxcc)/2 + count_veh_id(item_abdhmnu)/2 + count_veh_id(item_ab9mnopuz)/2 + count_veh_id(item_wlab10mnouz)/2 + count_veh_id(item_wrdmnu)/2 + count_veh_id(item_wrmnouz)/2)*45, 4),
    ((LOAD_TEMP(0) >= LOAD_TEMP(2)+LOAD_TEMP(3)) && LOAD_TEMP(4) == 0) ||
((LOAD_TEMP(1) >= LOAD_TEMP(3)+LOAD_TEMP(4)) && LOAD_TEMP(2) == 0) ])
{
    1: return CB_RESULT_NO_TEXT;
    return string(STR_TRAIN_NOT_HEATED);
}
switch(FEAT_TRAINS, SELF, switch_check_heating, climate == CLIMATE_ARCTIC) {
    1: switch_check_heating_combinations;
    return CB_RESULT_NO_TEXT;
}
switch(FEAT_TRAINS, SELF, switch_check_features, (count_veh_id(item_gmy) + count_veh_id(item_fg) + count_veh_id(item_fy) + count_veh_id(item_bci) + count_veh_id(item_wddoh) + count_veh_id(item_wddo_2w) + count_veh_id(item_es) + count_veh_id(item_ppu) + count_veh_id(item_kdth) + count_veh_id(item_kddet) + count_veh_id(item_ggs) + count_veh_id(item_gbs) + count_veh_id(item_hbbins) + count_veh_id(item_slr) + count_veh_id(item_slms) + count_veh_id(item_ibhss) + count_veh_id(item_pdkh31) + count_veh_id(item_kbkks) + count_veh_id(item_kgns) + count_veh_id(item_res) + count_veh_id(item_rh) + count_veh_id(item_rbh) + count_veh_id(item_sn) + count_veh_id(item_hes) + count_veh_id(item_rnh) + count_veh_id(item_rnh_5r) + count_veh_id(item_sdwh) + count_veh_id(item_lekqss) )*10 + (count_veh_id(item_gmw) + count_veh_id(item_pdn) + count_veh_id(item_fhx) + count_veh_id(item_ohxt) + count_veh_id(item_bcyh) + count_veh_id(item_bhxz) + count_veh_id(item_bh_ryf) + count_veh_id(item_abdnu) + count_veh_id(item_bh_bon) + count_veh_id(item_eaos) + count_veh_id(item_eanos) + count_veh_id(item_eamos) + count_veh_id(item_fals) + count_veh_id(item_falns) + count_veh_id(item_gags) + count_veh_id(item_habbins) + count_veh_id(item_sgs) + count_veh_id(item_sdgmnss) + count_veh_id(item_zaes) + count_veh_id(item_uahs) + count_veh_id(item_uacs) + count_veh_id(item_tads) )*12 + (count_veh_id(item_ghmx) + count_veh_id(item_dhxt) + count_veh_id(item_dwxz) + count_veh_id(item_bdwxzd) + count_veh_id(item_abhxz) + count_veh_id(item_abdhmnu)/2 + count_veh_id(item_ab9mnopuz)/2 + count_veh_id(item_wlabwxz) + count_veh_id(item_wlab) + count_veh_id(item_wlab10mnouz)/2 + count_veh_id(item_jhx) + count_veh_id(item_jhix) + count_veh_id(item_wrdmnu)/2 + count_veh_id(item_wrmnouz)/2 + count_veh_id(item_bipa)/6 + count_veh_id(item_bdhpumn)/2 + count_veh_id(item_twindexx)/2 + count_veh_id(item_twindexxcc)/2 )*15 + (count_veh_id(item_tkh1) + count_veh_id(item_tki3) + count_veh_id(item_od13)/2 + count_veh_id(item_ti12)/2 + count_veh_id(item_okl27) + count_veh_id(item_tkt48) + count_veh_id(item_sm30) + count_veh_id(item_sm41) + count_veh_id(item_sm42) + count_veh_id(item_sp42) + count_veh_id(item_su42) + count_veh_id(item_sp32)/2 + count_veh_id(item_br285)/2 + count_veh_id(item_6dl) + count_veh_id(item_su160)/2 + count_veh_id(item_ep01)/2 + count_veh_id(item_ep02)/2 + count_veh_id(item_ep05)/2 + count_veh_id(item_eu07)/2 + count_veh_id(item_ep09)/2 + count_veh_id(item_eu43)/2 + count_veh_id(item_eu44)/2 + count_veh_id(item_eu47)/2 + count_veh_id(item_eu46)/2 )*20 + (count_veh_id(item_tp4)/2 + count_veh_id(item_ok1)/2 + count_veh_id(item_okz32)/2 + count_veh_id(item_st43)/2 + count_veh_id(item_st44)/2 + count_veh_id(item_sp45)/2 + count_veh_id(item_su45)/2 + count_veh_id(item_su46)/2 + count_veh_id(item_sm31)/2 + count_veh_id(item_et21)/2 + count_veh_id(item_et22)/2 + count_veh_id(item_et26)/3 )*30 + (count_veh_id(item_ty23)/2 + count_veh_id(item_pt31)/2 + count_veh_id(item_ty37)/2 + count_veh_id(item_ty2)/3 + count_veh_id(item_pt47)/2 + count_veh_id(item_ol49)/2 + count_veh_id(item_ty51)/2 + count_veh_id(item_et40)/3 + count_veh_id(item_et41)/3 + count_veh_id(item_et42)/3 )*40 - count_veh_id(item_bcy)*15 - count_veh_id(item_wdn)*4 - count_veh_id(item_wddo)*10 - count_veh_id(item_kd)*4 - count_veh_id(item_kdt)*10 - count_veh_id(item_sdw)*12 - count_veh_id(item_pdk31)*12 >= 0) {
    1: switch_check_heating;
    return string(STR_TRAIN_WITHOUT_BRAKE);
}
switch(FEAT_TRAINS, SELF, switch_normal_start_stop, company_type == PLAYERTYPE_HUMAN) {
    1: switch_check_features;
    return CB_RESULT_NO_TEXT;
}
switch(FEAT_TRAINS, SELF, switch_normal_can_attach, vehicle_type_id) {
    item_sn61: return string(STR_ATTACH_DISALLOW_MCAR);
    item_sn81: return string(STR_ATTACH_DISALLOW_MCAR);
    item_sa106: return string(STR_ATTACH_DISALLOW_MCAR);
    item_en57: return string(STR_ATTACH_DISALLOW_EZT1);
    item_en71: return string(STR_ATTACH_DISALLOW_EZT1);
    item_ed72: return string(STR_ATTACH_DISALLOW_EZT1);
    item_ed74: return string(STR_ATTACH_DISALLOW_EZT1);
    item_en76: return string(STR_ATTACH_DISALLOW_EZT1);
    item_ed250: return string(STR_ATTACH_DISALLOW_EZT1);
    item_en63a: return string(STR_ATTACH_DISALLOW_EZT1);
    item_ed161: return string(STR_ATTACH_DISALLOW_EZT1);
 item_wm15a: return string(STR_ATTACH_DISALLOW_TROLLEY);
 item_pwm15: return string(STR_ATTACH_DISALLOW_TROLLEY);
 item_asf: return string(STR_ATTACH_DISALLOW_TROLLEY);
    return CB_RESULT_ATTACH_ALLOW;
}

switch(FEAT_TRAINS, SELF, switch_normal_steam_effect_local, position_in_vehid_chain % 2) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_STEAM, -3, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, PARENT, switch_normal_steam_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) {
    item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
    return switch_normal_steam_effect_local;
}
# 266 "src/switches.pnml"
switch(FEAT_TRAINS, SELF, switch_old_subtype_text, cargo_subtype) {
    0: return string(STR_SUBTYPE_OLD_2CLASS);
    1: return string(STR_SUBTYPE_OLD_12CLASS);
    2: return string(STR_SUBTYPE_OLD_1CLASS);
    return CB_RESULT_NO_TEXT;
}
switch(FEAT_TRAINS, SELF, switch_new_subtype_text, cargo_subtype) {
    0: return string(STR_SUBTYPE_NEW_2CLASS);
    1: return string(STR_SUBTYPE_NEW_1CLASS);
    return CB_RESULT_NO_TEXT;
}


switch(FEAT_TRAINS, SELF, switch_old_refit_cost, ((extra_callback_info1>>8)&0xFF)%3 - cargo_subtype%3) {
   -2: return (-2*int(39 / 3)) & CB_RESULT_REFIT_COST_MASK;
   -1: return (-1*int(39 / 3)) & CB_RESULT_REFIT_COST_MASK;
    1: return 1*39;
    2: return 2*39;
    return 0 | CB_RESULT_AUTOREFIT;
}

switch(FEAT_TRAINS, SELF, switch_new_refit_cost, ((extra_callback_info1>>8)&0xFF)%2 - cargo_subtype%2) {
   -1: return (-1*int(54 / 3)) & CB_RESULT_REFIT_COST_MASK;
    1: return 1*54;
    return 0 | CB_RESULT_AUTOREFIT;
}






switch(FEAT_TRAINS, PARENT, switch_normal_cargo_age_period, bitmask_consist_info & bitmask(3, 4)) {
    bitmask(3): return int(185*1.41);
    bitmask(4): return int(185*2);
    bitmask(3, 4): return int(185*1.41*2);
    return 185;
}



switch(FEAT_TRAINS, SELF, switch_old_cargo_age_period_normal, cargo_subtype % 3) {
    1: return int((24*185*2.83 + 40*185)/64);
    2: return int(185*2.83);
    return 185;
}
switch(FEAT_TRAINS, SELF, switch_old_cargo_age_period_restaurant, cargo_subtype % 3) {
    1: return int((24*185*2.83 + 40*185)/64*2);
    2: return int(185*2.83*2);
    return int(185*2);
}
switch(FEAT_TRAINS, SELF, switch_old_cargo_age_period_luggage, cargo_subtype % 3) {
    1: return int((24*185*2.83 + 40*185)/64*1.41);
    2: return int(185*2.83*1.41);
    return int(185*1.41);
}
switch(FEAT_TRAINS, SELF, switch_old_cargo_age_period_all, cargo_subtype % 3) {
    1: return int((24*185*2.83 + 40*185)/64*1.41*2);
    2: return int(185*2.83*1.41*2);
    return int(185*1.41*2);
}
switch(FEAT_TRAINS, PARENT, switch_old_cargo_age_period, bitmask_consist_info & bitmask(3, 4)) {
    bitmask(3): return switch_old_cargo_age_period_luggage;
    bitmask(4): return switch_old_cargo_age_period_restaurant;
    bitmask(3, 4): return switch_old_cargo_age_period_all;
    return switch_old_cargo_age_period_normal;
}



switch(FEAT_TRAINS, SELF, switch_new_cargo_age_period_normal, cargo_subtype % 2) {
    1: return int(185*2.83);
    return 185;
}
switch(FEAT_TRAINS, SELF, switch_new_cargo_age_period_restaurant, cargo_subtype % 2) {
    1: return int(185*2.83*2);
    return int(185*2);
}
switch(FEAT_TRAINS, SELF, switch_new_cargo_age_period_luggage, cargo_subtype % 2) {
    1: return int(185*2.83*1.41);
    return int(185*1.41);
}
switch(FEAT_TRAINS, SELF, switch_new_cargo_age_period_all, cargo_subtype % 2) {
    1: return int(185*2.83*1.41*2);
    return int(185*1.41*2);
}
switch(FEAT_TRAINS, PARENT, switch_new_cargo_age_period, bitmask_consist_info & bitmask(3, 4)) {
    bitmask(3): return switch_new_cargo_age_period_luggage;
    bitmask(4): return switch_new_cargo_age_period_restaurant;
    bitmask(3, 4): return switch_new_cargo_age_period_all;
    return switch_new_cargo_age_period_normal;
}


switch(FEAT_TRAINS, PARENT, switch_sleep_cargo_age_period, bitmask_consist_info & bitmask(3, 4)) {
    bitmask(3): return int(185*8*1.41);
    bitmask(4): return int(185*8*2);
    bitmask(3, 4): return int(185*8*1.41*2);
    return 185*8;
}
# 159 "src/pkp.pnml" 2


# 1 "src/dummy.pnml" 1





spriteset(sset_dummy, "gfx/dummy.png") { [0, 0, 1, 1, 0, 0] }


item(FEAT_TRAINS, item_dummy_1) {
    property {
        climates_available: NO_CLIMATE;
        introduction_date: date(1918, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        sprite_id: SPRITE_ID_NEW_TRAIN;
        track_type: RAIL;
        power: 0;
        cargo_capacity: 0;
        weight: 0;
        length: 1;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
    }
    graphics {
        default: sset_dummy;
    }
}

item(FEAT_TRAINS, item_dummy_2) {
    property {
        climates_available: NO_CLIMATE;
        introduction_date: date(1918, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        sprite_id: SPRITE_ID_NEW_TRAIN;
        track_type: RAIL;
        power: 0;
        cargo_capacity: 0;
        weight: 0;
        length: 2;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
    }
    graphics {
        default: sset_dummy;
    }
}

item(FEAT_TRAINS, item_dummy_3) {
    property {
        climates_available: NO_CLIMATE;
        introduction_date: date(1918, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        sprite_id: SPRITE_ID_NEW_TRAIN;
        track_type: RAIL;
        power: 0;
        cargo_capacity: 0;
        weight: 0;
        length: 3;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
    }
    graphics {
        default: sset_dummy;
    }
}

item(FEAT_TRAINS, item_dummy_4) {
    property {
        climates_available: NO_CLIMATE;
        introduction_date: date(1918, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        sprite_id: SPRITE_ID_NEW_TRAIN;
        track_type: RAIL;
        power: 0;
        cargo_capacity: 0;
        weight: 0;
        length: 4;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
    }
    graphics {
        default: sset_dummy;
    }
}
# 162 "src/pkp.pnml" 2


# 1 "src/engines/tkh1.pnml" 1





spriteset(sset_tkh1_purchase, "gfx/tkh1.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_tkh1, "gfx/tkh1.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_tkh1_rev, "gfx/tkh1.png") { tmpl_sprite_train(4, 80) }


switch(FEAT_TRAINS, PARENT, switch_tkh1_graphics, vehicle_is_reversed) {
 1: return sset_tkh1_rev;
    return sset_tkh1;
}
switch(FEAT_TRAINS, PARENT, switch_tkh1_visual_effect_local, vehicle_is_reversed) {
    1: return visual_effect_and_powered(VISUAL_EFFECT_STEAM, 1, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_STEAM, -3, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_tkh1_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_STEAM_POWER_TEXT, 150), string(STR_ENGINE_PASSENGER_FREIGHT));
 return string(STR_ENGINE_PASSENGER_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_tkh1_running_cost2, current_speed ) { 0: return 11; return 31; } switch (FEAT_TRAINS, PARENT, switch_tkh1_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_tkh1_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_tkh1_power2, position_in_consist > 0 ) { 1: return int(int(213*1.3410)*0.67); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_tkh1_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_tkh1_power2; }
switch(FEAT_TRAINS, PARENT, switch_tkh1_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_tkh1_visual_effect_local; }


item(FEAT_TRAINS, item_tkh1) {
    property {

        name: string(STR_TKH1_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 40;
        reliability_decay: 12;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 5;
        running_cost_factor: 31;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 45 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 213 kW;
        running_cost_base: RUNNING_COST_STEAM;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 29 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_STEAM;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.212;
        air_drag_coefficient: 0.07;
        length: 6;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        extra_weight_per_wagon: 0 ton;
        bitmask_vehicle_info: 0;
    }

if(param_orig_intro_dates) {
    property {
        introduction_date: date(1882, 1, 1);
    }
}

if(!param_keep_old_vehs) {
    if(param_orig_intro_dates) {
        property {
            model_life: 51+36;
            retire_early: 12;
        }
    } else {
        property {
            model_life: 51;
            retire_early: 12;
        }
    }
}

    graphics {
        purchase: sset_tkh1_purchase;
        additional_text: switch_tkh1_add_text;
        default: switch_tkh1_graphics;
        visual_effect_and_powered: switch_tkh1_visual_effect;
  can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_tkh1_running_cost;
        purchase_power: return CB_FAILED; power: switch_tkh1_power;
    }
}
# 165 "src/pkp.pnml" 2
# 1 "src/engines/tki3.pnml" 1





spriteset(sset_tki3_purchase, "gfx/tki3.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_tki3, "gfx/tki3.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_tki3_rev, "gfx/tki3.png") { tmpl_sprite_train(4, 80) }


switch(FEAT_TRAINS, PARENT, switch_tki3_graphics, vehicle_is_reversed) {
 1: return sset_tki3_rev;
    return sset_tki3;
}
switch(FEAT_TRAINS, PARENT, switch_tki3_visual_effect_local, vehicle_is_reversed) {
    1: return visual_effect_and_powered(VISUAL_EFFECT_STEAM, 2, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_STEAM, -3, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_tki3_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_STEAM_POWER_TEXT, 150), string(STR_ENGINE_PASSENGER_FREIGHT));
 return string(STR_ENGINE_PASSENGER_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_tki3_running_cost2, current_speed ) { 0: return 14; return 43; } switch (FEAT_TRAINS, PARENT, switch_tki3_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_tki3_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_tki3_power2, position_in_consist > 0 ) { 1: return int(int(345*1.3410)*0.67); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_tki3_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_tki3_power2; }
switch(FEAT_TRAINS, PARENT, switch_tki3_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_tki3_visual_effect_local; }


item(FEAT_TRAINS, item_tki3) {
    property {

        name: string(STR_TKI3_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 36;
        reliability_decay: 16;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 11;
        running_cost_factor: 43;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 65 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 345 kW;
        running_cost_base: RUNNING_COST_STEAM;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 59 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_STEAM;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.151;
        air_drag_coefficient: 0.07;
        length: 7;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

if(param_orig_intro_dates) {
    property {
        introduction_date: date(1901, 1, 1);
    }
}

if(!param_keep_old_vehs) {
    if(param_orig_intro_dates) {
        property {
            model_life: 57+17;
            retire_early: 12;
        }
    } else {
        property {
            model_life: 57;
            retire_early: 12;
        }
    }
}

    graphics {
        purchase: sset_tki3_purchase;
        additional_text: switch_tki3_add_text;
        default: switch_tki3_graphics;
        visual_effect_and_powered: switch_tki3_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_tki3_running_cost;
        purchase_power: return CB_FAILED; power: switch_tki3_power;
    }
}
# 166 "src/pkp.pnml" 2
# 1 "src/engines/tp4.pnml" 1





spriteset(sset_tp4_purchase, "gfx/tp4.png") { tmpl_sprite_purchase(4, 100) }
spriteset(sset_tp4, "gfx/tp4.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_tp4_tender, "gfx/tp4.png") { tmpl_sprite_train(4, 60) }


switch(FEAT_TRAINS, SELF, switch_tp4_articulated, extra_callback_info1) {
    1: return item_tp4;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_tp4_graphics, position_in_vehid_chain % 2) {
    0: return sset_tp4;
    return sset_tp4_tender;
}
switch(FEAT_TRAINS, SELF, switch_tp4_length, position_in_vehid_chain % 2) {
    1: return 5;
    return 7;
}
switch (FEAT_TRAINS, SELF, switch_tp4_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_STEAM_POWER_TEXT, 150), string(STR_ENGINE_FREIGHT));
 return string(STR_ENGINE_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_tp4_running_cost2, current_speed ) { 0: return 16; return 78; } switch (FEAT_TRAINS, PARENT, switch_tp4_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_tp4_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_tp4_power2, position_in_consist > 0 ) { 1: return int(int(927*1.3410)*0.67); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_tp4_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_tp4_power2; }


item(FEAT_TRAINS, item_tp4) {
    property {

        name: string(STR_TP4_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        vehicle_life: 36;
        reliability_decay: 6;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 12;
        running_cost_factor: 78;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 55 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 927 kW;
        running_cost_base: RUNNING_COST_STEAM;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 115 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_STEAM;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.139;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
 }
} else {
    property {
        model_life: 62;
  retire_early: 12;
 }
}

    graphics {
        purchase: sset_tp4_purchase;
        additional_text: switch_tp4_add_text;
        default: switch_tp4_graphics;
        articulated_part: switch_tp4_articulated;
        length: switch_tp4_length;
        visual_effect_and_powered: switch_normal_steam_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_tp4_running_cost;
        purchase_power: return CB_FAILED; power: switch_tp4_power;
    }
}
# 167 "src/pkp.pnml" 2
# 1 "src/engines/ok1.pnml" 1





spriteset(sset_ok1_purchase, "gfx/ok1.png") { tmpl_sprite_purchase(4, 100) }
spriteset(sset_ok1_f1, "gfx/ok1.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_ok1_f2, "gfx/ok1.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_ok1_tender, "gfx/ok1.png") { tmpl_sprite_train(4, 60) }

alternative_sprites(sset_ok1_f1,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ok1-x2.png") { tmpl_sprite_train_x2(8, 40) }
alternative_sprites(sset_ok1_f2,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ok1-x2.png") { tmpl_sprite_train_x2(8, 120) }
alternative_sprites(sset_ok1_tender,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ok1-x2.png") { tmpl_sprite_train_x2(8, 200) }



switch(FEAT_TRAINS, SELF, switch_ok1_articulated, extra_callback_info1) {
    1: return item_ok1;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_ok1_graphics_frames, motion_counter % 4) {
    0..1: return sset_ok1_f1;
    return sset_ok1_f2;
}
switch(FEAT_TRAINS, SELF, switch_ok1_graphics, position_in_vehid_chain % 2) {
    0: return switch_ok1_graphics_frames;
    return sset_ok1_tender;
}
switch(FEAT_TRAINS, SELF, switch_ok1_length, position_in_vehid_chain % 2) {
    1: return 5;
    return 7;
}
switch (FEAT_TRAINS, SELF, switch_ok1_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_STEAM_POWER_TEXT, 180), string(STR_ENGINE_PASSENGER));
    return string(STR_ENGINE_PASSENGER);
}
switch (FEAT_TRAINS, PARENT, switch_ok1_running_cost2, current_speed ) { 0: return 18; return 68+1; } switch (FEAT_TRAINS, PARENT, switch_ok1_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ok1_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_ok1_power2, position_in_consist > 0 ) { 1: return int(int(662*1.3410)*0.67); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_ok1_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ok1_power2; }


item(FEAT_TRAINS, item_ok1) {
    property {

        name: string(STR_OK1_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        vehicle_life: 30;
        reliability_decay: 18;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 21;
        running_cost_factor: 68+1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 662 kW;
        running_cost_base: RUNNING_COST_STEAM;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 123 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_STEAM;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.093;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 62;
        retire_early: 8;
    }
}

    graphics {
        purchase: sset_ok1_purchase;
        additional_text: switch_ok1_add_text;
        default: switch_ok1_graphics;
        articulated_part: switch_ok1_articulated;
        length: switch_ok1_length;
        visual_effect_and_powered: switch_normal_steam_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_ok1_running_cost;
        purchase_power: return CB_FAILED; power: switch_ok1_power;
    }
}
# 168 "src/pkp.pnml" 2
# 1 "src/engines/ty23.pnml" 1





spriteset(sset_ty23_purchase, "gfx/ty23.png") { tmpl_sprite_purchase(4, 100) }
spriteset(sset_ty23_f1, "gfx/ty23.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_ty23_f2, "gfx/ty23.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_ty23_tender, "gfx/ty23.png") { tmpl_sprite_train(4, 60) }

alternative_sprites(sset_ty23_f1,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ty23-x2.png") { tmpl_sprite_train_x2(8, 40) }
alternative_sprites(sset_ty23_f2,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ty23-x2.png") { tmpl_sprite_train_x2(8, 120) }
alternative_sprites(sset_ty23_tender,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ty23-x2.png") { tmpl_sprite_train_x2(8, 200) }



switch(FEAT_TRAINS, SELF, switch_ty23_articulated, extra_callback_info1) {
    1: return item_ty23;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_ty23_graphics_frames, motion_counter % 4) {
    0..1: return sset_ty23_f1;
    return sset_ty23_f2;
}
switch(FEAT_TRAINS, SELF, switch_ty23_graphics, position_in_vehid_chain % 2) {
    0: return switch_ty23_graphics_frames;
    return sset_ty23_tender;
}
switch(FEAT_TRAINS, SELF, switch_ty23_length, position_in_vehid_chain % 2) {
    1: return 5;
    return 8;
}
switch (FEAT_TRAINS, SELF, switch_ty23_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_STEAM_POWER_TEXT, 150), string(STR_ENGINE_HEAVY_FREIGHT));
 return string(STR_ENGINE_HEAVY_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_ty23_running_cost2, current_speed ) { 0: return 16; return 81; } switch (FEAT_TRAINS, PARENT, switch_ty23_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ty23_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_ty23_power2, position_in_consist > 0 ) { 1: return int(int(976*1.3410)*0.67); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_ty23_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ty23_power2; }


item(FEAT_TRAINS, item_ty23) {
    property {

        name: string(STR_TY23_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1923, 1, 1);
        vehicle_life: 35;
        reliability_decay: 10;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 13;
        running_cost_factor: 81;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 60 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 976 kW;
        running_cost_base: RUNNING_COST_STEAM;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 149 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_STEAM;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.141;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
 }
} else {
    property {
        model_life: 62;
  retire_early: 10;
 }
}

    graphics {
        purchase: sset_ty23_purchase;
        additional_text: switch_ty23_add_text;
        default: switch_ty23_graphics;
        articulated_part: switch_ty23_articulated;
        length: switch_ty23_length;
        visual_effect_and_powered: switch_normal_steam_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_ty23_running_cost;
        purchase_power: return CB_FAILED; power: switch_ty23_power;
    }
}
# 169 "src/pkp.pnml" 2
# 1 "src/engines/okl27.pnml" 1





spriteset(sset_okl27_purchase, "gfx/okl27.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_okl27, "gfx/okl27.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_okl27_rev, "gfx/okl27.png") { tmpl_sprite_train(4, 80) }


switch(FEAT_TRAINS, PARENT, switch_okl27_graphics, vehicle_is_reversed) {
 1: return sset_okl27_rev;
    return sset_okl27;
}
switch(FEAT_TRAINS, PARENT, switch_okl27_visual_effect_local, vehicle_is_reversed) {
    1: return visual_effect_and_powered(VISUAL_EFFECT_STEAM, 3, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_STEAM, -3, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_okl27_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_STEAM_POWER_TEXT, 180), string(STR_ENGINE_PASSENGER));
 return string(STR_ENGINE_PASSENGER);
}
switch (FEAT_TRAINS, PARENT, switch_okl27_running_cost2, current_speed ) { 0: return 17-1; return 68-1; } switch (FEAT_TRAINS, PARENT, switch_okl27_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_okl27_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_okl27_power2, position_in_consist > 0 ) { 1: return int(int(684*1.3410)*0.67); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_okl27_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_okl27_power2; }
switch(FEAT_TRAINS, PARENT, switch_okl27_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_okl27_visual_effect_local; }


item(FEAT_TRAINS, item_okl27) {
    property {

        name: string(STR_OKL27_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1927, 1, 1);
        vehicle_life: 30;
        reliability_decay: 18;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 16;
        running_cost_factor: 68-1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 80 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 684 kW;
        running_cost_base: RUNNING_COST_STEAM;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 81 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_STEAM;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.160;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
 }
} else {
    property {
        model_life: 58;
  retire_early: 8;
 }
}

    graphics {
        purchase: sset_okl27_purchase;
        additional_text: switch_okl27_add_text;
        default: switch_okl27_graphics;
        visual_effect_and_powered: switch_okl27_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_okl27_running_cost;
        purchase_power: return CB_FAILED; power: switch_okl27_power;
    }
}
# 170 "src/pkp.pnml" 2
# 1 "src/engines/pt31.pnml" 1





spriteset(sset_pt31_purchase, "gfx/pt31.png") { tmpl_sprite_purchase(4, 100) }
spriteset(sset_pt31, "gfx/pt31.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_pt31_tender, "gfx/pt31.png") { tmpl_sprite_train(4, 60) }


switch(FEAT_TRAINS, SELF, switch_pt31_articulated, extra_callback_info1) {
    1: return item_pt31;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_pt31_graphics, position_in_vehid_chain % 2) {
    0: return sset_pt31;
    return sset_pt31_tender;
}
switch(FEAT_TRAINS, SELF, switch_pt31_length, position_in_vehid_chain % 2) {
    1: return 7;
    return 8;
}
switch (FEAT_TRAINS, SELF, switch_pt31_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_STEAM_POWER_TEXT, 225), string(STR_ENGINE_EXPRESS));
 return string(STR_ENGINE_EXPRESS);
}
switch (FEAT_TRAINS, PARENT, switch_pt31_running_cost2, current_speed ) { 0: return 23; return 118+1; } switch (FEAT_TRAINS, PARENT, switch_pt31_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_pt31_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_pt31_power2, position_in_consist > 0 ) { 1: return int(int(1421*1.3410)*0.67); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_pt31_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_pt31_power2; }


item(FEAT_TRAINS, item_pt31) {
    property {

        name: string(STR_PT31_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1931, 1, 1);
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 28;
        running_cost_factor: 118+1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 110 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 1421 kW;
        running_cost_base: RUNNING_COST_STEAM;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 173 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_STEAM;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.080;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
 }
} else {
    property {
        model_life: 57;
  retire_early: 8;
 }
}

    graphics {
        purchase: sset_pt31_purchase;
        additional_text: switch_pt31_add_text;
        default: switch_pt31_graphics;
        articulated_part: switch_pt31_articulated;
        length: switch_pt31_length;
        visual_effect_and_powered: switch_normal_steam_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_pt31_running_cost;
        purchase_power: return CB_FAILED; power: switch_pt31_power;
    }
}
# 171 "src/pkp.pnml" 2
# 1 "src/engines/okz32.pnml" 1





spriteset(sset_okz32_purchase, "gfx/okz32.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_okz32, "gfx/okz32.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_okz32_rev, "gfx/okz32.png") { tmpl_sprite_train10(4, 80) }


switch(FEAT_TRAINS, SELF, switch_okz32_articulated, extra_callback_info1) {
    1: return item_okz32;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_okz32_length, position_in_vehid_chain % 2) {
    1: return 1;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_okz32_graphics_normal, position_in_vehid_chain % 2) {
    0: return sset_okz32;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_okz32_graphics_rev, position_in_vehid_chain % 2) {
    0: return sset_okz32_rev;
    return sset_dummy;
}
switch(FEAT_TRAINS, PARENT, switch_okz32_graphics, vehicle_is_reversed) {
    1: return switch_okz32_graphics_rev;
    return switch_okz32_graphics_normal;
}
switch(FEAT_TRAINS, SELF, switch_okz32_visual_effect_normal, position_in_vehid_chain % 2) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_STEAM, -3, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, SELF, switch_okz32_visual_effect_rev, position_in_vehid_chain % 2) {
    1: return visual_effect_and_powered(VISUAL_EFFECT_STEAM, -4, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, PARENT, switch_okz32_visual_effect_local, vehicle_is_reversed) {
    1: return switch_okz32_visual_effect_rev;
    return switch_okz32_visual_effect_normal;
}
switch (FEAT_TRAINS, SELF, switch_okz32_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_STEAM_POWER_TEXT, 180), string(STR_ENGINE_PASSENGER_FREIGHT));
    return string(STR_ENGINE_PASSENGER_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_okz32_running_cost2, current_speed ) { 0: return 20; return 108-1; } switch (FEAT_TRAINS, PARENT, switch_okz32_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_okz32_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_okz32_power2, position_in_consist > 0 ) { 1: return int(int(1380*1.3410)*0.67); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_okz32_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_okz32_power2; }
switch(FEAT_TRAINS, PARENT, switch_okz32_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_okz32_visual_effect_local; }


item(FEAT_TRAINS, item_okz32) {
    property {

        name: string(STR_OKZ32_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1932, 1, 1);
        vehicle_life: 30;
        reliability_decay: 18;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 20;
        running_cost_factor: 108-1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 75 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 1380 kW;
        running_cost_base: RUNNING_COST_STEAM;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 118 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_STEAM;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.149;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        extra_weight_per_wagon: 0 ton;
        bitmask_vehicle_info: 0;
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 59;
        retire_early: 10;
    }
}

    graphics {
        purchase: sset_okz32_purchase;
        additional_text: switch_okz32_add_text;
        default: switch_okz32_graphics;
        articulated_part: switch_okz32_articulated;
        length: switch_okz32_length;
        visual_effect_and_powered: switch_okz32_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_okz32_running_cost;
        purchase_power: return CB_FAILED; power: switch_okz32_power;
    }
}
# 172 "src/pkp.pnml" 2
# 1 "src/engines/ty37.pnml" 1





spriteset(sset_ty37_purchase, "gfx/ty37.png") { tmpl_sprite_purchase(4, 100) }
spriteset(sset_ty37, "gfx/ty37.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_ty37_tender, "gfx/ty37.png") { tmpl_sprite_train(4, 60) }


switch(FEAT_TRAINS, SELF, switch_ty37_articulated, extra_callback_info1) {
    1: return item_ty37;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_ty37_graphics, position_in_vehid_chain % 2) {
    0: return sset_ty37;
    return sset_ty37_tender;
}
switch(FEAT_TRAINS, SELF, switch_ty37_length, position_in_vehid_chain % 2) {
    1: return 5;
    return 8;
}
switch (FEAT_TRAINS, SELF, switch_ty37_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_STEAM_POWER_TEXT, 150), string(STR_ENGINE_HEAVY_FREIGHT));
 return string(STR_ENGINE_HEAVY_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_ty37_running_cost2, current_speed ) { 0: return 20; return 102; } switch (FEAT_TRAINS, PARENT, switch_ty37_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ty37_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_ty37_power2, position_in_consist > 0 ) { 1: return int(int(1264*1.3410)*0.67); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_ty37_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ty37_power2; }


item(FEAT_TRAINS, item_ty37) {
    property {

        name: string(STR_TY37_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1937, 1, 1);
        vehicle_life: 33;
        reliability_decay: 16;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 19;
        running_cost_factor: 102;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 75 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 1264 kW;
        running_cost_base: RUNNING_COST_STEAM;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 153 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_STEAM;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.137;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
 }
} else {
    property {
        model_life: 60;
  retire_early: 13;
 }
}

    graphics {
        purchase: sset_ty37_purchase;
        additional_text: switch_ty37_add_text;
        default: switch_ty37_graphics;
        articulated_part: switch_ty37_articulated;
        length: switch_ty37_length;
        visual_effect_and_powered: switch_normal_steam_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_ty37_running_cost;
        purchase_power: return CB_FAILED; power: switch_ty37_power;
    }
}
# 173 "src/pkp.pnml" 2
# 1 "src/engines/ty2.pnml" 1





spriteset(sset_ty2_purchase, "gfx/ty2.png") { tmpl_sprite_purchase(4, 100) }
spriteset(sset_ty2_f1, "gfx/ty2.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_ty2_f2, "gfx/ty2.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_ty2_tender, "gfx/ty2.png") { tmpl_sprite_train(4, 60) }
spriteset(sset_ty2_tender_rev, "gfx/ty2.png") { tmpl_sprite_train(4, 120) }
spriteset(sset_ty2_rev_f1, "gfx/ty2.png") { tmpl_sprite_train10_offset(4, 160, 2) }
spriteset(sset_ty2_rev_f2, "gfx/ty2.png") { tmpl_sprite_train10_offset(4, 160, 2) }

alternative_sprites(sset_ty2_f1,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ty2-x2.png") { tmpl_sprite_train10_x2(8, 40) }
alternative_sprites(sset_ty2_f2,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ty2-x2.png") { tmpl_sprite_train10_x2(8, 120) }
alternative_sprites(sset_ty2_tender,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ty2-x2.png") { tmpl_sprite_train_x2(8, 200) }
alternative_sprites(sset_ty2_tender_rev,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ty2-x2.png") { tmpl_sprite_train_x2(8, 280) }
alternative_sprites(sset_ty2_rev_f1,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ty2-x2.png") { tmpl_sprite_train10_offset_x2(8, 360, 2) }
alternative_sprites(sset_ty2_rev_f2,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ty2-x2.png") { tmpl_sprite_train10_offset_x2(8, 440, 2) }



switch(FEAT_TRAINS, SELF, switch_ty2_articulated, extra_callback_info1) {
    1..2: return item_ty2;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_ty2_length, position_in_vehid_chain % 3) {
    1: return 1;
    return 7;
}
switch(FEAT_TRAINS, SELF, switch_ty2_graphics_normal_frames, motion_counter % 4) {
    0..1: return sset_ty2_f1;
    return sset_ty2_f2;
}
switch(FEAT_TRAINS, SELF, switch_ty2_graphics_normal, position_in_vehid_chain % 3) {
    0: return switch_ty2_graphics_normal_frames;
 2: return sset_ty2_tender;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_ty2_graphics_rev_frames, motion_counter % 4) {
    0..1: return sset_ty2_rev_f1;
    return sset_ty2_rev_f2;
}
switch(FEAT_TRAINS, SELF, switch_ty2_graphics_rev, position_in_vehid_chain % 3) {
 0: return sset_ty2_tender_rev;
    2: return switch_ty2_graphics_rev_frames;
    return sset_dummy;
}
switch(FEAT_TRAINS, PARENT, switch_ty2_graphics, vehicle_is_reversed) {
 1: return switch_ty2_graphics_rev;
    return switch_ty2_graphics_normal;
}
switch(FEAT_TRAINS, SELF, switch_ty2_visual_effect_normal, position_in_vehid_chain % 3) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_STEAM, -3, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, SELF, switch_ty2_visual_effect_rev, position_in_vehid_chain % 3) {
 2: return visual_effect_and_powered(VISUAL_EFFECT_STEAM, 2, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, PARENT, switch_ty2_visual_effect_local, vehicle_is_reversed) {
    1: return switch_ty2_visual_effect_rev;
    return switch_ty2_visual_effect_normal;
}
switch (FEAT_TRAINS, SELF, switch_ty2_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_STEAM_POWER_TEXT, 180), string(STR_ENGINE_FREIGHT));
 return string(STR_ENGINE_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_ty2_running_cost2, current_speed ) { 0: return 20; return 98; } switch (FEAT_TRAINS, PARENT, switch_ty2_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ty2_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_ty2_power2, position_in_consist > 0 ) { 1: return int(int(1201*1.3410)*0.67); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_ty2_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ty2_power2; }
switch(FEAT_TRAINS, PARENT, switch_ty2_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_ty2_visual_effect_local; }


item(FEAT_TRAINS, item_ty2) {
    property {

        name: string(STR_TY2_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1942, 1, 1);
        vehicle_life: 35;
        reliability_decay: 10;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 20;
        running_cost_factor: 98;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 80 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 1201 kW;
        running_cost_base: RUNNING_COST_STEAM;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 147 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_STEAM;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.114;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
 }
} else {
    property {
        model_life: 68;
  retire_early: 16;
 }
}

    graphics {
        purchase: sset_ty2_purchase;
        additional_text: switch_ty2_add_text;
        default: switch_ty2_graphics;
        articulated_part: switch_ty2_articulated;
        length: switch_ty2_length;
        visual_effect_and_powered: switch_ty2_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_ty2_running_cost;
        purchase_power: return CB_FAILED; power: switch_ty2_power;
    }
}
# 174 "src/pkp.pnml" 2
# 1 "src/engines/pt47.pnml" 1





spriteset(sset_pt47_purchase, "gfx/pt47.png") { tmpl_sprite_purchase(4, 100) }
spriteset(sset_pt47_f1, "gfx/pt47.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_pt47_f2, "gfx/pt47.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_pt47_tender, "gfx/pt47.png") { tmpl_sprite_train(4, 60) }

alternative_sprites(sset_pt47_f1,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/pt47-x2.png") { tmpl_sprite_train10_x2(8, 40) }
alternative_sprites(sset_pt47_f2,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/pt47-x2.png") { tmpl_sprite_train10_x2(8, 120) }
alternative_sprites(sset_pt47_tender,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/pt47-x2.png") { tmpl_sprite_train_x2(8, 200) }



switch(FEAT_TRAINS, SELF, switch_pt47_articulated, extra_callback_info1) {
    1: return item_pt47;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_pt47_graphics_frames, motion_counter % 4) {
    0..1: return sset_pt47_f1;
    return sset_pt47_f2;
}
switch(FEAT_TRAINS, SELF, switch_pt47_graphics, position_in_vehid_chain % 2) {
    0: return switch_pt47_graphics_frames;
    return sset_pt47_tender;
}
switch(FEAT_TRAINS, SELF, switch_pt47_length, position_in_vehid_chain % 2) {
    1: return 7;
    return 8;
}
switch (FEAT_TRAINS, SELF, switch_pt47_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_STEAM_POWER_TEXT, 225), string(STR_ENGINE_EXPRESS));
    return string(STR_ENGINE_EXPRESS);
}
switch (FEAT_TRAINS, PARENT, switch_pt47_running_cost2, current_speed ) { 0: return 24; return 126-1; } switch (FEAT_TRAINS, PARENT, switch_pt47_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_pt47_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_pt47_power2, position_in_consist > 0 ) { 1: return int(int(1471*1.3410)*0.67); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_pt47_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_pt47_power2; }


item(FEAT_TRAINS, item_pt47) {
    property {

        name: string(STR_PT47_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1947, 1, 1);
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 31;
        running_cost_factor: 126-1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 120 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 1471 kW;
        running_cost_base: RUNNING_COST_STEAM;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 175 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_STEAM;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.079;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 64;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_pt47_purchase;
        additional_text: switch_pt47_add_text;
        default: switch_pt47_graphics;
        articulated_part: switch_pt47_articulated;
        length: switch_pt47_length;
        visual_effect_and_powered: switch_normal_steam_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_pt47_running_cost;
        purchase_power: return CB_FAILED; power: switch_pt47_power;
    }
}
# 175 "src/pkp.pnml" 2
# 1 "src/engines/tkt48.pnml" 1





spriteset(sset_tkt48_purchase, "gfx/tkt48.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_tkt48, "gfx/tkt48.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_tkt48_rev, "gfx/tkt48.png") { tmpl_sprite_train(4, 80) }


switch(FEAT_TRAINS, PARENT, switch_tkt48_graphics, vehicle_is_reversed) {
 1: return sset_tkt48_rev;
    return sset_tkt48;
}
switch(FEAT_TRAINS, PARENT, switch_tkt48_visual_effect_local, vehicle_is_reversed) {
    1: return visual_effect_and_powered(VISUAL_EFFECT_STEAM, 3, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_STEAM, -3, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_tkt48_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_STEAM_POWER_TEXT, 180), string(STR_ENGINE_PASSENGER_FREIGHT));
 return string(STR_ENGINE_PASSENGER_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_tkt48_running_cost2, current_speed ) { 0: return 17-1; return 74-1; } switch (FEAT_TRAINS, PARENT, switch_tkt48_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_tkt48_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_tkt48_power2, position_in_consist > 0 ) { 1: return int(int(785*1.3410)*0.67); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_tkt48_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_tkt48_power2; }
switch(FEAT_TRAINS, PARENT, switch_tkt48_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_tkt48_visual_effect_local; }


item(FEAT_TRAINS, item_tkt48) {
    property {

        name: string(STR_TKT48_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1948, 1, 1);
        vehicle_life: 30;
        reliability_decay: 16;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 17;
        running_cost_factor: 74-1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 80 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 785 kW;
        running_cost_base: RUNNING_COST_STEAM;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 98 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_STEAM;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.161;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        extra_weight_per_wagon: 0 ton;
        bitmask_vehicle_info: 0;
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
 }
} else {
    property {
        model_life: 64;
  retire_early: 16;
 }
}

    graphics {
        purchase: sset_tkt48_purchase;
        additional_text: switch_tkt48_add_text;
        default: switch_tkt48_graphics;
        visual_effect_and_powered: switch_tkt48_visual_effect;
  can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_tkt48_running_cost;
        purchase_power: return CB_FAILED; power: switch_tkt48_power;
    }
}
# 176 "src/pkp.pnml" 2
# 1 "src/engines/ol49.pnml" 1





spriteset(sset_ol49_purchase, "gfx/ol49.png") { tmpl_sprite_purchase(4, 100) }
spriteset(sset_ol49_f1, "gfx/ol49.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_ol49_f2, "gfx/ol49.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_ol49_tender, "gfx/ol49.png") { tmpl_sprite_train(4, 60) }

alternative_sprites(sset_ol49_f1,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ol49-x2.png") { tmpl_sprite_train_x2(8, 40) }
alternative_sprites(sset_ol49_f2,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ol49-x2.png") { tmpl_sprite_train_x2(8, 120) }
alternative_sprites(sset_ol49_tender,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ol49-x2.png") { tmpl_sprite_train_x2(8, 200) }



switch(FEAT_TRAINS, SELF, switch_ol49_articulated, extra_callback_info1) {
    1: return item_ol49;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_ol49_graphics_frames, motion_counter % 4) {
    0..1: return sset_ol49_f1;
    return sset_ol49_f2;
}
switch(FEAT_TRAINS, SELF, switch_ol49_graphics, position_in_vehid_chain % 2) {
    0: return switch_ol49_graphics_frames;
    return sset_ol49_tender;
}
switch(FEAT_TRAINS, SELF, switch_ol49_length, position_in_vehid_chain % 2) {
    1: return 5;
    return 8;
}
switch (FEAT_TRAINS, SELF, switch_ol49_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_STEAM_POWER_TEXT, 225), string(STR_ENGINE_PASSENGER));
    return string(STR_ENGINE_PASSENGER);
}
switch (FEAT_TRAINS, PARENT, switch_ol49_running_cost2, current_speed ) { 0: return 18; return 87; } switch (FEAT_TRAINS, PARENT, switch_ol49_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ol49_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_ol49_power2, position_in_consist > 0 ) { 1: return int(int(950*1.3410)*0.67); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_ol49_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ol49_power2; }


item(FEAT_TRAINS, item_ol49) {
    property {

        name: string(STR_OL49_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1949, 1, 1);
        vehicle_life: 30;
        reliability_decay: 18;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 23;
        running_cost_factor: 87;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 950 kW;
        running_cost_base: RUNNING_COST_STEAM;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 145 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_STEAM;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.086;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 64;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_ol49_purchase;
        additional_text: switch_ol49_add_text;
        default: switch_ol49_graphics;
        articulated_part: switch_ol49_articulated;
        length: switch_ol49_length;
        visual_effect_and_powered: switch_normal_steam_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_ol49_running_cost;
        purchase_power: return CB_FAILED; power: switch_ol49_power;
    }
}
# 177 "src/pkp.pnml" 2
# 1 "src/engines/ty51.pnml" 1





spriteset(sset_ty51_purchase, "gfx/ty51.png") { tmpl_sprite_purchase(4, 100) }
spriteset(sset_ty51_f1, "gfx/ty51.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_ty51_f2, "gfx/ty51.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_ty51_tender, "gfx/ty51.png") { tmpl_sprite_train(4, 60) }

alternative_sprites(sset_ty51_f1,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ty51-x2.png") { tmpl_sprite_train10_x2(8, 40) }
alternative_sprites(sset_ty51_f2,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ty51-x2.png") { tmpl_sprite_train10_x2(8, 120) }
alternative_sprites(sset_ty51_tender,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ty51-x2.png") { tmpl_sprite_train_x2(8, 200) }



switch(FEAT_TRAINS, SELF, switch_ty51_articulated, extra_callback_info1) {
    1: return item_ty51;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_ty51_graphics_frames, motion_counter % 4) {
    0..1: return sset_ty51_f1;
    return sset_ty51_f2;
}
switch(FEAT_TRAINS, SELF, switch_ty51_graphics, position_in_vehid_chain % 2) {
    0: return switch_ty51_graphics_frames;
    return sset_ty51_tender;
}
switch(FEAT_TRAINS, SELF, switch_ty51_length, position_in_vehid_chain % 2) {
    1: return 7;
    return 8;
}
switch (FEAT_TRAINS, SELF, switch_ty51_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_STEAM_POWER_TEXT, 180), string(STR_ENGINE_HEAVY_FREIGHT));
    return string(STR_ENGINE_HEAVY_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_ty51_running_cost2, current_speed ) { 0: return 21; return 122; } switch (FEAT_TRAINS, PARENT, switch_ty51_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ty51_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_ty51_power2, position_in_consist > 0 ) { 1: return int(int(1590*1.3410)*0.67); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_ty51_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ty51_power2; }


item(FEAT_TRAINS, item_ty51) {
    property {

        name: string(STR_TY51_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1951, 1, 1);
        vehicle_life: 30;
        reliability_decay: 16;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 22;
        running_cost_factor: 122;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 80 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 1590 kW;
        running_cost_base: RUNNING_COST_STEAM;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 189 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_STEAM;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.127;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 65;
        retire_early: 17;
    }
}

    graphics {
        purchase: sset_ty51_purchase;
        additional_text: switch_ty51_add_text;
        default: switch_ty51_graphics;
        articulated_part: switch_ty51_articulated;
        length: switch_ty51_length;
        visual_effect_and_powered: switch_normal_steam_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_ty51_running_cost;
        purchase_power: return CB_FAILED; power: switch_ty51_power;
    }
}
# 178 "src/pkp.pnml" 2


# 1 "src/engines/sm30.pnml" 1





spriteset(sset_sm30_purchase, "gfx/sm30.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_sm30, "gfx/sm30.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_sm30_rev, "gfx/sm30.png") { tmpl_sprite_train(4, 80) }
spriteset(sset_sm30_pkp_cargo, "gfx/sm30.png") { tmpl_sprite_train(4, 120) }
spriteset(sset_sm30_pkp_cargo_rev, "gfx/sm30.png") { tmpl_sprite_train(4, 160) }


switch (FEAT_TRAINS, SELF, switch_sm30_subtype_text2, cargo_subtype) {
    0: return string(STR_SUBTYPE_LIVERY_CARGO_DEP);
    1: return string(STR_SUBTYPE_LIVERY_CLASSIC);
    2: return string(STR_SUBTYPE_LIVERY_PKP_CARGO);
}
switch (FEAT_TRAINS, SELF, switch_sm30_subtype_text, current_year >= 1993) {
    1: return switch_sm30_subtype_text2;
    return CB_RESULT_NO_TEXT;
}
switch(FEAT_TRAINS, PARENT, switch_sm30_classic_graphics, vehicle_is_reversed) {
    1: return sset_sm30_rev;
    return sset_sm30;
}
switch(FEAT_TRAINS, PARENT, switch_sm30_pkp_cargo_graphics, vehicle_is_reversed) {
    1: return sset_sm30_pkp_cargo_rev;
    return sset_sm30_pkp_cargo;
}
switch(FEAT_TRAINS, SELF, switch_sm30_auto2_graphics, bitmask_consist_info & bitmask(0, 1, 2)) {
    bitmask(1): return switch_sm30_pkp_cargo_graphics;
    return switch_sm30_classic_graphics;
}
switch(FEAT_TRAINS, SELF, switch_sm30_auto_graphics, (build_year >= 2003) || (date_of_last_service >= date(2003, 1, 1))) {
    1: return switch_sm30_auto2_graphics;
    return switch_sm30_classic_graphics;
}
switch(FEAT_TRAINS, PARENT, switch_sm30_graphics, cargo_subtype % 3) {
    0: return switch_sm30_auto_graphics;

    2: return switch_sm30_pkp_cargo_graphics;
    return switch_sm30_classic_graphics;
}
switch(FEAT_TRAINS, PARENT, switch_sm30_visual_effect_local, 0) {
    return visual_effect_and_powered(VISUAL_EFFECT_STEAM, -1, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_sm30_add_text, climate == CLIMATE_ARCTIC) {
    1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_NONE_TEXT), string(STR_ENGINE_PASSENGER_FREIGHT));
    return string(STR_ENGINE_PASSENGER_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_sm30_running_cost2, current_speed ) { 0: return 8; return 40; } switch (FEAT_TRAINS, PARENT, switch_sm30_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_sm30_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_sm30_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_sm30_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_sm30_visual_effect_local; }


item(FEAT_TRAINS, item_sm30) {
    property {
        name: string(STR_SM30_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1957, 1, 1);
        vehicle_life: 35;
        reliability_decay: 10;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 9;
        running_cost_factor: 40;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 60 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 257 kW;
        running_cost_base: RUNNING_COST_DIESEL;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 36 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_DIESEL;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.208;
        air_drag_coefficient: 0.07;
        length: 6;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 72;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_sm30_purchase;
        additional_text: switch_sm30_add_text;
        default: switch_sm30_graphics;
        visual_effect_and_powered: switch_sm30_visual_effect;
        cargo_subtype_text: switch_sm30_subtype_text;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_sm30_running_cost;
        purchase_power: return CB_FAILED; power: switch_sm30_power;
    }
}
# 181 "src/pkp.pnml" 2
# 1 "src/engines/sm41.pnml" 1





spriteset(sset_sm41_purchase, "gfx/sm41.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_sm41, "gfx/sm41.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_sm41_rev, "gfx/sm41.png") { tmpl_sprite_train(4, 80) }


switch(FEAT_TRAINS, SELF, switch_sm41_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_NONE_TEXT), string(STR_ENGINE_PASSENGER_FREIGHT));
    return string(STR_ENGINE_PASSENGER_FREIGHT);
}
switch(FEAT_TRAINS, PARENT, switch_sm41_graphics, vehicle_is_reversed) {
    1: return sset_sm41_rev;
    return sset_sm41;
}
switch(FEAT_TRAINS, PARENT, switch_sm41_visual_effect_local, vehicle_is_reversed) {
    1: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, -1, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 0, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, PARENT, switch_sm41_running_cost2, current_speed ) { 0: return 10; return 52; } switch (FEAT_TRAINS, PARENT, switch_sm41_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_sm41_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_sm41_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_sm41_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_sm41_visual_effect_local; }


item(FEAT_TRAINS, item_sm41) {
    property {

        name: string(STR_SM41_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1958, 1, 1);
        vehicle_life: 30;
        reliability_decay: 25;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 15;
        running_cost_factor: 52;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 80 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 441 kW;
        running_cost_base: RUNNING_COST_DIESEL;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 59 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_DIESEL;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.314;
        air_drag_coefficient: 0.07;
        length: 7;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        extra_weight_per_wagon: 0 ton;
        bitmask_vehicle_info: 0;
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
 }
} else {
    property {
        model_life: 64;
  retire_early: 16;
 }
}

    graphics {
        purchase: sset_sm41_purchase;
        additional_text: switch_sm41_add_text;
        default: switch_sm41_graphics;
        visual_effect_and_powered: switch_sm41_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_sm41_running_cost;
        purchase_power: return CB_FAILED; power: switch_sm41_power;
    }
}
# 182 "src/pkp.pnml" 2
# 1 "src/engines/sm42.pnml" 1





spriteset(sset_sm42_purchase, "gfx/sm42.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_sm42, "gfx/sm42.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_sp42_purchase, "gfx/sm42.png") { tmpl_sprite_purchase(4, 120) }
spriteset(sset_sp42, "gfx/sm42.png") { tmpl_sprite_train(4, 80) }
spriteset(sset_su42_purchase, "gfx/sm42.png") { tmpl_sprite_purchase(4, 180) }
spriteset(sset_su42, "gfx/sm42.png") { tmpl_sprite_train(4, 140) }
spriteset(sset_sm42_pkp_cargo, "gfx/sm42.png") { tmpl_sprite_train(4, 200) }
spriteset(sset_sm42_pkp_ic, "gfx/sm42ic.png") { tmpl_sprite_train(4, 20) }



switch (FEAT_TRAINS, SELF, switch_sm42_subtype_text2, cargo_subtype) {
    0: return string(STR_SUBTYPE_LIVERY_CARGO_DEP);
    1: return string(STR_SUBTYPE_LIVERY_CLASSIC);
    2: return string(STR_SUBTYPE_LIVERY_PKP_CARGO);
    3: return string(STR_SUBTYPE_LIVERY_PKP_IC);
    return CB_RESULT_NO_TEXT;
}
switch (FEAT_TRAINS, SELF, switch_sm42_subtype_text, current_year >= 1993) {
    1: return switch_sm42_subtype_text2;
    return CB_RESULT_NO_TEXT;
}
switch(FEAT_TRAINS, SELF, switch_sm42_auto2_graphics, bitmask_consist_info & bitmask(0, 1, 2)) {
    bitmask(1): return sset_sm42_pkp_cargo;
    bitmask(0, 2): return sset_sm42_pkp_ic;
    return sset_sm42;
}
switch(FEAT_TRAINS, SELF, switch_sm42_auto_graphics, (build_year >= 2001) || (date_of_last_service >= date(2001, 1, 1))) {
    1: return switch_sm42_auto2_graphics;
    return sset_sm42;
}
switch(FEAT_TRAINS, SELF, switch_sm42_graphics, cargo_subtype % 4) {
    0: return switch_sm42_auto_graphics;

    2: return sset_sm42_pkp_cargo;
    3: return sset_sm42_pkp_ic;
    return sset_sm42;
}
switch(FEAT_TRAINS, PARENT, switch_sm42_visual_effect_local, 0) {
    return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 0, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, PARENT, switch_sp42_visual_effect_local, 0) {
    return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 0, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, PARENT, switch_su42_visual_effect_local, 0) {
    return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 0, DISABLE_WAGON_POWER);
}

switch (FEAT_TRAINS, SELF, switch_sm42_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_NONE_TEXT), string(STR_ENGINE_PASSENGER_FREIGHT));
    return string(STR_ENGINE_PASSENGER_FREIGHT);
}
switch (FEAT_TRAINS, SELF, switch_sp42_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_STEAM_POWER_TEXT, 180), string(STR_ENGINE_PASSENGER_FREIGHT));
    return string(STR_ENGINE_PASSENGER_FREIGHT);
}
switch (FEAT_TRAINS, SELF, switch_su42_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_ELECTRIC_POWER_TEXT, 200), string(STR_ENGINE_PASSENGER_FREIGHT));
    return string(STR_ENGINE_PASSENGER_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_sm42_running_cost2, current_speed ) { 0: return 12; return 62; } switch (FEAT_TRAINS, PARENT, switch_sm42_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_sm42_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_sm42_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_sm42_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_sm42_visual_effect_local; }
switch (FEAT_TRAINS, PARENT, switch_sp42_running_cost2, current_speed ) { 0: return 12 +1; return 62 +1; } switch (FEAT_TRAINS, PARENT, switch_sp42_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_sp42_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_sp42_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_sp42_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_sp42_visual_effect_local; }
switch (FEAT_TRAINS, PARENT, switch_su42_running_cost2, current_speed ) { 0: return 12 +1; return 62 +2; } switch (FEAT_TRAINS, PARENT, switch_su42_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_su42_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_su42_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_su42_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_su42_visual_effect_local; }


item(FEAT_TRAINS, item_sm42) {
    property {

        name: string(STR_SM42_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1965, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 18;
        running_cost_factor: 62;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 90 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 588 kW;
        running_cost_base: RUNNING_COST_DIESEL;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 70 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_DIESEL;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.300;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

    graphics {
        purchase: sset_sm42_purchase;
        additional_text: switch_sm42_add_text;
        default: switch_sm42_graphics;
        cargo_subtype_text: switch_sm42_subtype_text;
        visual_effect_and_powered: switch_sm42_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_sm42_running_cost;
        purchase_power: return CB_FAILED; power: switch_sm42_power;
    }
}

item(FEAT_TRAINS, item_sp42) {
    property {

        name: string(STR_SP42_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1967, 1, 1);
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 18 +1;
        running_cost_factor: 62 +1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 90 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 582 kW;
        running_cost_base: RUNNING_COST_DIESEL;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 70 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_DIESEL;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.300;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 55;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_sp42_purchase;
        additional_text: switch_sp42_add_text;
        default: sset_sp42;
        visual_effect_and_powered: switch_sp42_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_sp42_running_cost;
        purchase_power: return CB_FAILED; power: switch_sp42_power;
    }
}

item(FEAT_TRAINS, item_su42) {
    property {

        name: string(STR_SU42_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1999, 1, 1);
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 18 +1;
        running_cost_factor: 62 +2;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 90 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 590 kW;
        running_cost_base: RUNNING_COST_DIESEL;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 70 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_DIESEL;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.300;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 51;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_su42_purchase;
        additional_text: switch_su42_add_text;
        default: sset_su42;
        visual_effect_and_powered: switch_su42_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_su42_running_cost;
        purchase_power: return CB_FAILED; power: switch_su42_power;
    }
}
# 183 "src/pkp.pnml" 2
# 1 "src/engines/sm31.pnml" 1





spriteset(sset_sm31_purchase, "gfx/sm31.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_sm31, "gfx/sm31.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_sm31_rev, "gfx/sm31.png") { tmpl_sprite_train10(4, 80) }


switch(FEAT_TRAINS, SELF, switch_sm31_articulated, extra_callback_info1) {
    1: return item_sm31;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_sm31_length, position_in_vehid_chain % 2) {
    1: return 1;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_sm31_graphics_normal, position_in_vehid_chain % 2) {
    0: return sset_sm31;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_sm31_graphics_rev, position_in_vehid_chain % 2) {
    0: return sset_sm31_rev;
    return sset_dummy;
}
switch(FEAT_TRAINS, PARENT, switch_sm31_graphics, vehicle_is_reversed) {
    1: return switch_sm31_graphics_rev;
    return switch_sm31_graphics_normal;
}
switch(FEAT_TRAINS, SELF, switch_sm31_visual_effect_normal, position_in_vehid_chain % 2) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, -1, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, SELF, switch_sm31_visual_effect_rev, position_in_vehid_chain % 2) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 1, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, PARENT, switch_sm31_visual_effect_local, vehicle_is_reversed) {
    1: return switch_sm31_visual_effect_rev;
    return switch_sm31_visual_effect_normal;
}
switch(FEAT_TRAINS, SELF, switch_sm31_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_NONE_TEXT), string(STR_ENGINE_FREIGHT));
    return string(STR_ENGINE_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_sm31_running_cost2, current_speed ) { 0: return 13; return 80; } switch (FEAT_TRAINS, PARENT, switch_sm31_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_sm31_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_sm31_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_sm31_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_sm31_visual_effect_local; }


item(FEAT_TRAINS, item_sm31) {
    property {

        name: string(STR_SM31_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1976, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 17;
        running_cost_factor: 80;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 80 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 895 kW;
        running_cost_base: RUNNING_COST_DIESEL;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 116 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_DIESEL;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.306;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        extra_weight_per_wagon: 0 ton;
        bitmask_vehicle_info: 0;
    }

    graphics {
        purchase: sset_sm31_purchase;
        additional_text: switch_sm31_add_text;
        default: switch_sm31_graphics;
        articulated_part: switch_sm31_articulated;
        length: switch_sm31_length;
        visual_effect_and_powered: switch_sm31_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_sm31_running_cost;
        purchase_power: return CB_FAILED; power: switch_sm31_power;
    }
}
# 184 "src/pkp.pnml" 2
# 1 "src/engines/st43.pnml" 1





spriteset(sset_st43_purchase, "gfx/st43.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_st43, "gfx/st43.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_st43_purchase_yellow, "gfx/st43.png") { tmpl_sprite_purchase(4, 120) }
spriteset(sset_st43_yellow, "gfx/st43.png") { tmpl_sprite_train10(4, 80) }



switch(FEAT_TRAINS, SELF, switch_st43_purchase, build_year >= 1989) {
    1: return sset_st43_purchase_yellow;
    return sset_st43_purchase;
}
switch(FEAT_TRAINS, SELF, switch_st43_articulated, extra_callback_info1) {
    1: return item_st43;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_st43_length, position_in_vehid_chain % 2) {
    1: return 2;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_st43_graphics, (position_in_vehid_chain % 2)*2 + (build_year >= 1989)) {
    0: return sset_st43;
    1: return sset_st43_yellow;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_st43_visual_effect_local, position_in_vehid_chain % 2) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, -1, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_st43_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_NONE_TEXT), string(STR_ENGINE_FREIGHT));
 return string(STR_ENGINE_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_st43_running_cost2, current_speed ) { 0: return 16; return 121; } switch (FEAT_TRAINS, PARENT, switch_st43_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_st43_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_st43_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_st43_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_st43_visual_effect_local; }


item(FEAT_TRAINS, item_st43) {
    property {

        name: string(STR_ST43_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1965, 1, 1);
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 26;
        running_cost_factor: 121;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 1544 kW;
        running_cost_base: RUNNING_COST_DIESEL;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 118 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_DIESEL;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.276;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 66;
        retire_early: 16;
    }
}

    graphics {
        purchase: switch_st43_purchase;
        additional_text: switch_st43_add_text;
        default: switch_st43_graphics;
        articulated_part: switch_st43_articulated;
        length: switch_st43_length;
        visual_effect_and_powered: switch_st43_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_st43_running_cost;
        purchase_power: return CB_FAILED; power: switch_st43_power;
    }
}
# 185 "src/pkp.pnml" 2
# 1 "src/engines/st44.pnml" 1





spriteset(sset_st44_purchase, "gfx/st44.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_st44_purchase_yellow, "gfx/st44.png") { tmpl_sprite_purchase(4, 120) }
spriteset(sset_st44, "gfx/st44.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_st44_yellow, "gfx/st44.png") { tmpl_sprite_train10(4, 80) }
spriteset(sset_st44_pkp_cargo, "gfx/st44.png") { tmpl_sprite_train10(4, 140) }




switch (FEAT_TRAINS, SELF, switch_st44_subtype_text2, cargo_subtype) {
    0: return string(STR_SUBTYPE_LIVERY_CARGO_DEP);
    1: return string(STR_SUBTYPE_LIVERY_CLASSIC);
    2: return string(STR_SUBTYPE_LIVERY_PKP_CARGO);
    return CB_RESULT_NO_TEXT;
}
switch (FEAT_TRAINS, SELF, switch_st44_subtype_text, current_year >= 1993) {
    1: return switch_st44_subtype_text2;
    return CB_RESULT_NO_TEXT;
}
switch(FEAT_TRAINS, SELF, switch_st44_purchase, build_year >= 1989) {
    1: return sset_st44_purchase_yellow;
    return sset_st44_purchase;
}
switch(FEAT_TRAINS, SELF, switch_st44_articulated, extra_callback_info1) {
    1: return item_st44;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_st44_length, position_in_vehid_chain % 2) {
    1: return 2;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_st44_classic_graphics, build_year >= 1989) {
    1: return sset_st44_yellow;
    return sset_st44;
}
switch(FEAT_TRAINS, SELF, switch_st44_cargo2_graphics, bitmask_consist_info & bitmask(0, 1, 2)) {
    bitmask(1): return sset_st44_pkp_cargo;
    return switch_st44_classic_graphics;
}
switch(FEAT_TRAINS, SELF, switch_st44_cargo_graphics, (build_year >= 2001) || (date_of_last_service >= date(2001, 1, 1))) {
    1: return switch_st44_cargo2_graphics;
    return switch_st44_classic_graphics;
}
switch(FEAT_TRAINS, SELF, switch_st44_livery_graphics, cargo_subtype % 3) {
    0: return switch_st44_cargo_graphics;

    2: return sset_st44_pkp_cargo;
    return switch_st44_classic_graphics;
}
switch(FEAT_TRAINS, SELF, switch_st44_graphics, position_in_vehid_chain % 2) {
    0: return switch_st44_livery_graphics;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_st44_visual_effect_local, position_in_vehid_chain % 2) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 1, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_st44_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_NONE_TEXT), string(STR_ENGINE_HEAVY_FREIGHT));
 return string(STR_ENGINE_HEAVY_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_st44_running_cost2, current_speed ) { 0: return 16; return 116; } switch (FEAT_TRAINS, PARENT, switch_st44_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_st44_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_st44_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_st44_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_st44_visual_effect_local; }


item(FEAT_TRAINS, item_st44) {
    property {

        name: string(STR_ST44_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1966, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 33;
        reliability_decay: 10;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 25;
        running_cost_factor: 116;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 1472 kW;
        running_cost_base: RUNNING_COST_DIESEL;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 116 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_DIESEL;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.309;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

    graphics {
        purchase: switch_st44_purchase;
        additional_text: switch_st44_add_text;
        default: switch_st44_graphics;
        cargo_subtype_text: switch_st44_subtype_text;
        articulated_part: switch_st44_articulated;
        length: switch_st44_length;
        visual_effect_and_powered: switch_st44_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_st44_running_cost;
        purchase_power: return CB_FAILED; power: switch_st44_power;
    }
}
# 186 "src/pkp.pnml" 2
# 1 "src/engines/sp45.pnml" 1





spriteset(sset_sp45_purchase, "gfx/sp45.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_sp45, "gfx/sp45.png") { tmpl_sprite_train10(4, 20) }


switch(FEAT_TRAINS, SELF, switch_sp45_articulated, extra_callback_info1) {
    1: return item_sp45;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_sp45_length, position_in_vehid_chain % 2) {
    1: return 2;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_sp45_graphics, position_in_vehid_chain % 2) {
    0: return sset_sp45;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_sp45_visual_effect_local, position_in_vehid_chain % 2) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 1, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, SELF, switch_sp45_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_STEAM_POWER_TEXT, 225), string(STR_ENGINE_PASSENGER_FREIGHT));
    return string(STR_ENGINE_PASSENGER_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_sp45_running_cost2, current_speed ) { 0: return 20-1; return 114; } switch (FEAT_TRAINS, PARENT, switch_sp45_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_sp45_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_sp45_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_sp45_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_sp45_visual_effect_local; }


item(FEAT_TRAINS, item_sp45) {
    property {

        name: string(STR_SP45_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1970, 1, 1);
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 29;
        running_cost_factor: 114 +1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 120 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 1250 kW;
        running_cost_base: RUNNING_COST_DIESEL;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 102 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_DIESEL;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.302;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 49;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_sp45_purchase;
        additional_text: switch_sp45_add_text;
        default: switch_sp45_graphics;
        articulated_part: switch_sp45_articulated;
        length: switch_sp45_length;
        visual_effect_and_powered: switch_sp45_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_sp45_running_cost;
        purchase_power: return CB_FAILED; power: switch_sp45_power;
    }
}
# 187 "src/pkp.pnml" 2
# 1 "src/engines/su45.pnml" 1





spriteset(sset_su45_purchase, "gfx/su45.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_su45, "gfx/su45.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_su45_pkp_cargo, "gfx/su45.png") { tmpl_sprite_train10(4, 80) }


switch (FEAT_TRAINS, SELF, switch_su45_subtype_text2, cargo_subtype) {
    0: return string(STR_SUBTYPE_LIVERY_CARGO_DEP);
    1: return string(STR_SUBTYPE_LIVERY_CLASSIC);
    2: return string(STR_SUBTYPE_LIVERY_PKP_CARGO);
    return CB_RESULT_NO_TEXT;
}
switch (FEAT_TRAINS, SELF, switch_su45_subtype_text, current_year >= 1993) {
    1: return switch_su45_subtype_text2;
    return CB_RESULT_NO_TEXT;
}
switch(FEAT_TRAINS, SELF, switch_su45_articulated, extra_callback_info1) {
    1: return item_su45;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_su45_length, position_in_vehid_chain % 2) {
    1: return 2;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_su45_auto2_graphics, bitmask_consist_info & bitmask(0, 1, 2)) {
    bitmask(1): return sset_su45_pkp_cargo;
    return sset_su45;
}
switch(FEAT_TRAINS, SELF, switch_su45_auto_graphics, (build_year >= 2003) || (date_of_last_service >= date(2003, 1, 1))) {
    1: return switch_su45_auto2_graphics;
    return sset_su45;
}
switch(FEAT_TRAINS, SELF, switch_su45_livery_graphics, cargo_subtype % 3) {
    0: return switch_su45_auto_graphics;

    2: return sset_su45_pkp_cargo;
    return sset_su45;
}
switch(FEAT_TRAINS, SELF, switch_su45_graphics, position_in_vehid_chain % 2) {
    0: return switch_su45_livery_graphics;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_su45_visual_effect_local, position_in_vehid_chain % 2) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 1, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_su45_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_ELECTRIC_POWER_TEXT, 290), string(STR_ENGINE_PASSENGER_FREIGHT));
 return string(STR_ENGINE_PASSENGER_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_su45_running_cost2, current_speed ) { 0: return 20-1 +1; return 114 +1; } switch (FEAT_TRAINS, PARENT, switch_su45_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_su45_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_su45_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_su45_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_su45_visual_effect_local; }


item(FEAT_TRAINS, item_su45) {
    property {

        name: string(STR_SU45_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1988, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 29;
        running_cost_factor: 114 +1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 120 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 1250 kW;
        running_cost_base: RUNNING_COST_DIESEL;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 102 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_DIESEL;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.302;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

    graphics {
        purchase: sset_su45_purchase;
        additional_text: switch_su45_add_text;
        default: switch_su45_graphics;
        cargo_subtype_text: switch_su45_subtype_text;
        articulated_part: switch_su45_articulated;
        length: switch_su45_length;
        visual_effect_and_powered: switch_su45_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_su45_running_cost;
        purchase_power: return CB_FAILED; power: switch_su45_power;
    }
}
# 188 "src/pkp.pnml" 2
# 1 "src/engines/su46.pnml" 1





spriteset(sset_su46_purchase, "gfx/su46.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_su46, "gfx/su46.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_su46_pkp_cargo, "gfx/su46.png") { tmpl_sprite_train10(4, 80) }


switch (FEAT_TRAINS, SELF, switch_su46_subtype_text2, cargo_subtype) {
    0: return string(STR_SUBTYPE_LIVERY_CARGO_DEP);
    1: return string(STR_SUBTYPE_LIVERY_CLASSIC);
    2: return string(STR_SUBTYPE_LIVERY_PKP_CARGO);
    return CB_RESULT_NO_TEXT;
}
switch (FEAT_TRAINS, SELF, switch_su46_subtype_text, current_year >= 1993) {
    1: return switch_su46_subtype_text2;
    return CB_RESULT_NO_TEXT;
}
switch(FEAT_TRAINS, SELF, switch_su46_articulated, extra_callback_info1) {
    1: return item_su46;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_su46_length, position_in_vehid_chain % 2) {
    1: return 2;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_su46_auto2_graphics, bitmask_consist_info & bitmask(0, 1, 2)) {
    bitmask(1): return sset_su46_pkp_cargo;
    return sset_su46;
}
switch(FEAT_TRAINS, SELF, switch_su46_auto_graphics, (build_year >= 2003) || (date_of_last_service >= date(2003, 1, 1))) {
    1: return switch_su46_auto2_graphics;
    return sset_su46;
}
switch(FEAT_TRAINS, SELF, switch_su46_livery_graphics, cargo_subtype % 3) {
    0: return switch_su46_auto_graphics;

    2: return sset_su46_pkp_cargo;
    return sset_su46;
}
switch(FEAT_TRAINS, SELF, switch_su46_graphics, position_in_vehid_chain % 2) {
    0: return switch_su46_livery_graphics;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_su46_visual_effect_local, position_in_vehid_chain % 2) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 1, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_su46_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_ELECTRIC_POWER_TEXT, 450), string(STR_ENGINE_PASSENGER_FREIGHT));
 return string(STR_ENGINE_PASSENGER_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_su46_running_cost2, current_speed ) { 0: return 20; return 138; } switch (FEAT_TRAINS, PARENT, switch_su46_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_su46_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_su46_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_su46_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_su46_visual_effect_local; }


item(FEAT_TRAINS, item_su46) {
    property {

        name: string(STR_SU46_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1974, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 32;
        running_cost_factor: 138;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 120 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 1655 kW;
        running_cost_base: RUNNING_COST_DIESEL;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 105 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_DIESEL;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.307;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

    graphics {
        purchase: sset_su46_purchase;
        additional_text: switch_su46_add_text;
        default: switch_su46_graphics;
        cargo_subtype_text: switch_su46_subtype_text;
        articulated_part: switch_su46_articulated;
        length: switch_su46_length;
        visual_effect_and_powered: switch_su46_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_su46_running_cost;
        purchase_power: return CB_FAILED; power: switch_su46_power;
    }
}
# 189 "src/pkp.pnml" 2
# 1 "src/engines/sp32.pnml" 1





spriteset(sset_sp32_purchase, "gfx/sp32.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_sp32, "gfx/sp32.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_sp32_rev, "gfx/sp32.png") { tmpl_sprite_train10(4, 80) }


switch(FEAT_TRAINS, SELF, switch_sp32_articulated, extra_callback_info1) {
    1: return item_sp32;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_sp32_length, position_in_vehid_chain % 2) {
    1: return 1;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_sp32_graphics_normal, position_in_vehid_chain % 2) {
    0: return sset_sp32;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_sp32_graphics_rev, position_in_vehid_chain % 2) {
    0: return sset_sp32_rev;
    return sset_dummy;
}
switch(FEAT_TRAINS, PARENT, switch_sp32_graphics, vehicle_is_reversed) {
    1: return switch_sp32_graphics_rev;
    return switch_sp32_graphics_normal;
}
switch(FEAT_TRAINS, SELF, switch_sp32_visual_effect_normal, position_in_vehid_chain % 2) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 2, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, SELF, switch_sp32_visual_effect_rev, position_in_vehid_chain % 2) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, -1, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, PARENT, switch_sp32_visual_effect_local, vehicle_is_reversed) {
    1: return switch_sp32_visual_effect_rev;
    return switch_sp32_visual_effect_normal;
}
switch(FEAT_TRAINS, SELF, switch_sp32_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_ELECTRIC_POWER_TEXT, 290), string(STR_ENGINE_PASSENGER));
    return string(STR_ENGINE_PASSENGER);
}
switch (FEAT_TRAINS, PARENT, switch_sp32_running_cost2, current_speed ) { 0: return 15; return 90; } switch (FEAT_TRAINS, PARENT, switch_sp32_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_sp32_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_sp32_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_sp32_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_sp32_visual_effect_local; }


item(FEAT_TRAINS, item_sp32) {
    property {

        name: string(STR_SP32_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1985, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 25;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 23;
        running_cost_factor: 90;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 1015 kW;
        running_cost_base: RUNNING_COST_DIESEL;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 74 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_DIESEL;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.187;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        extra_weight_per_wagon: 0 ton;
        bitmask_vehicle_info: 0;
    }

    graphics {
        purchase: sset_sp32_purchase;
        additional_text: switch_sp32_add_text;
        default: switch_sp32_graphics;
        articulated_part: switch_sp32_articulated;
        length: switch_sp32_length;
        visual_effect_and_powered: switch_sp32_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_sp32_running_cost;
        purchase_power: return CB_FAILED; power: switch_sp32_power;
    }
}
# 190 "src/pkp.pnml" 2
# 1 "src/engines/br285.pnml" 1





spriteset(sset_br285_purchase, "gfx/br285.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_br285, "gfx/br285.png") { tmpl_sprite_train10(4, 20) }


switch(FEAT_TRAINS, SELF, switch_br285_articulated, extra_callback_info1) {
    1: return item_br285;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_br285_length, position_in_vehid_chain % 2) {
    1: return 2;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_br285_graphics, position_in_vehid_chain % 2) {
    0: return sset_br285;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_br285_visual_effect_local, position_in_vehid_chain % 2) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 2, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_br285_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_NONE_TEXT), string(STR_ENGINE_FREIGHT));
 return string(STR_ENGINE_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_br285_running_cost2, current_speed ) { 0: return 21; return 175; } switch (FEAT_TRAINS, PARENT, switch_br285_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_br285_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_br285_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_br285_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_br285_visual_effect_local; }


item(FEAT_TRAINS, item_br285) {
    property {

        name: string(STR_BR285_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(2011, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 40;
        running_cost_factor: 175;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 140 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 2400 kW;
        running_cost_base: RUNNING_COST_DIESEL;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 82 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_DIESEL;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.375;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

    graphics {
        purchase: sset_br285_purchase;
        additional_text: switch_br285_add_text;
        default: switch_br285_graphics;
        articulated_part: switch_br285_articulated;
        length: switch_br285_length;
        visual_effect_and_powered: switch_br285_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_br285_running_cost;
        purchase_power: return CB_FAILED; power: switch_br285_power;
    }
}
# 191 "src/pkp.pnml" 2
# 1 "src/engines/6dl.pnml" 1





spriteset(sset_6dl_purchase, "gfx/6dl.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_6dl, "gfx/6dl.png") { tmpl_sprite_train(4, 20) }


switch(FEAT_TRAINS, PARENT, switch_6dl_visual_effect_local, 0) {
    return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 0, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, SELF, switch_6dl_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_ELECTRIC_POWER_TEXT, 290), string(STR_ENGINE_PASSENGER_FREIGHT));
    return string(STR_ENGINE_PASSENGER_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_6dl_running_cost2, current_speed ) { 0: return 12; return 70; } switch (FEAT_TRAINS, PARENT, switch_6dl_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_6dl_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_6dl_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_6dl_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_6dl_visual_effect_local; }


item(FEAT_TRAINS, item_6dl) {
    property {

        name: string(STR_6DL_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(2014, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 25;
        reliability_decay: 15;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 19;
        running_cost_factor: 70;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 90 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 692 kW;
        running_cost_base: RUNNING_COST_DIESEL;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 72 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_DIESEL;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.31;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

    graphics {
        purchase: sset_6dl_purchase;
        additional_text: switch_6dl_add_text;
        default: sset_6dl;
        visual_effect_and_powered: switch_6dl_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_6dl_running_cost;
        purchase_power: return CB_FAILED; power: switch_6dl_power;
    }
}
# 192 "src/pkp.pnml" 2
# 1 "src/engines/su160.pnml" 1





spriteset(sset_su160_purchase, "gfx/su160-gama.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_su160, "gfx/su160-gama.png") { tmpl_sprite_train10(4, 20) }


switch(FEAT_TRAINS, SELF, switch_su160_articulated, extra_callback_info1) {
    1: return item_su160;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_su160_length, position_in_vehid_chain % 2) {
    1: return 2;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_su160_graphics, position_in_vehid_chain % 2) {
    0: return sset_su160;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_su160_visual_effect_local, position_in_vehid_chain % 2) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 1, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_su160_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_ELECTRIC_POWER_TEXT, 450), string(STR_ENGINE_PASSENGER_FREIGHT));
 return string(STR_ENGINE_PASSENGER_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_su160_running_cost2, current_speed ) { 0: return 32; return 194; } switch (FEAT_TRAINS, PARENT, switch_su160_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_su160_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_su160_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_su160_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_su160_visual_effect_local; }

switch(FEAT_TRAINS, SELF, switch_su160_can_attach, vehicle_type_id) {
    item_twindexx: return string(STR_ATTACH_DISALLOW, string(STR_SU160_NAME));
    item_twindexxcc: return string(STR_ATTACH_DISALLOW, string(STR_SU160_NAME));
    return switch_normal_can_attach;
}


item(FEAT_TRAINS, item_su160) {
    property {

        name: string(STR_SU160_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(2015, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 30;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 45;
        running_cost_factor: 194;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 160 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 2280 kW;
        running_cost_base: RUNNING_COST_DIESEL;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 84 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_DIESEL;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.334;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

    graphics {
        purchase: sset_su160_purchase;
        additional_text: switch_su160_add_text;
        default: switch_su160_graphics;
        articulated_part: switch_su160_articulated;
        length: switch_su160_length;
        visual_effect_and_powered: switch_su160_visual_effect;
        can_attach_wagon: switch_su160_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_su160_running_cost;
        purchase_power: return CB_FAILED; power: switch_su160_power;
    }
}
# 193 "src/pkp.pnml" 2
# 1 "src/wagons/bh-common.pnml" 1
# 11 "src/wagons/bh-common.pnml"
switch(FEAT_TRAINS, SELF, switch_bh_mail_dummy_3_capacity, cargo_classes) {
    bitmask(CC_MAIL): return int(6*2);
    return 24;
}
switch(FEAT_TRAINS, SELF, switch_bh_mail_dummy_3_cargo_age, cargo_classes) {
    bitmask(CC_PASSENGERS): return int(185*0.84);
    return 185;
}


item(FEAT_TRAINS, item_bh_mail_dummy_3) {
    property {

        climates_available: NO_CLIMATE;
        introduction_date: date(1918, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;

        refittable_cargo_classes: bitmask(CC_PASSENGERS, CC_MAIL);
        non_refittable_cargo_classes: bitmask();
        default_cargo_type: PASS;
        loading_speed: 4;
        cost_factor: 0;
        running_cost_factor: 0;
        cargo_age_period: int(185*0.84);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        cargo_capacity: 24;
        weight: 0;
        length: 3;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }
    graphics {
        default: sset_dummy;
        purchase_cargo_capacity: return 24;
        cargo_capacity: switch_bh_mail_dummy_3_capacity;
        cargo_age_period: switch_bh_mail_dummy_3_cargo_age;
    }
}
# 194 "src/pkp.pnml" 2
# 1 "src/wagons/bh-ryflak.pnml" 1





spriteset(sset_bh_ryf_purchase, "gfx/43a.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_bh_ryf, "gfx/43a.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_bh_ryf_open, "gfx/43a.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_bh_ryf_cut, "gfx/43a.png") { tmpl_sprite_train12(4, 120) }

alternative_sprites(sset_bh_ryf,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/43a-x2.png") { tmpl_sprite_train12_x2(8, 40) }
alternative_sprites(sset_bh_ryf_open,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/43a-x2.png") { tmpl_sprite_train12_x2(8, 120) }
alternative_sprites(sset_bh_ryf_cut,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/43a-x2.png") { tmpl_sprite_train12_x2(8, 200) }

spritegroup sgroup_bh_ryf {
    loaded: [sset_bh_ryf];
    loading: [sset_bh_ryf_open];
}
# 33 "src/wagons/bh-ryflak.pnml"
switch(FEAT_TRAINS, SELF, switch_bh_ryf_articulated, extra_callback_info1) {
    1: return item_bh_mail_dummy_3;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_bh_ryf_classic, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_bh_ryf_cut;
    return sgroup_bh_ryf;
}
switch(FEAT_TRAINS, SELF, switch_bh_ryf_capacity, cargo_type_in_veh) {
    TOUR: return 76-24;
    return 76-24 +8;
}
switch (FEAT_TRAINS, SELF, switch_bh_ryf_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_4L, string(STR_BRAKE_AIR), string(STR_HEATING_ST_EL_TEXT), string(STR_BH_RYF_TEXT), string(STR_INCOME_LOWER));
    return string(STR_PURCHASE_DESCR_3L, string(STR_BRAKE_AIR), string(STR_BH_RYF_TEXT), string(STR_INCOME_LOWER));
}


item(FEAT_TRAINS, item_bh_ryf) {
    property {

        name: string(STR_BH_RYF_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1958, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 10;
        cost_factor: (62-3);
        running_cost_factor: 5;
        cargo_age_period: int(185*0.84);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 120 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 76-24 +8;
        weight: 39 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 67;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_bh_ryf_purchase;
        additional_text: switch_bh_ryf_add_text;
        default: switch_bh_ryf_classic;
        articulated_part: switch_bh_ryf_articulated;
        purchase_cargo_capacity: return 76-24 +8;
        cargo_capacity: switch_bh_ryf_capacity;
        colour_mapping: switch_lights_wagon_olive_2;
    }
}
# 195 "src/pkp.pnml" 2
# 1 "src/engines/sn61.pnml" 1





spriteset(sset_sn61_purchase, "gfx/sn61.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_sn61, "gfx/sn61.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_sn61_open, "gfx/sn61.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_bh_ryf_green, "gfx/sn61.png") { tmpl_sprite_train12(4, 120) }
spriteset(sset_bh_ryf_green_open, "gfx/sn61.png") { tmpl_sprite_train12(4, 160) }
spriteset(sset_sn61_cut, "gfx/sn61.png") { tmpl_sprite_train12(4, 200) }
spriteset(sset_bh_ryf_green_cut, "gfx/sn61.png") { tmpl_sprite_train12(4, 240) }
spritegroup sgroup_sn61 {
    loaded: [sset_sn61];
    loading: [sset_sn61_open];
}
spritegroup sgroup_bh_ryf_green {
    loaded: [sset_bh_ryf_green];
    loading: [sset_bh_ryf_green_open];
}
# 32 "src/engines/sn61.pnml"
switch(FEAT_TRAINS, SELF, switch_sn61_articulated, extra_callback_info1) {
    1: return item_dummy_3;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_sn61_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_sn61_cut;
    return sgroup_sn61;
}
switch(FEAT_TRAINS, SELF, switch_sn61_capacity, cargo_type_in_veh) {
    TOUR: return 53;
    return 53 +10;
}
switch(FEAT_TRAINS, PARENT, switch_sn61_visual_effect_local, 0) {
    return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, -2, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_sn61_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_STEAM_CLAYTON_TEXT), string(STR_SN61_TEXT));
    return string(STR_SN61_TEXT);
}
switch(FEAT_TRAINS, SELF, switch_sn61_can_attach, vehicle_type_id) {
    item_sn61: return CB_RESULT_ATTACH_ALLOW;
    item_bh_ryf: return CB_RESULT_ATTACH_ALLOW;
    return string(STR_ATTACH_DISALLOW, string(STR_SN61_NAME));
}
switch(FEAT_TRAINS, SELF, switch_sn61_start_stop, (count_veh_id(item_sn61) > 3) || (count_veh_id(item_bh_ryf) > 3) ) {
    1: return string(STR_TRAIN_TOO_LONG, string(STR_SN61_NAME));
    return CB_RESULT_NO_TEXT;
}
switch (FEAT_TRAINS, PARENT, switch_sn61_running_cost2, current_speed ) { 0: return 15-1; return 50-1; } switch (FEAT_TRAINS, PARENT, switch_sn61_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_sn61_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_sn61_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_sn61_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_sn61_visual_effect_local; }


switch(FEAT_TRAINS, SELF, switch_bh_ryf_green, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_bh_ryf_green_cut;
    return sgroup_bh_ryf_green;
}
random_switch(FEAT_TRAINS, SELF, switch_bh_ryf_graphics) {
    3: return switch_bh_ryf_classic;
    5: return switch_bh_ryf_green;
}


item(FEAT_TRAINS, item_sn61) {
    property {

        name: string(STR_SN61_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1960, 1, 1);
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 11;
        cost_factor: 20;
        running_cost_factor: 50-1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 108 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 368 kW;
        running_cost_base: RUNNING_COST_DIESEL;
        dual_headed: 0;
        cargo_capacity: 53 +10;
        weight: 58 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_DIESEL;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.088;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 51;
        retire_early: 12;
    }
}

    graphics {
        purchase: sset_sn61_purchase;
        additional_text: switch_sn61_add_text;
        default: switch_sn61_graphics;
        articulated_part: switch_sn61_articulated;
        visual_effect_and_powered: switch_sn61_visual_effect;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_sn61_capacity;
        colour_mapping: switch_lights_engine_2;
        can_attach_wagon: switch_sn61_can_attach;
        start_stop: switch_sn61_start_stop;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_sn61_running_cost;
        purchase_power: return CB_FAILED; power: switch_sn61_power;
    }

    livery_override (item_bh_ryf) {
        default: switch_bh_ryf_graphics;
        articulated_part: switch_bh_ryf_articulated;
        cargo_capacity: switch_bh_ryf_capacity;
        colour_mapping: switch_lights_wagon_olive_2;
    }
}
# 196 "src/pkp.pnml" 2
# 1 "src/engines/sn81.pnml" 1





spriteset(sset_sn81_purchase, "gfx/sn81.png") { tmpl_sprite_purchase(4, 180) }
spriteset(sset_sn81_head, "gfx/sn81.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_sn81_head_open, "gfx/sn81.png") { tmpl_sprite_train(4, 100) }
spriteset(sset_sn81_tail, "gfx/sn81.png") { tmpl_sprite_train(4, 60) }
spriteset(sset_sn81_tail_open, "gfx/sn81.png") { tmpl_sprite_train(4, 140) }
spritegroup sgroup_sn81_head {
    loaded: [sset_sn81_head];
    loading: [sset_sn81_head_open];
}
spritegroup sgroup_sn81_tail {
    loaded: [sset_sn81_tail];
    loading: [sset_sn81_tail_open];
}
# 29 "src/engines/sn81.pnml"
switch(FEAT_TRAINS, SELF, switch_sn81_articulated, extra_callback_info1) {
    1: return item_sn81;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_sn81_graphics, position_in_vehid_chain % 2) {
    0: return sgroup_sn81_head;
    return sgroup_sn81_tail;
}




switch(FEAT_TRAINS, SELF, switch_sn81_capacity, cargo_type_in_veh) {
    TOUR: return 27;
    return 27 +7;
}
switch(FEAT_TRAINS, PARENT, switch_sn81_visual_effect_local, 0) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, -1, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, SELF, switch_sn81_can_attach, vehicle_type_id) {
    return string(STR_ATTACH_DISALLOW, string(STR_SN81_NAME));
}

switch (FEAT_TRAINS, PARENT, switch_sn81_running_cost2, current_speed ) { 0: return 10; return 40; } switch (FEAT_TRAINS, PARENT, switch_sn81_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_sn81_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_sn81_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_sn81_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_sn81_visual_effect_local; }


item(FEAT_TRAINS, item_sn81) {
    property {

        name: string(STR_SN81_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1988, 1, 1);
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 11;
        cost_factor: 16;
        running_cost_factor: 40;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 90 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 110 kW;
        running_cost_base: RUNNING_COST_DIESEL;
        dual_headed: 0;
        cargo_capacity: 27 +7;
        weight: 23 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_DIESEL;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.1;
        air_drag_coefficient: 0.07;
        length: 5;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 45;
        retire_early: 13;
    }
}

    graphics {
        purchase: sset_sn81_purchase;
        default: switch_sn81_graphics;
        articulated_part: switch_sn81_articulated;

        visual_effect_and_powered: switch_sn81_visual_effect;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_sn81_capacity;
        can_attach_wagon: switch_sn81_can_attach;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_sn81_running_cost;
        purchase_power: return CB_FAILED; power: switch_sn81_power;
    }

}
# 197 "src/pkp.pnml" 2
# 1 "src/engines/sa106.pnml" 1





spriteset(sset_sa106_purchase, "gfx/sa106.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_sa106, "gfx/sa106.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_sa106_open, "gfx/sa106.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_sa106_cut, "gfx/sa106.png") { tmpl_sprite_train12(4, 120) }
spritegroup sgroup_sa106 {
    loaded: [sset_sa106];
    loading: [sset_sa106_open];
}
# 25 "src/engines/sa106.pnml"
switch(FEAT_TRAINS, SELF, switch_sa106_articulated, extra_callback_info1) {
    1: return item_dummy_3;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_sa106_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_sa106_cut;
    return sgroup_sa106;
}
switch(FEAT_TRAINS, SELF, switch_sa106_capacity, cargo_type_in_veh) {
    TOUR: return 60;
    return 60 +16;
}
switch(FEAT_TRAINS, PARENT, switch_sa106_visual_effect_local,0) {
    return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 1, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, SELF, switch_sa106_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_COMBINED_TEXT), string(STR_SA106_TEXT));
    return string(STR_SA106_TEXT);
}
switch(FEAT_TRAINS, SELF, switch_sa106_can_attach_arctic, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_ATTACH_DISALLOW, string(STR_SA106_NAME));
    return CB_RESULT_ATTACH_ALLOW;
}
switch(FEAT_TRAINS, SELF, switch_sa106_can_attach, vehicle_type_id) {
    item_sa106: return CB_RESULT_ATTACH_ALLOW;
    item_bh_bon: return CB_RESULT_ATTACH_ALLOW;
    item_bdhpumn: return switch_sa106_can_attach_arctic;
    item_bdwxzd: return switch_sa106_can_attach_arctic;
    return string(STR_ATTACH_DISALLOW, string(STR_SA106_NAME));
}
switch(FEAT_TRAINS, SELF, switch_sa106_start_stop, (count_veh_id(item_sa106) > 3) || (count_veh_id(item_bh_bon)+count_veh_id(item_bdhpumn)/2+count_veh_id(item_bdwxzd) > 3) ) {
    1: return string(STR_TRAIN_TOO_LONG, string(STR_SA106_NAME));
    return CB_RESULT_NO_TEXT;
}
switch (FEAT_TRAINS, PARENT, switch_sa106_running_cost2, current_speed ) { 0: return 24-2; return 70-2; } switch (FEAT_TRAINS, PARENT, switch_sa106_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_sa106_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_sa106_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_sa106_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_sa106_visual_effect_local; }


item(FEAT_TRAINS, item_sa106) {
    property {

        name: string(STR_SA106_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(2001, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 12;
        cost_factor: 28;
        running_cost_factor: 70-2;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 140 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 500 kW;
        running_cost_base: RUNNING_COST_DIESEL;
        dual_headed: 0;
        cargo_capacity: 60 +16;
        weight: 52 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_DIESEL;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.150;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }
    graphics {
        purchase: sset_sa106_purchase;
        additional_text: switch_sa106_add_text;
        default: switch_sa106_graphics;
        articulated_part: switch_sa106_articulated;
        visual_effect_and_powered: switch_sa106_visual_effect;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_sa106_capacity;
        colour_mapping: switch_lights_engine_2;
        can_attach_wagon: switch_sa106_can_attach;
        start_stop: switch_sa106_start_stop;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_sa106_running_cost;
        purchase_power: return CB_FAILED; power: switch_sa106_power;
    }
}
# 198 "src/pkp.pnml" 2


# 1 "src/engines/ep01.pnml" 1





spriteset(sset_ep01_purchase, "gfx/ep01.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_ep01, "gfx/ep01.png") { tmpl_sprite_train(4, 20) }


switch(FEAT_TRAINS, PARENT, switch_ep01_visual_effect_local, 0) {
    return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 2, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_ep01_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_NONE_TEXT), string(STR_ENGINE_EXPRESS));
    return string(STR_ENGINE_EXPRESS);
}
switch (FEAT_TRAINS, PARENT, switch_ep01_running_cost2, current_speed ) { 0: return 10+1; return 55+2; } switch (FEAT_TRAINS, PARENT, switch_ep01_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ep01_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_ep01_power3, position_in_consist > 0 ) { 1: return int(int(1352*1.3410)*0.71); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_ep01_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ep01_power3; }
switch(FEAT_TRAINS, PARENT, switch_ep01_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_ep01_visual_effect_local; }


item(FEAT_TRAINS, item_ep01) {
    property {

        name: string(STR_EP01_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1934, 1, 1);
        vehicle_life: 30;
        reliability_decay: 35;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 25+2;
        running_cost_factor: 55+2;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 1352 kW;
        running_cost_base: RUNNING_COST_ELECTRIC;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 75 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_ELECTRIC;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.230;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 32;
        retire_early: -1;
    }
}

    graphics {
        purchase: sset_ep01_purchase;
        additional_text: switch_ep01_add_text;
        default: sset_ep01;
        visual_effect_and_powered: switch_ep01_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_ep01_running_cost;
        purchase_power: return CB_FAILED; power: switch_ep01_power;
    }
}
# 201 "src/pkp.pnml" 2
# 1 "src/engines/ep02.pnml" 1





spriteset(sset_ep02_purchase, "gfx/ep02.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_ep02, "gfx/ep02.png") { tmpl_sprite_train10(4, 20) }


switch(FEAT_TRAINS, SELF, switch_ep02_articulated, extra_callback_info1) {
    1: return item_ep02;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_ep02_length, position_in_vehid_chain % 2) {
    1: return 1;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_ep02_graphics, position_in_vehid_chain % 2) {
    0: return sset_ep02;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_ep02_visual_effect_local, position_in_vehid_chain % 2) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_ep02_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_ELECTRIC_POWER_TEXT, 200), string(STR_ENGINE_EXPRESS));
    return string(STR_ENGINE_EXPRESS);
}
switch (FEAT_TRAINS, PARENT, switch_ep02_running_cost2, current_speed ) { 0: return 11; return 57+1; } switch (FEAT_TRAINS, PARENT, switch_ep02_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ep02_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_ep02_power3, position_in_consist > 0 ) { 1: return int(int(1360*1.3410)*0.71); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_ep02_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ep02_power3; }
switch(FEAT_TRAINS, PARENT, switch_ep02_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_ep02_visual_effect_local; }


item(FEAT_TRAINS, item_ep02) {
    property {

        name: string(STR_EP02_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1953, 1, 1);
        vehicle_life: 30;
        reliability_decay: 25;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 28;
        running_cost_factor: 57+1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 110 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 1360 kW;
        running_cost_base: RUNNING_COST_ELECTRIC;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 81 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_ELECTRIC;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.213;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 29;
        retire_early: 2;
    }
}

    graphics {
        purchase: sset_ep02_purchase;
        additional_text: switch_ep02_add_text;
        default: switch_ep02_graphics;
        articulated_part: switch_ep02_articulated;
        length: switch_ep02_length;
        visual_effect_and_powered: switch_ep02_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_ep02_running_cost;
        purchase_power: return CB_FAILED; power: switch_ep02_power;
    }
}
# 202 "src/pkp.pnml" 2
# 1 "src/engines/et21.pnml" 1





spriteset(sset_et21_purchase, "gfx/et21.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_et21, "gfx/et21.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_et21_purchase_yellow, "gfx/et21.png") { tmpl_sprite_purchase(4, 120) }
spriteset(sset_et21_yellow, "gfx/et21.png") { tmpl_sprite_train10(4, 80) }



switch(FEAT_TRAINS, SELF, switch_et21_purchase, build_year >= 1989) {
    1: return sset_et21_purchase_yellow;
    return sset_et21_purchase;
}
switch(FEAT_TRAINS, SELF, switch_et21_articulated, extra_callback_info1) {
    1: return item_et21;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_et21_length, position_in_vehid_chain % 2) {
    1: return 1;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_et21_graphics, (position_in_vehid_chain % 2)*2 + (build_year >= 1989)) {
    0: return sset_et21;
    1: return sset_et21_yellow;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_et21_visual_effect_local, position_in_vehid_chain % 2) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_et21_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_ELECTRIC_POWER_TEXT, 290), string(STR_ENGINE_FREIGHT));
 return string(STR_ENGINE_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_et21_running_cost2, current_speed ) { 0: return 10; return 70; } switch (FEAT_TRAINS, PARENT, switch_et21_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_et21_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_et21_power3, position_in_consist > 0 ) { 1: return int(int(1860*1.3410)*0.71); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_et21_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_et21_power3; }
switch(FEAT_TRAINS, PARENT, switch_et21_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_et21_visual_effect_local; }


item(FEAT_TRAINS, item_et21) {
    property {

        name: string(STR_ET21_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1957, 1, 1);
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 29;
        running_cost_factor: 70;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 1860 kW;
        running_cost_base: RUNNING_COST_ELECTRIC;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 121 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_ELECTRIC;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.281;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 70;
        retire_early: 12;
    }
}

    graphics {
        purchase: switch_et21_purchase;
        additional_text: switch_et21_add_text;
        default: switch_et21_graphics;
        articulated_part: switch_et21_articulated;
        length: switch_et21_length;
        visual_effect_and_powered: switch_et21_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_et21_running_cost;
        purchase_power: return CB_FAILED; power: switch_et21_power;
    }
}
# 203 "src/pkp.pnml" 2
# 1 "src/engines/eu07.pnml" 1





spriteset(sset_eu07_purchase, "gfx/eu07.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_eu07_purchase_yellow, "gfx/eu07.png") { tmpl_sprite_purchase(4, 120) }
spriteset(sset_eu07, "gfx/eu07.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_eu07_yellow, "gfx/eu07.png") { tmpl_sprite_train10(4, 80) }
spriteset(sset_eu07_pkp_ic, "gfx/eu07.png") { tmpl_sprite_train10(4, 140) }
spriteset(sset_eu07_pkp_cargo, "gfx/eu07.png") { tmpl_sprite_train10(4, 180) }
spriteset(sset_eu07_pkp_pr1, "gfx/eu07.png") { tmpl_sprite_train10(4, 220) }
spriteset(sset_eu07_pkp_pr2, "gfx/eu07.png") { tmpl_sprite_train10(4, 260) }
spriteset(sset_eu07_pkp_polregio, "gfx/eu07.png") { tmpl_sprite_train10(4, 300) }



switch (FEAT_TRAINS, SELF, switch_eu07_subtype_text2, cargo_subtype) {
    0: return string(STR_SUBTYPE_LIVERY_CARGO_DEP);
    1: return string(STR_SUBTYPE_LIVERY_CLASSIC);
    2: return string(STR_SUBTYPE_LIVERY_PKP_CARGO);
    3: return string(STR_SUBTYPE_LIVERY_PKP_IC);
    4: return string(STR_SUBTYPE_LIVERY_PKP_PR);
    5: return string(STR_SUBTYPE_LIVERY_PKP_POLREGIO);
    return CB_RESULT_NO_TEXT;
}
switch (FEAT_TRAINS, SELF, switch_eu07_subtype_text, current_year >= 1993) {
    1: return switch_eu07_subtype_text2;
    return CB_RESULT_NO_TEXT;
}
switch(FEAT_TRAINS, SELF, switch_eu07_purchase, build_year >= 1989) {
    1: return sset_eu07_purchase_yellow;
    return sset_eu07_purchase;
}
switch(FEAT_TRAINS, SELF, switch_eu07_articulated, extra_callback_info1) {
    1: return item_eu07;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_eu07_length, position_in_vehid_chain % 2) {
    1: return 1;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_eu07_classic_graphics, build_year >= 1989) {
    1: return sset_eu07_yellow;
    return sset_eu07;
}
random_switch(FEAT_TRAINS, SELF, switch_eu07_pkp_pr3_graphics) {
    3: return sset_eu07_pkp_pr1;
    5: return sset_eu07_pkp_pr2;
}
switch(FEAT_TRAINS, SELF, switch_eu07_pkp_pr2_graphics, (build_year >= 2017) || (date_of_last_service >= date(2017, 1, 1))) {
    1: return sset_eu07_pkp_polregio;
    return switch_eu07_pkp_pr3_graphics;
}
switch(FEAT_TRAINS, SELF, switch_eu07_pkp_pr_graphics, (build_year >= 2012) || (date_of_last_service >= date(2012, 1, 1))) {
    1: return switch_eu07_pkp_pr2_graphics;
    return sset_eu07_pkp_pr1;
}
switch(FEAT_TRAINS, SELF, switch_eu07_auto2_graphics, bitmask_consist_info & bitmask(0, 1, 2)) {
    bitmask(1): return sset_eu07_pkp_cargo;
    bitmask(0, 2): return sset_eu07_pkp_ic;
    bitmask(0): return switch_eu07_pkp_pr_graphics;
    return switch_eu07_classic_graphics;
}
switch(FEAT_TRAINS, SELF, switch_eu07_auto_graphics, (build_year >= 2003) || (date_of_last_service >= date(2003, 1, 1))) {
    1: return switch_eu07_auto2_graphics;
    return switch_eu07_classic_graphics;
}
switch(FEAT_TRAINS, SELF, switch_eu07_livery_graphics, cargo_subtype % 6) {
    0: return switch_eu07_auto_graphics;

    2: return sset_eu07_pkp_cargo;
    3: return sset_eu07_pkp_ic;
    4: return switch_eu07_pkp_pr_graphics;
    5: return sset_eu07_pkp_polregio;
    return switch_eu07_classic_graphics;
}
switch(FEAT_TRAINS, SELF, switch_eu07_graphics, position_in_vehid_chain % 2) {
    0: return switch_eu07_livery_graphics;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_eu07_visual_effect_local, position_in_vehid_chain % 2) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_eu07_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_ELECTRIC_POWER_TEXT, 450), string(STR_ENGINE_PASSENGER_FREIGHT));
    return string(STR_ENGINE_PASSENGER_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_eu07_running_cost2, current_speed ) { 0: return 14-1; return 80-1; } switch (FEAT_TRAINS, PARENT, switch_eu07_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_eu07_running_cost2; }
switch(FEAT_TRAINS, PARENT, switch_eu07_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_eu07_visual_effect_local; }

switch (FEAT_TRAINS, SELF, switch_eu07_power2, position_in_consist > 2 ) {
 1: return 1904;
 return CB_FAILED;
 }
 switch (FEAT_TRAINS, PARENT, switch_eu07_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) {
 item_asf: return 0;
 item_ep01: return 1904;
 item_ep02: return 1904;
 item_ep05: return 1904;
 item_et21: return 1904;
 item_et22: return 1904;
 item_et26: return 1904;
 item_ep09: return 1904;
 item_eu43: return 1904;
 item_eu44: return 1904;
 item_eu46: return 1904;
 item_eu47: return 1904;
 return switch_eu07_power2;
 }


item(FEAT_TRAINS, item_eu07) {
    property {

        name: string(STR_EU07_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1964, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 35;
        running_cost_factor: 80-1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 125 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 2000 kW;
        running_cost_base: RUNNING_COST_ELECTRIC;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 81 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_ELECTRIC;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.284;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

    graphics {
        purchase: switch_eu07_purchase;
        additional_text: switch_eu07_add_text;
        default: switch_eu07_graphics;
        cargo_subtype_text: switch_eu07_subtype_text;
        articulated_part: switch_eu07_articulated;
        length: switch_eu07_length;
        visual_effect_and_powered: switch_eu07_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_eu07_running_cost;
        purchase_power: return CB_FAILED; power: switch_eu07_power;
    }
}
# 204 "src/pkp.pnml" 2

# 1 "src/engines/ep05.pnml" 1





spriteset(sset_ep05_purchase, "gfx/ep05.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_ep05, "gfx/ep05.png") { tmpl_sprite_train10(4, 20) }


switch(FEAT_TRAINS, SELF, switch_ep05_articulated, extra_callback_info1) {
    1: return item_ep05;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_ep05_length, position_in_vehid_chain % 2) {
    1: return 1;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_ep05_graphics, position_in_vehid_chain % 2) {
    0: return sset_ep05;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_ep05_visual_effect_local, position_in_vehid_chain % 2) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_ep05_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_ELECTRIC_POWER_TEXT, 450), string(STR_ENGINE_EXPRESS));
    return string(STR_ENGINE_EXPRESS);
}
switch (FEAT_TRAINS, PARENT, switch_ep05_running_cost2, current_speed ) { 0: return 21+1; return 94+2; } switch (FEAT_TRAINS, PARENT, switch_ep05_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ep05_running_cost2; }
switch(FEAT_TRAINS, PARENT, switch_ep05_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_ep05_visual_effect_local; }

switch (FEAT_TRAINS, SELF, switch_ep05_power2, position_in_consist > 2 ) {
 1: return 1935;
 return CB_FAILED;
 }
 switch (FEAT_TRAINS, PARENT, switch_ep05_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) {
 item_asf: return 0;
 item_ep01: return 1935;
 item_ep02: return 1935;
 item_eu07: return 1935;
 item_et21: return 1935;
 item_et22: return 1935;
 item_et26: return 1935;
 item_ep09: return 1935;
 item_eu43: return 1935;
 item_eu44: return 1935;
 item_eu46: return 1935;
 item_eu47: return 1935;
 return switch_ep05_power2;
 }


item(FEAT_TRAINS, item_ep05) {
    property {

        name: string(STR_EP05_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1973, 1, 1);
        vehicle_life: 25;
        reliability_decay: 30;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 43+1;
        running_cost_factor: 94+2;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 160 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 2032 kW;
        running_cost_base: RUNNING_COST_ELECTRIC;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 82 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_ELECTRIC;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.236;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 40;
        retire_early: 2;
    }
}

    graphics {
        purchase: sset_ep05_purchase;
        additional_text: switch_ep05_add_text;
        default: switch_ep05_graphics;
        articulated_part: switch_ep05_articulated;
        length: switch_ep05_length;
        visual_effect_and_powered: switch_ep05_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_ep05_running_cost;
        purchase_power: return CB_FAILED; power: switch_ep05_power;
    }
}
# 206 "src/pkp.pnml" 2
# 1 "src/engines/et22.pnml" 1





spriteset(sset_et22_purchase, "gfx/et22.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_et22, "gfx/et22.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_et22_pkp_cargo, "gfx/et22.png") { tmpl_sprite_train10(4, 80) }


switch (FEAT_TRAINS, SELF, switch_et22_subtype_text2, cargo_subtype) {
    0: return string(STR_SUBTYPE_LIVERY_CARGO_DEP);
    1: return string(STR_SUBTYPE_LIVERY_CLASSIC);
    2: return string(STR_SUBTYPE_LIVERY_PKP_CARGO);
    return CB_RESULT_NO_TEXT;
}
switch (FEAT_TRAINS, SELF, switch_et22_subtype_text, current_year >= 1993) {
    1: return switch_et22_subtype_text2;
    return CB_RESULT_NO_TEXT;
}
switch(FEAT_TRAINS, SELF, switch_et22_articulated, extra_callback_info1) {
    1: return item_et22;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_et22_length, position_in_vehid_chain % 2) {
    1: return 2;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_et22_auto2_graphics, bitmask_consist_info & bitmask(0, 1, 2)) {
    bitmask(1): return sset_et22_pkp_cargo;
    return sset_et22;
}
switch(FEAT_TRAINS, SELF, switch_et22_auto_graphics, (build_year >= 2003) || (date_of_last_service >= date(2003, 1, 1))) {
    1: return switch_et22_auto2_graphics;
    return sset_et22;
}
switch(FEAT_TRAINS, SELF, switch_et22_livery_graphics, cargo_subtype % 3) {
    0: return switch_et22_auto_graphics;

    2: return sset_et22_pkp_cargo;
    return sset_et22;
}
switch(FEAT_TRAINS, SELF, switch_et22_graphics, position_in_vehid_chain % 2) {
    0: return switch_et22_livery_graphics;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_et22_visual_effect_local, position_in_vehid_chain % 2) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_et22_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_ELECTRIC_POWER_TEXT, 290), string(STR_ENGINE_HEAVY_FREIGHT));
 return string(STR_ENGINE_HEAVY_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_et22_running_cost2, current_speed ) { 0: return 14; return 110; } switch (FEAT_TRAINS, PARENT, switch_et22_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_et22_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_et22_power3, position_in_consist > 0 ) { 1: return int(int(3000*1.3410)*0.71); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_et22_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_et22_power3; }
switch(FEAT_TRAINS, PARENT, switch_et22_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_et22_visual_effect_local; }


item(FEAT_TRAINS, item_et22) {
    property {

        name: string(STR_ET22_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1969, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 33;
        reliability_decay: 15;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 41;
        running_cost_factor: 110;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 125 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 3000 kW;
        running_cost_base: RUNNING_COST_ELECTRIC;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 120 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_ELECTRIC;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.300;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

    graphics {
        purchase: sset_et22_purchase;
        additional_text: switch_et22_add_text;
        default: switch_et22_graphics;
        cargo_subtype_text: switch_et22_subtype_text;
        articulated_part: switch_et22_articulated;
        length: switch_et22_length;
        visual_effect_and_powered: switch_et22_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_et22_running_cost;
        purchase_power: return CB_FAILED; power: switch_et22_power;
    }
}
# 207 "src/pkp.pnml" 2
# 1 "src/engines/et40.pnml" 1





spriteset(sset_et40_purchase, "gfx/et40.png") { tmpl_sprite_purchase(4, 100) }
spriteset(sset_et40_head, "gfx/et40.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_et40_tail, "gfx/et40.png") { tmpl_sprite_train10_offset(4, 60, 1) }


switch(FEAT_TRAINS, SELF, switch_et40_articulated, extra_callback_info1) {
    1..2: return item_et40;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_et40_length, position_in_vehid_chain % 3) {
    1: return 2;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_et40_graphics, position_in_vehid_chain % 3) {
    0: return sset_et40_head;
    2: return sset_et40_tail;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_et40_visual_effect_local, position_in_vehid_chain % 3) {
    2: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 2, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_et40_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_ELECTRIC_POWER_TEXT, 290), string(STR_ENGINE_HEAVY_FREIGHT));
    return string(STR_ENGINE_HEAVY_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_et40_running_cost2, current_speed ) { 0: return 10; return 137; } switch (FEAT_TRAINS, PARENT, switch_et40_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_et40_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_et40_power3, position_in_consist > 0 ) { 1: return int(int(4080*1.3410)*0.71); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_et40_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_et40_power3; }
switch(FEAT_TRAINS, PARENT, switch_et40_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_et40_visual_effect_local; }


item(FEAT_TRAINS, item_et40) {
    property {

        name: string(STR_ET40_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1975, 1, 1);
        vehicle_life: 30;
        reliability_decay: 30;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 44;
        running_cost_factor: 137;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 4080 kW;
        running_cost_base: RUNNING_COST_ELECTRIC;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 164 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_ELECTRIC;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.280;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 40;
        retire_early: 2;
    }
}

    graphics {
        purchase: sset_et40_purchase;
        additional_text: switch_et40_add_text;
        default: switch_et40_graphics;
        articulated_part: switch_et40_articulated;
        length: switch_et40_length;
        visual_effect_and_powered: switch_et40_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_et40_running_cost;
        purchase_power: return CB_FAILED; power: switch_et40_power;
    }
}
# 208 "src/pkp.pnml" 2
# 1 "src/engines/et41.pnml" 1





spriteset(sset_et41_purchase, "gfx/et41.png") { tmpl_sprite_purchase(4, 100) }
spriteset(sset_et41_purchase_yellow, "gfx/et41.png") { tmpl_sprite_purchase(4, 200) }
spriteset(sset_et41_head, "gfx/et41.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_et41_tail, "gfx/et41.png") { tmpl_sprite_train10_offset(4, 60, 1) }
spriteset(sset_et41_head_yellow, "gfx/et41.png") { tmpl_sprite_train10(4, 120) }
spriteset(sset_et41_tail_yellow, "gfx/et41.png") { tmpl_sprite_train10_offset(4, 160, 1) }
spriteset(sset_et41_head_pkp_cargo, "gfx/et41.png") { tmpl_sprite_train10(4, 220) }
spriteset(sset_et41_tail_pkp_cargo, "gfx/et41.png") { tmpl_sprite_train10_offset(4, 260, 1) }



switch (FEAT_TRAINS, SELF, switch_et41_subtype_text2, cargo_subtype) {
    0: return string(STR_SUBTYPE_LIVERY_CARGO_DEP);
    1: return string(STR_SUBTYPE_LIVERY_CLASSIC);
    2: return string(STR_SUBTYPE_LIVERY_PKP_CARGO);
    return CB_RESULT_NO_TEXT;
}
switch (FEAT_TRAINS, SELF, switch_et41_subtype_text, current_year >= 1993) {
    1: return switch_et41_subtype_text2;
    return CB_RESULT_NO_TEXT;
}
switch(FEAT_TRAINS, SELF, switch_et41_purchase, build_year >= 1989) {
    1: return sset_et41_purchase_yellow;
    return sset_et41_purchase;
}
switch(FEAT_TRAINS, SELF, switch_et41_articulated, extra_callback_info1) {
    1..2: return item_et41;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_et41_length, position_in_vehid_chain % 3) {
    1: return 2;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_et41_head_classic_graphics, build_year >= 1989) {
    1: return sset_et41_head_yellow;
    return sset_et41_head;
}
switch(FEAT_TRAINS, SELF, switch_et41_head_auto2_graphics, bitmask_consist_info & bitmask(0, 1, 2)) {
    bitmask(1): return sset_et41_head_pkp_cargo;
    return switch_et41_head_classic_graphics;
}
switch(FEAT_TRAINS, SELF, switch_et41_head_auto_graphics, (build_year >= 2003) || (date_of_last_service >= date(2003, 1, 1))) {
    1: return switch_et41_head_auto2_graphics;
    return switch_et41_head_classic_graphics;
}
switch(FEAT_TRAINS, SELF, switch_et41_head_livery_graphics, cargo_subtype % 3) {
    0: return switch_et41_head_auto_graphics;

    2: return sset_et41_head_pkp_cargo;
    return switch_et41_head_classic_graphics;
}
switch(FEAT_TRAINS, SELF, switch_et41_tail_classic_graphics, build_year >= 1989) {
    1: return sset_et41_tail_yellow;
    return sset_et41_tail;
}
switch(FEAT_TRAINS, SELF, switch_et41_tail_auto2_graphics, bitmask_consist_info & bitmask(0, 1, 2)) {
    bitmask(1): return sset_et41_tail_pkp_cargo;
    return switch_et41_tail_classic_graphics;
}
switch(FEAT_TRAINS, SELF, switch_et41_tail_auto_graphics, (build_year >= 2003) || (date_of_last_service >= date(2003, 1, 1))) {
    1: return switch_et41_tail_auto2_graphics;
    return switch_et41_tail_classic_graphics;
}
switch(FEAT_TRAINS, SELF, switch_et41_tail_livery_graphics, cargo_subtype % 3) {
    0: return switch_et41_tail_auto_graphics;

    2: return sset_et41_tail_pkp_cargo;
    return switch_et41_tail_classic_graphics;
}
switch(FEAT_TRAINS, SELF, switch_et41_graphics, position_in_vehid_chain % 3) {
    0: return switch_et41_head_livery_graphics;
    2: return switch_et41_tail_livery_graphics;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_et41_visual_effect_local, position_in_vehid_chain % 3) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    2: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 2, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_et41_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_ELECTRIC_POWER_TEXT, 450), string(STR_ENGINE_HEAVY_FREIGHT));
 return string(STR_ENGINE_HEAVY_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_et41_running_cost2, current_speed ) { 0: return 14; return 140; } switch (FEAT_TRAINS, PARENT, switch_et41_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_et41_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_et41_power3, position_in_consist > 0 ) { 1: return int(int(4000*1.3410)*0.71); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_et41_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_et41_power3; }
switch(FEAT_TRAINS, PARENT, switch_et41_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_et41_visual_effect_local; }


item(FEAT_TRAINS, item_et41) {
    property {

        name: string(STR_ET41_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1977, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 49;
        running_cost_factor: 140;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 125 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 4000 kW;
        running_cost_base: RUNNING_COST_ELECTRIC;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 167 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_ELECTRIC;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.284;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

    graphics {
        purchase: switch_et41_purchase;
        additional_text: switch_et41_add_text;
        default: switch_et41_graphics;
        cargo_subtype_text: switch_et41_subtype_text;
        articulated_part: switch_et41_articulated;
        length: switch_et41_length;
        visual_effect_and_powered: switch_et41_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_et41_running_cost;
        purchase_power: return CB_FAILED; power: switch_et41_power;
    }
}
# 209 "src/pkp.pnml" 2
# 1 "src/engines/et42.pnml" 1





spriteset(sset_et42_purchase, "gfx/et42.png") { tmpl_sprite_purchase(4, 100) }
spriteset(sset_et42_head, "gfx/et42.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_et42_tail, "gfx/et42.png") { tmpl_sprite_train10_offset(4, 60, 1) }


switch(FEAT_TRAINS, SELF, switch_et42_articulated, extra_callback_info1) {
    1..2: return item_et42;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_et42_length, position_in_vehid_chain % 3) {
    1: return 2;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_et42_graphics, position_in_vehid_chain % 3) {
    0: return sset_et42_head;
    2: return sset_et42_tail;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_et42_visual_effect_local, position_in_vehid_chain % 3) {
    2: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 2, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_et42_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_ELECTRIC_POWER_TEXT, 450), string(STR_ENGINE_HEAVY_FREIGHT));
 return string(STR_ENGINE_HEAVY_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_et42_running_cost2, current_speed ) { 0: return 10+1; return 149; } switch (FEAT_TRAINS, PARENT, switch_et42_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_et42_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_et42_power3, position_in_consist > 0 ) { 1: return int(int(4480*1.3410)*0.71); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_et42_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_et42_power3; }
switch(FEAT_TRAINS, PARENT, switch_et42_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_et42_visual_effect_local; }


item(FEAT_TRAINS, item_et42) {
    property {

        name: string(STR_ET42_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1979, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 35;
        reliability_decay: 10;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 46;
        running_cost_factor: 149;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 4480 kW;
        running_cost_base: RUNNING_COST_ELECTRIC;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 165 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_ELECTRIC;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.303;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

    graphics {
        purchase: sset_et42_purchase;
        additional_text: switch_et42_add_text;
        default: switch_et42_graphics;
        articulated_part: switch_et42_articulated;
        length: switch_et42_length;
        visual_effect_and_powered: switch_et42_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_et42_running_cost;
        purchase_power: return CB_FAILED; power: switch_et42_power;
    }
}
# 210 "src/pkp.pnml" 2
# 1 "src/engines/ep09.pnml" 1





spriteset(sset_ep09_purchase, "gfx/ep09.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_ep09, "gfx/ep09.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_ep09_pkp_ic, "gfx/ep09.png") { tmpl_sprite_train10(4, 80) }
spriteset(sset_ep09_pkp_cargo, "gfx/ep09.png") { tmpl_sprite_train10(4, 120) }


switch (FEAT_TRAINS, SELF, switch_ep09_subtype_text2, cargo_subtype) {
    0: return string(STR_SUBTYPE_LIVERY_CARGO_DEP);
    1: return string(STR_SUBTYPE_LIVERY_CLASSIC);
    2: return string(STR_SUBTYPE_LIVERY_PKP_CARGO);
    3: return string(STR_SUBTYPE_LIVERY_PKP_IC);
    return CB_RESULT_NO_TEXT;
}
switch (FEAT_TRAINS, SELF, switch_ep09_subtype_text, current_year >= 1993) {
    1: return switch_ep09_subtype_text2;
    return CB_RESULT_NO_TEXT;
}
switch(FEAT_TRAINS, SELF, switch_ep09_articulated, extra_callback_info1) {
    1: return item_ep09;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_ep09_length, position_in_vehid_chain % 2) {
    1: return 1;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_ep09_auto2_graphics, bitmask_consist_info & bitmask(0, 1, 2)) {
    bitmask(1): return sset_ep09_pkp_cargo;
    bitmask(0, 2): return sset_ep09_pkp_ic;
    return sset_ep09;
}
switch(FEAT_TRAINS, SELF, switch_ep09_auto_graphics, (build_year >= 2003) || (date_of_last_service >= date(2003, 1, 1))) {
    1: return switch_ep09_auto2_graphics;
    return sset_ep09;
}
switch(FEAT_TRAINS, SELF, switch_ep09_livery_graphics, cargo_subtype % 4) {
    0: return switch_ep09_auto_graphics;

    2: return sset_ep09_pkp_cargo;
    3: return sset_ep09_pkp_ic;
    return sset_ep09;
}
switch(FEAT_TRAINS, SELF, switch_ep09_graphics, position_in_vehid_chain % 2) {
    0: return switch_ep09_livery_graphics;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_ep09_visual_effect_local, position_in_vehid_chain % 2) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 2, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_ep09_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_ELECTRIC_POWER_TEXT, 450), string(STR_ENGINE_EXPRESS));
    return string(STR_ENGINE_EXPRESS);
}
switch (FEAT_TRAINS, PARENT, switch_ep09_running_cost2, current_speed ) { 0: return 21; return 119; } switch (FEAT_TRAINS, PARENT, switch_ep09_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ep09_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_ep09_power3, position_in_consist > 0 ) { 1: return int(int(2920*1.3410)*0.71); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_ep09_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ep09_power3; }
switch(FEAT_TRAINS, PARENT, switch_ep09_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_ep09_visual_effect_local; }

switch(FEAT_TRAINS, SELF, switch_ep09_can_attach, vehicle_type_id) {
    item_twindexx: return string(STR_ATTACH_DISALLOW, string(STR_EP09_NAME));
    item_twindexxcc: return string(STR_ATTACH_DISALLOW, string(STR_EP09_NAME));
    return switch_normal_can_attach;
}


item(FEAT_TRAINS, item_ep09) {
    property {

        name: string(STR_EP09_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1986, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 49;
        running_cost_factor: 119;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 160 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 2920 kW;
        running_cost_base: RUNNING_COST_ELECTRIC;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 84 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_ELECTRIC;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.237;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

    graphics {
        purchase: sset_ep09_purchase;
        additional_text: switch_ep09_add_text;
        default: switch_ep09_graphics;
        cargo_subtype_text: switch_ep09_subtype_text;
        articulated_part: switch_ep09_articulated;
        length: switch_ep09_length;
        visual_effect_and_powered: switch_ep09_visual_effect;
        can_attach_wagon: switch_ep09_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_ep09_running_cost;
        purchase_power: return CB_FAILED; power: switch_ep09_power;
    }
}
# 211 "src/pkp.pnml" 2
# 1 "src/engines/eu43.pnml" 1





spriteset(sset_eu43_purchase, "gfx/traxx.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_eu43_pkp_cargo, "gfx/traxx.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_eu43_pkp_pr, "gfx/e186.png") { tmpl_sprite_train10(4, 78) }
spriteset(sset_eu43_lotos, "gfx/e186.png") { tmpl_sprite_train10(4, 116) }


switch (FEAT_TRAINS, SELF, switch_eu43_subtype_text2, cargo_subtype) {
    0: return string(STR_SUBTYPE_LIVERY_PKP_CARGO);
    1: return string(STR_SUBTYPE_LIVERY_PKP_PR);
    2: return string(STR_SUBTYPE_LIVERY_LOTOS);
    return CB_RESULT_NO_TEXT;
}
switch (FEAT_TRAINS, SELF, switch_eu43_subtype_text, current_year >= 1993) {
    1: return switch_eu43_subtype_text2;
    return CB_RESULT_NO_TEXT;
}
switch(FEAT_TRAINS, SELF, switch_eu43_livery_graphics, cargo_subtype % 3) {
    0: return sset_eu43_pkp_cargo;
    1: return sset_eu43_pkp_pr;
    2: return sset_eu43_lotos;
    return sset_eu43_pkp_cargo;
}
switch(FEAT_TRAINS, SELF, switch_eu43_graphics, position_in_vehid_chain % 2) {
    0: return switch_eu43_livery_graphics;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_eu43_articulated, extra_callback_info1) {
    1: return item_eu43;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_eu43_length, position_in_vehid_chain % 2) {
    1: return 2;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_eu43_visual_effect_local, position_in_vehid_chain % 2) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_eu43_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_ELECTRIC_POWER_TEXT, 450), string(STR_ENGINE_PASSENGER_FREIGHT));
 return string(STR_ENGINE_PASSENGER_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_eu43_running_cost2, current_speed ) { 0: return 17; return 191; } switch (FEAT_TRAINS, PARENT, switch_eu43_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_eu43_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_eu43_power5, position_in_consist > 0 ) { 1: return int(int(5600*1.3410)*0.6); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_eu43_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_eu43_power5; }
switch(FEAT_TRAINS, PARENT, switch_eu43_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_eu43_visual_effect_local; }

switch(FEAT_TRAINS, SELF, switch_eu43_can_attach, vehicle_type_id) {
    item_twindexx: return string(STR_ATTACH_DISALLOW, string(STR_EU43_NAME));
    item_twindexxcc: return string(STR_ATTACH_DISALLOW, string(STR_EU43_NAME));
    return switch_normal_can_attach;
}


item(FEAT_TRAINS, item_eu43) {
    property {

        name: string(STR_EU43_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(2008, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 60;
        running_cost_factor: 191;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 140 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 5600 kW;
        running_cost_base: RUNNING_COST_ELECTRIC;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 85 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_ELECTRIC;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.360;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

    graphics {
        purchase: sset_eu43_purchase;
        additional_text: switch_eu43_add_text;
        default: switch_eu43_graphics;
        cargo_subtype_text: switch_eu43_subtype_text;
        articulated_part: switch_eu43_articulated;
        length: switch_eu43_length;
        visual_effect_and_powered: switch_eu43_visual_effect;
        can_attach_wagon: switch_eu43_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_eu43_running_cost;
        purchase_power: return CB_FAILED; power: switch_eu43_power;
    }
}
# 212 "src/pkp.pnml" 2
# 1 "src/engines/eu44.pnml" 1





spriteset(sset_eu44_purchase, "gfx/taurus.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_eu44, "gfx/taurus.png") { tmpl_sprite_train10(4, 20) }


switch(FEAT_TRAINS, SELF, switch_eu44_articulated, extra_callback_info1) {
    1: return item_eu44;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_eu44_length, position_in_vehid_chain % 2) {
    1: return 2;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_eu44_graphics, position_in_vehid_chain % 2) {
    0: return sset_eu44;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_eu44_visual_effect_local, position_in_vehid_chain % 2) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_eu44_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_ELECTRIC_POWER_TEXT, 450), string(STR_ENGINE_EXPRESS));
 return string(STR_ENGINE_EXPRESS);
}
switch (FEAT_TRAINS, PARENT, switch_eu44_running_cost2, current_speed ) { 0: return 38; return 226; } switch (FEAT_TRAINS, PARENT, switch_eu44_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_eu44_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_eu44_power5, position_in_consist > 0 ) { 1: return int(int(6000*1.3410)*0.6); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_eu44_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_eu44_power5; }
switch(FEAT_TRAINS, PARENT, switch_eu44_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_eu44_visual_effect_local; }

switch(FEAT_TRAINS, SELF, switch_eu44_can_attach, vehicle_type_id) {
    item_twindexx: return string(STR_ATTACH_DISALLOW, string(STR_EU44_NAME));
    item_twindexxcc: return string(STR_ATTACH_DISALLOW, string(STR_EU44_NAME));
    return switch_normal_can_attach;
}


item(FEAT_TRAINS, item_eu44) {
    property {

        name: string(STR_EU44_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(2009, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 83;
        running_cost_factor: 226;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 230 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 6000 kW;
        running_cost_base: RUNNING_COST_ELECTRIC;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 87 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_ELECTRIC;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.295;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

    graphics {
        purchase: sset_eu44_purchase;
        additional_text: switch_eu44_add_text;
        default: switch_eu44_graphics;
        articulated_part: switch_eu44_articulated;
        length: switch_eu44_length;
        visual_effect_and_powered: switch_eu44_visual_effect;
        can_attach_wagon: switch_eu44_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_eu44_running_cost;
        purchase_power: return CB_FAILED; power: switch_eu44_power;
    }
}
# 213 "src/pkp.pnml" 2
# 1 "src/engines/eu47.pnml" 1





spriteset(sset_eu47_purchase, "gfx/eu47.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_eu47, "gfx/eu47.png") { tmpl_sprite_train10(4, 20) }


switch(FEAT_TRAINS, SELF, switch_eu47_articulated, extra_callback_info1) {
    1: return item_eu47;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_eu47_length, position_in_vehid_chain % 2) {
    1: return 2;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_eu47_graphics, position_in_vehid_chain % 2) {
    0: return sset_eu47;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_eu47_visual_effect_local, position_in_vehid_chain % 2) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_eu47_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_ELECTRIC_POWER_TEXT, 450), string(STR_ENGINE_EXPRESS));
 return string(STR_ENGINE_EXPRESS);
}
switch (FEAT_TRAINS, PARENT, switch_eu47_running_cost2, current_speed ) { 0: return 27; return 205; } switch (FEAT_TRAINS, PARENT, switch_eu47_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_eu47_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_eu47_power5, position_in_consist > 0 ) { 1: return int(int(5600*1.3410)*0.6); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_eu47_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_eu47_power5; }
switch(FEAT_TRAINS, PARENT, switch_eu47_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_eu47_visual_effect_local; }

switch(FEAT_TRAINS, SELF, switch_eu47_start_stop, (count_veh_id(item_twindexx)/2 > 7) || (count_veh_id(item_twindexxcc)/2 > 1) ) {
    1: return string(STR_TRAIN_TOO_LONG, string(STR_EU47_NAME));
    return CB_RESULT_NO_TEXT;
}


item(FEAT_TRAINS, item_eu47) {
    property {

        name: string(STR_EU47_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(2011, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 69;
        running_cost_factor: 205;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 160 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 5600 kW;
        running_cost_base: RUNNING_COST_ELECTRIC;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 85 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_ELECTRIC;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.360;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

    graphics {
        purchase: sset_eu47_purchase;
        additional_text: switch_eu47_add_text;
        default: switch_eu47_graphics;
        articulated_part: switch_eu47_articulated;
        length: switch_eu47_length;
        visual_effect_and_powered: switch_eu47_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_eu47_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_eu47_running_cost;
        purchase_power: return CB_FAILED; power: switch_eu47_power;
    }
}
# 214 "src/pkp.pnml" 2
# 1 "src/engines/eu46.pnml" 1





spriteset(sset_eu46_purchase, "gfx/vectron.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_eu46, "gfx/vectron.png") { tmpl_sprite_train10(4, 20) }


switch(FEAT_TRAINS, SELF, switch_eu46_articulated, extra_callback_info1) {
    1: return item_eu46;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_eu46_length, position_in_vehid_chain % 2) {
    1: return 2;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_eu46_graphics, position_in_vehid_chain % 2) {
    0: return sset_eu46;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_eu46_visual_effect_local, position_in_vehid_chain % 2) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_eu46_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_ELECTRIC_POWER_TEXT, 450), string(STR_ENGINE_PASSENGER_FREIGHT));
 return string(STR_ENGINE_PASSENGER_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_eu46_running_cost2, current_speed ) { 0: return 28; return 228; } switch (FEAT_TRAINS, PARENT, switch_eu46_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_eu46_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_eu46_power5, position_in_consist > 0 ) { 1: return int(int(6400*1.3410)*0.6); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_eu46_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_eu46_power5; }
switch(FEAT_TRAINS, PARENT, switch_eu46_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_eu46_visual_effect_local; }

switch(FEAT_TRAINS, SELF, switch_eu46_can_attach, vehicle_type_id) {
    item_twindexx: return string(STR_ATTACH_DISALLOW, string(STR_EU46_NAME));
    item_twindexxcc: return string(STR_ATTACH_DISALLOW, string(STR_EU46_NAME));
    return switch_normal_can_attach;
}


item(FEAT_TRAINS, item_eu46) {
    property {

        name: string(STR_EU46_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(2015, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 79;
        running_cost_factor: 228;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 200 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 6400 kW;
        running_cost_base: RUNNING_COST_ELECTRIC;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 87 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_ELECTRIC;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.352;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

    graphics {
        purchase: sset_eu46_purchase;
        additional_text: switch_eu46_add_text;
        default: switch_eu46_graphics;
        articulated_part: switch_eu46_articulated;
        length: switch_eu46_length;
        visual_effect_and_powered: switch_eu46_visual_effect;
        can_attach_wagon: switch_eu46_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_eu46_running_cost;
        purchase_power: return CB_FAILED; power: switch_eu46_power;
    }
}
# 215 "src/pkp.pnml" 2
# 1 "src/engines/et26.pnml" 1





spriteset(sset_et26_purchase, "gfx/et26.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_et26, "gfx/et26.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_et26_diesel, "gfx/et26.png") { tmpl_sprite_train12(4, 80) }



switch(FEAT_TRAINS, SELF, switch_et26_articulated, extra_callback_info1) {
    1: return item_et26;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_et26_length, position_in_vehid_chain % 2) {
    1: return 3;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_et26_graphics_diesel, current_railtype) {
    ELRL: sset_et26;
    ELOW: sset_et26;
    EMED: sset_et26;
    EHIG: sset_et26;
    HSTR: sset_et26;
    SAAE: sset_et26;
    SBAE: sset_et26;
    SCAE: sset_et26;
    SDAE: sset_et26;
    SEAE: sset_et26;
    SABE: sset_et26;
    SBBE: sset_et26;
    SCBE: sset_et26;
    SDBE: sset_et26;
    SEBE: sset_et26;
    SACE: sset_et26;
    SBCE: sset_et26;
    SCCE: sset_et26;
    RAIL: sset_et26_diesel;
    RLOW: sset_et26_diesel;
    RMED: sset_et26_diesel;
    RHIG: sset_et26_diesel;
    SAAN: sset_et26_diesel;
    SBAN: sset_et26_diesel;
    SCAN: sset_et26_diesel;
    SDAN: sset_et26_diesel;
    SABN: sset_et26_diesel;
    SBBN: sset_et26_diesel;
    SCBN: sset_et26_diesel;
    SDBN: sset_et26_diesel;
    SACN: sset_et26_diesel;
    SBCN: sset_et26_diesel;
    SCCN: sset_et26_diesel;
    railtype("3RDC"): sset_et26;
    CLOW: sset_et26;
    CMED: sset_et26;
    SAAZ: sset_et26;
    SBAZ: sset_et26;
    SCAZ: sset_et26;
    SABZ: sset_et26;
    SBBZ: sset_et26;
    SCBZ: sset_et26;
    SACZ: sset_et26;
    SBCZ: sset_et26;
    SCCZ: sset_et26;
    return sset_et26_diesel;
}
switch(FEAT_TRAINS, SELF, switch_et26_graphics, position_in_vehid_chain % 2) {
    0: return switch_et26_graphics_diesel;
    return sset_dummy;
}
railtypetable {
    RAIL,
    ELRL,
    "RLOW", "RMED", "RHIG",
 "SAAN", "SABN", "SACN",
 "SBAN", "SBBN", "SBCN",
 "SCAN", "SCBN", "SCCN",
 "SDAN", "SDBN",
 "ELOW", "EMED", "EHIG", "HSTR",
 "SAAE", "SABE", "SACE",
 "SBAE", "SBBE", "SBCE",
 "SCAE", "SCBE", "SCCE",
 "SDAE", "SDBE",
 "SEAE", "SEBE",
 "3RDC", "CLOW", "CMED",
 "SAAZ", "SABZ", "SACZ",
 "SBAZ", "SBBZ", "SBCZ",
 "SCAZ", "SCBZ", "SCCZ"
}
switch(FEAT_TRAINS, SELF, switch_et26_visual_effect_diesel, current_railtype) {
    ELRL: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    ELOW: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    EMED: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    EHIG: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    HSTR: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    SAAE: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    SBAE: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    SCAE: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    SDAE: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    SEAE: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    SABE: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    SBBE: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    SCBE: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    SDBE: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    SEBE: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    SACE: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    SBCE: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    SCCE: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    RAIL: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 3, DISABLE_WAGON_POWER);
    RLOW: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 3, DISABLE_WAGON_POWER);
    RMED: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 3, DISABLE_WAGON_POWER);
    RHIG: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 3, DISABLE_WAGON_POWER);
    SAAN: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 3, DISABLE_WAGON_POWER);
    SBAN: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 3, DISABLE_WAGON_POWER);
    SCAN: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 3, DISABLE_WAGON_POWER);
    SDAN: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 3, DISABLE_WAGON_POWER);
    SABN: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 3, DISABLE_WAGON_POWER);
    SBBN: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 3, DISABLE_WAGON_POWER);
    SCBN: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 3, DISABLE_WAGON_POWER);
    SDBN: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 3, DISABLE_WAGON_POWER);
    SACN: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 3, DISABLE_WAGON_POWER);
    SBCN: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 3, DISABLE_WAGON_POWER);
    SCCN: return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 3, DISABLE_WAGON_POWER);
    railtype("3RDC"): return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    CLOW: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    CMED: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    SAAZ: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    SBAZ: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    SCAZ: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    SABZ: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    SBBZ: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    SCBZ: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    SACZ: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    SBCZ: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    SCCZ: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, 3, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, SELF, switch_et26_visual_effect_local, position_in_vehid_chain % 2) {
    0: return switch_et26_visual_effect_diesel;
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_et26_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_3L, string(STR_HEATING_ELECTRIC_POWER_TEXT, 450), string(STR_ENGINE_HEAVY_FREIGHT), string(STR_ET26_TEXT));
 return string(STR_PURCHASE_DESCR_2L, string(STR_ENGINE_HEAVY_FREIGHT), string(STR_ET26_TEXT));
}
switch (FEAT_TRAINS, PARENT, switch_et26_running_cost2, current_speed ) { 0: return 18; return 201; } switch (FEAT_TRAINS, PARENT, switch_et26_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_et26_running_cost2; }
switch(FEAT_TRAINS, PARENT, switch_et26_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_et26_visual_effect_local; }

switch (FEAT_TRAINS, SELF, switch_et26_switch_power, current_railtype) {
    ELRL: return 6705;
    ELOW: return 6705;
    EMED: return 6705;
    EHIG: return 6705;
    HSTR: return 6705;
    SAAE: return 6705;
    SBAE: return 6705;
    SCAE: return 6705;
    SDAE: return 6705;
    SEAE: return 6705;
    SABE: return 6705;
    SBBE: return 6705;
    SCBE: return 6705;
    SDBE: return 6705;
    SEBE: return 6705;
    SACE: return 6705;
    SBCE: return 6705;
    SCCE: return 6705;
    RAIL: return 724;
    RLOW: return 724;
    RMED: return 724;
    RHIG: return 724;
    SAAN: return 724;
    SBAN: return 724;
    SCAN: return 724;
    SDAN: return 724;
    SABN: return 724;
    SBBN: return 724;
    SCBN: return 724;
    SDBN: return 724;
    SACN: return 724;
    SBCN: return 724;
    SCCN: return 724;
    railtype("3RDC"): return 6705;
    CLOW: return 6705;
    CMED: return 6705;
    SAAZ: return 6705;
    SBAZ: return 6705;
    SCAZ: return 6705;
    SABZ: return 6705;
    SBBZ: return 6705;
    SCBZ: return 6705;
    SACZ: return 6705;
    SBCZ: return 6705;
    SCCZ: return 6705;
    return 724;
}

switch (FEAT_TRAINS, SELF, switch_et26_switch_power3, current_railtype) {
    ELRL: return 4694;
    ELOW: return 4694;
    EMED: return 4694;
    EHIG: return 4694;
    HSTR: return 4694;
    SAAE: return 4694;
    SBAE: return 4694;
    SCAE: return 4694;
    SDAE: return 4694;
    SEAE: return 4694;
    SABE: return 4694;
    SBBE: return 4694;
    SCBE: return 4694;
    SDBE: return 4694;
    SEBE: return 4694;
    SACE: return 4694;
    SBCE: return 4694;
    SCCE: return 4694;
    RAIL: return 724;
    RLOW: return 724;
    RMED: return 724;
    RHIG: return 724;
    SAAN: return 724;
    SBAN: return 724;
    SCAN: return 724;
    SDAN: return 724;
    SABN: return 724;
    SBBN: return 724;
    SCBN: return 724;
    SDBN: return 724;
    SACN: return 724;
    SBCN: return 724;
    SCCN: return 724;
    railtype("3RDC"): return 4694;
    CLOW: return 4694;
    CMED: return 4694;
    SAAZ: return 4694;
    SBAZ: return 4694;
    SCAZ: return 4694;
    SABZ: return 4694;
    SBBZ: return 4694;
    SCBZ: return 4694;
    SACZ: return 4694;
    SBCZ: return 4694;
    SCCZ: return 4694;
    return 724;
}
switch (FEAT_TRAINS, SELF, switch_et26_power2, position_in_consist > 0 ) {
 1: return switch_et26_switch_power3;
 return switch_et26_switch_power;
}
switch (FEAT_TRAINS, PARENT, switch_et26_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) {
 item_asf: return 0;
 return switch_et26_power2;
}


item(FEAT_TRAINS, item_et26) {
    property {

        name: string(STR_ET26_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(2019, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 66;
        running_cost_factor: 201;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 120 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 5000 kW;
        running_cost_base: RUNNING_COST_ELECTRIC;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 120 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_DIESEL;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.3505;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

    graphics {
        purchase: sset_et26_purchase;
        additional_text: switch_et26_add_text;
        power: switch_et26_power;
        purchase_power: switch_et26_switch_power;
        default: switch_et26_graphics;
        articulated_part: switch_et26_articulated;
        length: switch_et26_length;
        visual_effect_and_powered: switch_et26_visual_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_et26_running_cost;

    }
}
# 216 "src/pkp.pnml" 2


# 1 "src/engines/enxx-common.pnml" 1






spriteset(sset_enxx_purchase, "gfx/en57.png") { tmpl_sprite_purchase(4, 140) }
spriteset(sset_enxx_head, "gfx/en57.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_enxx_mid, "gfx/en57.png") { tmpl_sprite_train10_offset(4, 60, 1) }
spriteset(sset_enxx_tail, "gfx/en57.png") { tmpl_sprite_train12_offset(4, 100, 1) }
spriteset(sset_enxx_head_open, "gfx/en57.png") { tmpl_sprite_train12(4, 160) }
spriteset(sset_enxx_mid_open, "gfx/en57.png") { tmpl_sprite_train10_offset(4, 200, 1) }
spriteset(sset_enxx_tail_open, "gfx/en57.png") { tmpl_sprite_train12_offset(4, 240, 1) }

spriteset(sset_enxx_or_head, "gfx/en57-orange.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_enxx_or_mid, "gfx/en57-orange.png") { tmpl_sprite_train10_offset(4, 60, 1) }
spriteset(sset_enxx_or_tail, "gfx/en57-orange.png") { tmpl_sprite_train12_offset(4, 100, 1) }
spriteset(sset_enxx_or_head_open, "gfx/en57-orange.png") { tmpl_sprite_train12(4, 160) }
spriteset(sset_enxx_or_mid_open, "gfx/en57-orange.png") { tmpl_sprite_train10_offset(4, 200, 1) }
spriteset(sset_enxx_or_tail_open, "gfx/en57-orange.png") { tmpl_sprite_train12_offset(4, 240, 1) }

spriteset(sset_enxx_ry_head, "gfx/en57-red-yellow.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_enxx_ry_mid, "gfx/en57-red-yellow.png") { tmpl_sprite_train10_offset(4, 60, 1) }
spriteset(sset_enxx_ry_tail, "gfx/en57-red-yellow.png") { tmpl_sprite_train12_offset(4, 100, 1) }
spriteset(sset_enxx_ry_head_open, "gfx/en57-red-yellow.png") { tmpl_sprite_train12(4, 160) }
spriteset(sset_enxx_ry_mid_open, "gfx/en57-red-yellow.png") { tmpl_sprite_train10_offset(4, 200, 1) }
spriteset(sset_enxx_ry_tail_open, "gfx/en57-red-yellow.png") { tmpl_sprite_train12_offset(4, 240, 1) }

spriteset(sset_enxx_by_head, "gfx/en57-blue-yellow.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_enxx_by_mid, "gfx/en57-blue-yellow.png") { tmpl_sprite_train10_offset(4, 60, 1) }
spriteset(sset_enxx_by_tail, "gfx/en57-blue-yellow.png") { tmpl_sprite_train12_offset(4, 100, 1) }
spriteset(sset_enxx_by_head_open, "gfx/en57-blue-yellow.png") { tmpl_sprite_train12(4, 160) }
spriteset(sset_enxx_by_mid_open, "gfx/en57-blue-yellow.png") { tmpl_sprite_train10_offset(4, 200, 1) }
spriteset(sset_enxx_by_tail_open, "gfx/en57-blue-yellow.png") { tmpl_sprite_train12_offset(4, 240, 1) }

spriteset(sset_enxx_br_head, "gfx/en57-black-red.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_enxx_br_mid, "gfx/en57-black-red.png") { tmpl_sprite_train10_offset(4, 60, 1) }
spriteset(sset_enxx_br_tail, "gfx/en57-black-red.png") { tmpl_sprite_train12_offset(4, 100, 1) }
spriteset(sset_enxx_br_head_open, "gfx/en57-black-red.png") { tmpl_sprite_train12(4, 160) }
spriteset(sset_enxx_br_mid_open, "gfx/en57-black-red.png") { tmpl_sprite_train10_offset(4, 200, 1) }
spriteset(sset_enxx_br_tail_open, "gfx/en57-black-red.png") { tmpl_sprite_train12_offset(4, 240, 1) }

spriteset(sset_enxx_km_head, "gfx/en57-k-mazow.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_enxx_km_mid, "gfx/en57-k-mazow.png") { tmpl_sprite_train10_offset(4, 60, 1) }
spriteset(sset_enxx_km_tail, "gfx/en57-k-mazow.png") { tmpl_sprite_train12_offset(4, 100, 1) }
spriteset(sset_enxx_km_head_open, "gfx/en57-k-mazow.png") { tmpl_sprite_train12(4, 160) }
spriteset(sset_enxx_km_mid_open, "gfx/en57-k-mazow.png") { tmpl_sprite_train10_offset(4, 200, 1) }
spriteset(sset_enxx_km_tail_open, "gfx/en57-k-mazow.png") { tmpl_sprite_train12_offset(4, 240, 1) }

spritegroup sgroup_enxx_head {
    loaded: [sset_enxx_head];
    loading: [sset_enxx_head_open];
}
spritegroup sgroup_enxx_mid {
    loaded: [sset_enxx_mid];
    loading: [sset_enxx_mid_open];
}
spritegroup sgroup_enxx_tail {
    loaded: [sset_enxx_tail];
    loading: [sset_enxx_tail_open];
}

spritegroup sgroup_enxx_or_head {
    loaded: [sset_enxx_or_head];
    loading: [sset_enxx_or_head_open];
}
spritegroup sgroup_enxx_or_mid {
    loaded: [sset_enxx_or_mid];
    loading: [sset_enxx_or_mid_open];
}
spritegroup sgroup_enxx_or_tail {
    loaded: [sset_enxx_or_tail];
    loading: [sset_enxx_or_tail_open];
}

spritegroup sgroup_enxx_ry_head {
    loaded: [sset_enxx_ry_head];
    loading: [sset_enxx_ry_head_open];
}
spritegroup sgroup_enxx_ry_mid {
    loaded: [sset_enxx_ry_mid];
    loading: [sset_enxx_ry_mid_open];
}
spritegroup sgroup_enxx_ry_tail {
    loaded: [sset_enxx_ry_tail];
    loading: [sset_enxx_ry_tail_open];
}

spritegroup sgroup_enxx_by_head {
    loaded: [sset_enxx_by_head];
    loading: [sset_enxx_by_head_open];
}
spritegroup sgroup_enxx_by_mid {
    loaded: [sset_enxx_by_mid];
    loading: [sset_enxx_by_mid_open];
}
spritegroup sgroup_enxx_by_tail {
    loaded: [sset_enxx_by_tail];
    loading: [sset_enxx_by_tail_open];
}

spritegroup sgroup_enxx_br_head {
    loaded: [sset_enxx_br_head];
    loading: [sset_enxx_br_head_open];
}
spritegroup sgroup_enxx_br_mid {
    loaded: [sset_enxx_br_mid];
    loading: [sset_enxx_br_mid_open];
}
spritegroup sgroup_enxx_br_tail {
    loaded: [sset_enxx_br_tail];
    loading: [sset_enxx_br_tail_open];
}

spritegroup sgroup_enxx_km_head {
    loaded: [sset_enxx_km_head];
    loading: [sset_enxx_km_head_open];
}
spritegroup sgroup_enxx_km_mid {
    loaded: [sset_enxx_km_mid];
    loading: [sset_enxx_km_mid_open];
}
spritegroup sgroup_enxx_km_tail {
    loaded: [sset_enxx_km_tail];
    loading: [sset_enxx_km_tail_open];
}





switch (FEAT_TRAINS, SELF, switch_enxx_subtype_text2, cargo_subtype) {
    0: return string(STR_SUBTYPE_LIVERY_YEAR_DEP);
    1: return string(STR_SUBTYPE_LIVERY_CLASSIC);
    2: return string(STR_SUBTYPE_ENXX_ORANGE);
    3: return string(STR_SUBTYPE_ENXX_RED_YEL);
    4: return string(STR_SUBTYPE_ENXX_BLU_YEL);
    5: return string(STR_SUBTYPE_ENXX_BLK_RED);
    6: return string(STR_SUBTYPE_ENXX_KM);
    return CB_RESULT_NO_TEXT;
}
switch (FEAT_TRAINS, SELF, switch_enxx_subtype_text, current_year >= 1993) {
    1: return switch_enxx_subtype_text2;
    return CB_RESULT_NO_TEXT;
}
random_switch(FEAT_TRAINS, SELF, switch_enxx_head_age2) {
    10: return sgroup_enxx_head;
    6: return sgroup_enxx_or_head;
}
random_switch(FEAT_TRAINS, SELF, switch_enxx_head_age3) {
    independent: switch_enxx_head_age2;
    3: return sgroup_enxx_head;
    3: return sgroup_enxx_or_head;
    4: return sgroup_enxx_ry_head;
    3: return sgroup_enxx_by_head;
    3: return sgroup_enxx_br_head;
}
switch(FEAT_TRAINS, SELF, switch_enxx_head_year2, (build_year >= 1997) || (date_of_last_service >= date(1997, 1, 1))) {
    1: return switch_enxx_head_age3;
    return switch_enxx_head_age2;
}
switch(FEAT_TRAINS, SELF, switch_enxx_head_year, (build_year >= 1991) || (date_of_last_service >= date(1991, 1, 1))) {
    1: return switch_enxx_head_year2;
    return sgroup_enxx_head;
}
switch(FEAT_TRAINS, SELF, switch_enxx_head, cargo_subtype % 7) {
    0: return switch_enxx_head_year;
    1: return sgroup_enxx_head;
    2: return sgroup_enxx_or_head;
    3: return sgroup_enxx_ry_head;
    4: return sgroup_enxx_by_head;
    5: return sgroup_enxx_br_head;
    6: return sgroup_enxx_km_head;
    return sgroup_enxx_head;
}
random_switch(FEAT_TRAINS, FORWARD_SELF(LOAD_TEMP(0xFF)), switch_enxx_mid_age2) {
    dependent: switch_enxx_head_age2;
    10: return sgroup_enxx_mid;
    6: return sgroup_enxx_or_mid;
}
random_switch(FEAT_TRAINS, FORWARD_SELF(LOAD_TEMP(0xFF)), switch_enxx_mid_age3) {
    dependent: switch_enxx_head_age3;
    3: return sgroup_enxx_mid;
    3: return sgroup_enxx_or_mid;
    4: return sgroup_enxx_ry_mid;
    3: return sgroup_enxx_by_mid;
    3: return sgroup_enxx_br_mid;
}
switch(FEAT_TRAINS, SELF, switch_enxx_mid_year2, (build_year >= 1997) || (date_of_last_service >= date(1997, 1, 1))) {
    1: return switch_enxx_mid_age3;
    return switch_enxx_mid_age2;
}
switch(FEAT_TRAINS, SELF, switch_enxx_mid_year, (build_year >= 1991) || (date_of_last_service >= date(1991, 1, 1))) {
    1: return switch_enxx_mid_year2;
    return sgroup_enxx_mid;
}
switch(FEAT_TRAINS, SELF, switch_enxx_mid, cargo_subtype % 7) {
    0: return switch_enxx_mid_year;
    1: return sgroup_enxx_mid;
    2: return sgroup_enxx_or_mid;
    3: return sgroup_enxx_ry_mid;
    4: return sgroup_enxx_by_mid;
    5: return sgroup_enxx_br_mid;
    6: return sgroup_enxx_km_mid;
    return sgroup_enxx_mid;
}
random_switch(FEAT_TRAINS, FORWARD_SELF(LOAD_TEMP(0xFF)), switch_enxx_tail_age2) {
    dependent: switch_enxx_head_age2;
    10: return sgroup_enxx_tail;
    6: return sgroup_enxx_or_tail;
}
random_switch(FEAT_TRAINS, FORWARD_SELF(LOAD_TEMP(0xFF)), switch_enxx_tail_age3) {
    dependent: switch_enxx_head_age3;
    3: return sgroup_enxx_tail;
    3: return sgroup_enxx_or_tail;
    4: return sgroup_enxx_ry_tail;
    3: return sgroup_enxx_by_tail;
    3: return sgroup_enxx_br_tail;
}
switch(FEAT_TRAINS, SELF, switch_enxx_tail_year2, (build_year >= 1997) || (date_of_last_service >= date(1997, 1, 1))) {
    1: return switch_enxx_tail_age3;
    return switch_enxx_tail_age2;
}
switch(FEAT_TRAINS, SELF, switch_enxx_tail_year, (build_year >= 1991) || (date_of_last_service >= date(1991, 1, 1))) {
    1: return switch_enxx_tail_year2;
    return sgroup_enxx_tail;
}
switch(FEAT_TRAINS, SELF, switch_enxx_tail, cargo_subtype % 7) {
    0: return switch_enxx_tail_year;
    1: return sgroup_enxx_tail;
    2: return sgroup_enxx_or_tail;
    3: return sgroup_enxx_ry_tail;
    4: return sgroup_enxx_by_tail;
    5: return sgroup_enxx_br_tail;
    6: return sgroup_enxx_km_tail;
    return sgroup_enxx_tail;
}

switch(FEAT_TRAINS, SELF, switch_enxx_capacity, cargo_classes) {
    bitmask(CC_MAIL): return int(12*2);
    return 0;
}


item(FEAT_TRAINS, item_enxx_mail_dummy_2) {
    property {

        climates_available: NO_CLIMATE;
        introduction_date: date(1918, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 20;

        refittable_cargo_classes: bitmask(CC_PASSENGERS, CC_MAIL);
        non_refittable_cargo_classes: bitmask();
        loading_speed: 8;
        cost_factor: 0;
        running_cost_factor: 0;
        cargo_age_period: 185;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        cargo_capacity: 1;
        weight: 0;
        length: 2;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }
    graphics {
        default: sset_dummy;
        cargo_capacity: switch_enxx_capacity;
    }
}
# 219 "src/pkp.pnml" 2
# 1 "src/engines/en57.pnml" 1







spriteset(sset_en57_advert, "gfx/en57.png") { tmpl_sprite_advertisement200(4, 280) }


switch(FEAT_TRAINS, SELF, switch_en57_purchase, extra_callback_info1 & 0xFF) {
    0x21: return sset_en57_advert;
    return sset_enxx_purchase;
}
switch(FEAT_TRAINS, SELF, switch_en57_articulated, extra_callback_info1) {
    1..4: return item_en57;
    5: return item_enxx_mail_dummy_2;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_en57_length, position_in_vehid_chain % 5) {
    1: return 4;
    3: return 2;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_en57_tour_capacity, position_in_vehid_chain % 5) {
    0: return 56;
    2: return 76-2;
    4: return 56;
    return 1;
}
switch(FEAT_TRAINS, SELF, switch_en57_pass_capacity, position_in_vehid_chain % 5) {
    0: return 56+26;
    2: return 76+24-2;
    4: return 56+26;
    return 1;
}
switch(FEAT_TRAINS, SELF, switch_en57_capacity, cargo_type_in_veh) {
    TOUR: return switch_en57_tour_capacity;
    return switch_en57_pass_capacity;
}
switch(FEAT_TRAINS, SELF, switch_en57_graphics, STORE_TEMP(position_in_vehid_chain % 5, 0xFF)) {
    0: return switch_enxx_head;
    2: return switch_enxx_mid;
    4: return switch_enxx_tail;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_en57_visual_effect_local, position_in_vehid_chain % 5) {
    2: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, SELF, switch_en57_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_3L, string(STR_HEATING_ELECTRIC_TEXT), string(STR_EN57_TEXT), string(STR_INCOME_LOWER));
    return string(STR_PURCHASE_DESCR_2L, string(STR_EN57_TEXT), string(STR_INCOME_LOWER));
}
switch(FEAT_TRAINS, SELF, switch_en57_can_attach, vehicle_type_id) {
    item_en57: return CB_RESULT_ATTACH_ALLOW;
    item_en71: return CB_RESULT_ATTACH_ALLOW;
    item_ed72: return CB_RESULT_ATTACH_ALLOW;
    item_ed74: return string(STR_ATTACH_DISALLOW_EZT2);
    item_en76: return string(STR_ATTACH_DISALLOW_EZT2);
    item_ed250: return string(STR_ATTACH_DISALLOW_EZT2);
    item_en63a: return string(STR_ATTACH_DISALLOW_EZT2);
    item_ed161: return string(STR_ATTACH_DISALLOW_EZT2);
    return string(STR_ATTACH_DISALLOW_EZT1);
}
switch(FEAT_TRAINS, SELF, switch_en57_start_stop, count_veh_id(item_en57)/5 + count_veh_id(item_en71)/7 + count_veh_id(item_ed72)/7 > 3) {
    1: return string(STR_TRAIN_TOO_LONG, string(STR_EN57_NAME));
    return CB_RESULT_NO_TEXT;
}
switch (FEAT_TRAINS, PARENT, switch_en57_running_cost2, current_speed ) { 0: return 14; return 38; } switch (FEAT_TRAINS, PARENT, switch_en57_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_en57_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_en57_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_en57_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_en57_visual_effect_local; }
# 85 "src/engines/en57.pnml"
item(FEAT_TRAINS, item_en57) {
    property {

        name: string(STR_EN57_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1958, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 25;
        cost_factor: 37;
        running_cost_factor: 38;
        cargo_age_period: int(185*0.84);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 110 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 700 kW;
        running_cost_base: RUNNING_COST_ELECTRIC;
        dual_headed: 0;
        cargo_capacity: int((56*2+76 +26*2+24 +2)/5);
        weight: 126 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_ELECTRIC;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.079;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }
    graphics {
        purchase: switch_en57_purchase;
        additional_text: switch_en57_add_text;
        default: switch_en57_graphics;
        cargo_subtype_text: switch_enxx_subtype_text;
        articulated_part: switch_en57_articulated;
        length: switch_en57_length;
        visual_effect_and_powered: switch_en57_visual_effect;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_en57_capacity;
        can_attach_wagon: switch_en57_can_attach;
        start_stop: switch_en57_start_stop;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_en57_running_cost;
        purchase_power: return CB_FAILED; power: switch_en57_power;
    }
}
# 220 "src/pkp.pnml" 2
# 1 "src/engines/en71.pnml" 1







spriteset(sset_en71_advert, "gfx/en57.png") { tmpl_sprite_advertisement200(4, 300) }


switch(FEAT_TRAINS, SELF, switch_en71_purchase, extra_callback_info1 & 0xFF) {
    0x21: return sset_en71_advert;
    return sset_enxx_purchase;
}
switch(FEAT_TRAINS, SELF, switch_en71_articulated, extra_callback_info1) {
    1..6: return item_en71;
    7: return item_enxx_mail_dummy_2;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_en71_length, position_in_vehid_chain % 7) {
    1: return 4;
    3: return 2;
    5: return 2;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_en71_tour_capacity, position_in_vehid_chain % 7) {
    0: return 56;
    2: return 76-2;
    4: return 76-1;
    6: return 56;
    return 1;
}
switch(FEAT_TRAINS, SELF, switch_en71_pass_capacity, position_in_vehid_chain % 7) {
    0: return 56+26;
    2: return 76+24-2;
    4: return 76+24-1;
    6: return 56+26;
    return 1;
}
switch(FEAT_TRAINS, SELF, switch_en71_capacity, cargo_type_in_veh) {
    TOUR: return switch_en71_tour_capacity;
    return switch_en71_pass_capacity;
}
switch(FEAT_TRAINS, SELF, switch_en71_graphics, STORE_TEMP(position_in_vehid_chain % 7, 0xFF)) {
    0: return switch_enxx_head;
    2: return switch_enxx_mid;
    4: return switch_enxx_mid;
    6: return switch_enxx_tail;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_en71_visual_effect_local, position_in_vehid_chain % 7) {
    2: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    4: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, SELF, switch_en71_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_3L, string(STR_HEATING_ELECTRIC_TEXT), string(STR_EN71_TEXT), string(STR_INCOME_LOWER));
    return string(STR_PURCHASE_DESCR_2L, string(STR_EN71_TEXT), string(STR_INCOME_LOWER));
}
switch(FEAT_TRAINS, SELF, switch_en71_can_attach, vehicle_type_id) {
    item_en57: return CB_RESULT_ATTACH_ALLOW;
    item_en71: return CB_RESULT_ATTACH_ALLOW;
    item_ed72: return CB_RESULT_ATTACH_ALLOW;
    item_ed74: return string(STR_ATTACH_DISALLOW_EZT2);
    item_en76: return string(STR_ATTACH_DISALLOW_EZT2);
    item_ed250: return string(STR_ATTACH_DISALLOW_EZT2);
    item_en63a: return string(STR_ATTACH_DISALLOW_EZT2);
    item_ed161: return string(STR_ATTACH_DISALLOW_EZT2);
    return string(STR_ATTACH_DISALLOW_EZT1);
}
switch(FEAT_TRAINS, SELF, switch_en71_start_stop, count_veh_id(item_en57)/5 + count_veh_id(item_en71)/7 + count_veh_id(item_ed72)/7 > 3) {
    1: return string(STR_TRAIN_TOO_LONG, string(STR_EN71_NAME));
    return CB_RESULT_NO_TEXT;
}
switch (FEAT_TRAINS, PARENT, switch_en71_running_cost2, current_speed ) { 0: return 14; return 61; } switch (FEAT_TRAINS, PARENT, switch_en71_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_en71_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_en71_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_en71_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_en71_visual_effect_local; }
# 90 "src/engines/en71.pnml"
item(FEAT_TRAINS, item_en71) {
    property {

        name: string(STR_EN71_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1976, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 25;
        cost_factor: 54;
        running_cost_factor: 61;
        cargo_age_period: int(185*0.84);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 110 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 1560 kW;
        running_cost_base: RUNNING_COST_ELECTRIC;
        dual_headed: 0;
        cargo_capacity: int((56*2+76*2 +26*2+24*2 +3)/7);
        weight: 182 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_ELECTRIC;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.110;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }
    graphics {
        purchase: switch_en71_purchase;
        additional_text: switch_en71_add_text;
        default: switch_en71_graphics;
        cargo_subtype_text: switch_enxx_subtype_text;
        articulated_part: switch_en71_articulated;
        length: switch_en71_length;
        visual_effect_and_powered: switch_en71_visual_effect;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_en71_capacity;
        can_attach_wagon: switch_en71_can_attach;
        start_stop: switch_en71_start_stop;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_en71_running_cost;
        purchase_power: return CB_FAILED; power: switch_en71_power;
    }
}
# 221 "src/pkp.pnml" 2
# 1 "src/engines/ed72.pnml" 1





spriteset(sset_ed72_purchase, "gfx/ed72.png") { tmpl_sprite_purchase(4, 180) }
spriteset(sset_ed72_advert, "gfx/ed72.png") { tmpl_sprite_advertisement200(4, 360) }

spriteset(sset_ed72_head, "gfx/ed72.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_ed72_mid1, "gfx/ed72.png") { tmpl_sprite_train10_offset(4, 60, 1) }
spriteset(sset_ed72_mid2, "gfx/ed72.png") { tmpl_sprite_train10_offset(4, 100, 1) }
spriteset(sset_ed72_tail, "gfx/ed72.png") { tmpl_sprite_train12_offset(4, 140, 1) }
spriteset(sset_ed72_head_open, "gfx/ed72.png") { tmpl_sprite_train12(4, 200) }
spriteset(sset_ed72_mid1_open, "gfx/ed72.png") { tmpl_sprite_train10_offset(4, 240, 1) }
spriteset(sset_ed72_mid2_open, "gfx/ed72.png") { tmpl_sprite_train10_offset(4, 280, 1) }
spriteset(sset_ed72_tail_open, "gfx/ed72.png") { tmpl_sprite_train12_offset(4, 320, 1) }
spritegroup sgroup_ed72_head {
    loaded: [sset_ed72_head];
    loading: [sset_ed72_head_open];
}
spritegroup sgroup_ed72_mid1 {
    loaded: [sset_ed72_mid1];
    loading: [sset_ed72_mid1_open];
}
spritegroup sgroup_ed72_mid2 {
    loaded: [sset_ed72_mid2];
    loading: [sset_ed72_mid2_open];
}
spritegroup sgroup_ed72_tail {
    loaded: [sset_ed72_tail];
    loading: [sset_ed72_tail_open];
}


switch(FEAT_TRAINS, SELF, switch_ed72_purchase, extra_callback_info1 & 0xFF) {
    0x21: return sset_ed72_advert;
    return sset_ed72_purchase;
}
switch(FEAT_TRAINS, SELF, switch_ed72_articulated, extra_callback_info1) {
    1..6: return item_ed72;
    7: return item_dummy_2;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_ed72_length, position_in_vehid_chain % 7) {
    1: return 4;
    3: return 2;
    5: return 2;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_ed72_tour_capacity, position_in_vehid_chain % 7) {
    0: return 50;
    2: return 70-2;
    4: return 70-1;
    6: return 50;
    return 1;
}
switch(FEAT_TRAINS, SELF, switch_ed72_pass_capacity, position_in_vehid_chain % 7) {
    0: return 50+25;
    2: return 70+24-2;
    4: return 70+24-1;
    6: return 50+25;
    return 1;
}
switch(FEAT_TRAINS, SELF, switch_ed72_capacity, cargo_type_in_veh) {
    TOUR: return switch_ed72_tour_capacity;
    return switch_ed72_pass_capacity;
}
switch(FEAT_TRAINS, SELF, switch_ed72_graphics, STORE_TEMP(position_in_vehid_chain % 7, 0xFF)) {
    0: return sgroup_ed72_head;
    2: return sgroup_ed72_mid1;
    4: return sgroup_ed72_mid2;
    6: return sgroup_ed72_tail;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_ed72_visual_effect_local, position_in_vehid_chain % 7) {
    2: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    4: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch (FEAT_TRAINS, SELF, switch_ed72_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_3L, string(STR_HEATING_ELECTRIC_TEXT), string(STR_ED72_TEXT), string(STR_INCOME_1_CLASS));
    return string(STR_PURCHASE_DESCR_2L, string(STR_ED72_TEXT), string(STR_INCOME_1_CLASS));
}
switch(FEAT_TRAINS, SELF, switch_ed72_can_attach, vehicle_type_id) {
    item_en57: return CB_RESULT_ATTACH_ALLOW;
    item_en71: return CB_RESULT_ATTACH_ALLOW;
    item_ed72: return CB_RESULT_ATTACH_ALLOW;
    item_ed74: return string(STR_ATTACH_DISALLOW_EZT2);
    item_en76: return string(STR_ATTACH_DISALLOW_EZT2);
    item_ed250: return string(STR_ATTACH_DISALLOW_EZT2);
    item_en63a: return string(STR_ATTACH_DISALLOW_EZT2);
    item_ed161: return string(STR_ATTACH_DISALLOW_EZT2);
    return string(STR_ATTACH_DISALLOW_EZT1);
}
switch (FEAT_TRAINS, SELF, switch_ed72_start_stop, count_veh_id(item_en57)/5 + count_veh_id(item_en71)/7 + count_veh_id(item_ed72)/7 > 3) {
    1: return string(STR_TRAIN_TOO_LONG, string(STR_ED72_NAME));
    return CB_RESULT_NO_TEXT;
}
switch (FEAT_TRAINS, PARENT, switch_ed72_running_cost2, current_speed ) { 0: return 18-1; return 64; } switch (FEAT_TRAINS, PARENT, switch_ed72_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ed72_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_ed72_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_ed72_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_ed72_visual_effect_local; }
# 117 "src/engines/ed72.pnml"
item(FEAT_TRAINS, item_ed72) {
    property {

        name: string(STR_ED72_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1993, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 21;
        cost_factor: 57;
        running_cost_factor: 64;
        cargo_age_period: int((50*185*2.82 + (338-50)*185)/338);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 130 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 1400 kW;
        running_cost_base: RUNNING_COST_ELECTRIC;
        dual_headed: 0;
        cargo_capacity: int((50*2+70*2 +25*2+24*2 +3)/7);
        weight: 182 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_ELECTRIC;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.110;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }
    graphics {
        purchase: switch_ed72_purchase;
        additional_text: switch_ed72_add_text;
        default: switch_ed72_graphics;

        articulated_part: switch_ed72_articulated;
        length: switch_ed72_length;
        visual_effect_and_powered: switch_ed72_visual_effect;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_ed72_capacity;
        can_attach_wagon: switch_ed72_can_attach;
        start_stop: switch_ed72_start_stop;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_ed72_running_cost;
        purchase_power: return CB_FAILED; power: switch_ed72_power;
    }
}
# 222 "src/pkp.pnml" 2
# 1 "src/engines/ed74.pnml" 1





spriteset(sset_ed74_purchase, "gfx/ed74.png") { tmpl_sprite_purchase(4, 180) }
spriteset(sset_ed74_advert, "gfx/ed74.png") { tmpl_sprite_advertisement200(4, 360) }

spriteset(sset_ed74_head, "gfx/ed74.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_ed74_mid1, "gfx/ed74.png") { tmpl_sprite_train10_offset(4, 60, 1) }
spriteset(sset_ed74_mid2, "gfx/ed74.png") { tmpl_sprite_train10_offset(4, 100, 1) }
spriteset(sset_ed74_tail, "gfx/ed74.png") { tmpl_sprite_train12_offset(4, 140, 1) }
spriteset(sset_ed74_head_open, "gfx/ed74.png") { tmpl_sprite_train12(4, 200) }
spriteset(sset_ed74_mid1_open, "gfx/ed74.png") { tmpl_sprite_train10_offset(4, 240, 1) }
spriteset(sset_ed74_mid2_open, "gfx/ed74.png") { tmpl_sprite_train10_offset(4, 280, 1) }
spriteset(sset_ed74_tail_open, "gfx/ed74.png") { tmpl_sprite_train12_offset(4, 320, 1) }
spritegroup sgroup_ed74_head {
    loaded: [sset_ed74_head];
    loading: [sset_ed74_head_open];
}
spritegroup sgroup_ed74_mid1 {
    loaded: [sset_ed74_mid1];
    loading: [sset_ed74_mid1_open];
}
spritegroup sgroup_ed74_mid2 {
    loaded: [sset_ed74_mid2];
    loading: [sset_ed74_mid2_open];
}
spritegroup sgroup_ed74_tail {
    loaded: [sset_ed74_tail];
    loading: [sset_ed74_tail_open];
}


switch(FEAT_TRAINS, SELF, switch_ed74_articulated, extra_callback_info1) {
    1..6: return item_ed74;
    7: return item_dummy_2;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_ed74_length, position_in_vehid_chain % 7) {
    1: return 4;
    3: return 2;
    5: return 2;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_ed74_purchase, extra_callback_info1 & 0xFF) {
    0x21: return sset_ed74_advert;
    return sset_ed74_purchase;
}
switch(FEAT_TRAINS, SELF, switch_ed74_graphics, position_in_vehid_chain % 7) {
    0: return sgroup_ed74_head;
    2: return sgroup_ed74_mid1;
    4: return sgroup_ed74_mid2;
    6: return sgroup_ed74_tail;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_ed74_capacity, position_in_vehid_chain % 7) {
    0: return 47-1;
    2: return 54-1;
    4: return 54-1;
    6: return 47;
    return 1;
}
switch(FEAT_TRAINS, SELF, switch_ed74_visual_effect_local, position_in_vehid_chain % 7) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 3, DISABLE_WAGON_POWER);
    5: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, -3, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, SELF, switch_ed74_can_attach, vehicle_type_id) {
    item_en57: return string(STR_ATTACH_DISALLOW_EZT2);
    item_en71: return string(STR_ATTACH_DISALLOW_EZT2);
    item_ed72: return string(STR_ATTACH_DISALLOW_EZT2);
    item_ed74: return CB_RESULT_ATTACH_ALLOW;
    item_en76: return string(STR_ATTACH_DISALLOW_EZT2);
    item_ed250: return string(STR_ATTACH_DISALLOW_EZT2);
    item_en63a: return string(STR_ATTACH_DISALLOW_EZT2);
    item_ed161: return string(STR_ATTACH_DISALLOW_EZT2);
    return string(STR_ATTACH_DISALLOW_EZT1);
}
switch (FEAT_TRAINS, SELF, switch_ed74_start_stop, num_vehs_in_consist / 7) {
    1..2: return CB_RESULT_NO_TEXT;
    return string(STR_TRAIN_TOO_LONG, string(STR_ED74_NAME));
}
switch(FEAT_TRAINS, SELF, switch_ed74_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_3L, string(STR_HEATING_ELECTRIC_TEXT), string(STR_ED74_TEXT), string(STR_INCOME_1_CLASS));
    return string(STR_PURCHASE_DESCR_2L, string(STR_ED74_TEXT), string(STR_INCOME_1_CLASS));
}
switch (FEAT_TRAINS, PARENT, switch_ed74_running_cost2, current_speed ) { 0: return 25; return 89; } switch (FEAT_TRAINS, PARENT, switch_ed74_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ed74_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_ed74_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_ed74_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_ed74_visual_effect_local; }
# 102 "src/engines/ed74.pnml"
item(FEAT_TRAINS, item_ed74) {
    property {
 name: string(STR_ED74_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(2007, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 18;
 cost_factor: 73;
        running_cost_factor: 89;
        cargo_age_period: int((33*185*2.82 + (202-33)*185)/202);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 160 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 2000 kW;
        running_cost_base: RUNNING_COST_ELECTRIC;
        dual_headed: 0;
        cargo_capacity: int((47+54+54+47 +1)/7);
        weight: 159 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_ELECTRIC;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.25*90/159;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

    graphics {
        purchase: switch_ed74_purchase;
        additional_text: switch_ed74_add_text;
        default: switch_ed74_graphics;
        articulated_part: switch_ed74_articulated;
        length: switch_ed74_length;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_ed74_capacity;
        visual_effect_and_powered: switch_ed74_visual_effect;
        can_attach_wagon: switch_ed74_can_attach;
        start_stop: switch_ed74_start_stop;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_ed74_running_cost;
        purchase_power: return CB_FAILED; power: switch_ed74_power;
    }
}
# 223 "src/pkp.pnml" 2
# 1 "src/engines/en76-elf.pnml" 1





spriteset(sset_en76_purchase, "gfx/en76-elf.png") { tmpl_sprite_purchase(4, 140) }
spriteset(sset_en76_advert, "gfx/en76-elf.png") { tmpl_sprite_purchase(4, 280) }

spriteset(sset_en76_head, "gfx/en76-elf.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_en76_mid1, "gfx/en76-elf.png") { tmpl_sprite_train10_offset(4, 60, 1) }
spriteset(sset_en76_mid2, "gfx/en76-elf.png") { tmpl_sprite_train10(4, 60) }
spriteset(sset_en76_tail, "gfx/en76-elf.png") { tmpl_sprite_train10_offset(4, 100, 2) }
spriteset(sset_en76_head_open, "gfx/en76-elf.png") { tmpl_sprite_train10(4, 160) }
spriteset(sset_en76_mid1_open, "gfx/en76-elf.png") { tmpl_sprite_train10_offset(4, 200, 1) }
spriteset(sset_en76_mid2_open, "gfx/en76-elf.png") { tmpl_sprite_train10(4, 200) }
spriteset(sset_en76_tail_open, "gfx/en76-elf.png") { tmpl_sprite_train10_offset(4, 240, 2) }
spritegroup sgroup_en76_head {
    loaded: [sset_en76_head];
    loading: [sset_en76_head_open];
}
spritegroup sgroup_en76_mid1 {
    loaded: [sset_en76_mid1];
    loading: [sset_en76_mid1_open];
}
spritegroup sgroup_en76_mid2 {
    loaded: [sset_en76_mid2];
    loading: [sset_en76_mid2_open];
}
spritegroup sgroup_en76_tail {
    loaded: [sset_en76_tail];
    loading: [sset_en76_tail_open];
}


switch(FEAT_TRAINS, SELF, switch_en76_articulated, extra_callback_info1) {
    1..5: return item_en76;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_en76_length, position_in_vehid_chain % 6) {
    1: return 3;
    4: return 3;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_en76_purchase, extra_callback_info1 & 0xFF) {
    0x21: return sset_en76_advert;
    return sset_en76_purchase;
}
switch(FEAT_TRAINS, SELF, switch_en76_graphics, position_in_vehid_chain % 6) {
    0: return sgroup_en76_head;
    2: return sgroup_en76_mid1;
    3: return sgroup_en76_mid2;
    5: return sgroup_en76_tail;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_en76_tour_capacity, position_in_vehid_chain % 6) {
    0: return 50;
    2: return 50-1;
    3: return 50-1;
    5: return 50;
    return 1;
}
switch(FEAT_TRAINS, SELF, switch_en76_pass_capacity, position_in_vehid_chain % 6) {
    0: return 50+24;
    2: return 50+24-1;
    3: return 50+24-1;
    5: return 50+24;
    return 1;
}
switch(FEAT_TRAINS, SELF, switch_en76_capacity, cargo_type_in_veh) {
    TOUR: return switch_en76_tour_capacity;
    return switch_en76_pass_capacity;
}
switch(FEAT_TRAINS, SELF, switch_en76_visual_effect_local, position_in_vehid_chain % 6) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, 3, DISABLE_WAGON_POWER);
    5: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, -3, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, SELF, switch_en76_can_attach, vehicle_type_id) {
    item_en57: return string(STR_ATTACH_DISALLOW_EZT2);
    item_en71: return string(STR_ATTACH_DISALLOW_EZT2);
    item_ed72: return string(STR_ATTACH_DISALLOW_EZT2);
    item_ed74: return string(STR_ATTACH_DISALLOW_EZT2);
    item_en76: return CB_RESULT_ATTACH_ALLOW;
    item_ed250: return string(STR_ATTACH_DISALLOW_EZT2);
    item_en63a: return string(STR_ATTACH_DISALLOW_EZT2);
    item_ed161: return string(STR_ATTACH_DISALLOW_EZT2);
    return string(STR_ATTACH_DISALLOW_EZT1);
}
switch (FEAT_TRAINS, SELF, switch_en76_start_stop, num_vehs_in_consist / 6) {
    1..3: return CB_RESULT_NO_TEXT;
    return string(STR_TRAIN_TOO_LONG, string(STR_EN76_NAME));
}
switch (FEAT_TRAINS, PARENT, switch_en76_running_cost2, current_speed ) { 0: return 25+1; return 89+1; } switch (FEAT_TRAINS, PARENT, switch_en76_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_en76_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_en76_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_en76_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_en76_visual_effect_local; }
# 108 "src/engines/en76-elf.pnml"
item(FEAT_TRAINS, item_en76) {
    property {

        name: string(STR_EN76_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(2010, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 21;
        cost_factor: 74;
        running_cost_factor: 89+1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 160 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 2000 kW;
        running_cost_base: RUNNING_COST_ELECTRIC;
        dual_headed: 0;
        cargo_capacity: int((50*4 +24*4 +3)/6);
        weight: 135 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_ELECTRIC;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.27*75/135;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

    graphics {
        purchase: switch_en76_purchase;
        default: switch_en76_graphics;
        articulated_part: switch_en76_articulated;
        length: switch_en76_length;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_en76_capacity;
        visual_effect_and_powered: switch_en76_visual_effect;
        can_attach_wagon: switch_en76_can_attach;
        start_stop: switch_en76_start_stop;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_en76_running_cost;
        purchase_power: return CB_FAILED; power: switch_en76_power;
    }
}
# 224 "src/pkp.pnml" 2
# 1 "src/engines/ed250-pendolino.pnml" 1






spriteset(sset_ed250_purchase, "gfx/ed250-pendolino.png") { tmpl_sprite_purchase(4, 1140) }
spriteset(sset_ed250_advert, "gfx/ed250-pendolino.png") { tmpl_sprite_advertisement300(4, 1160) }
# 27 "src/engines/ed250-pendolino.pnml"
spriteset(sset_ed250_1, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(4, 20) } spriteset(sset_ed250_1_open, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(4, 20 +280) } spriteset(sset_ed250_1_cut, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(4, 20 +840) } spriteset(sset_ed250_1_rear, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_rear(4, 20) } spriteset(sset_ed250_1_rear_open, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_rear(4, 20 +280) } spriteset(sset_ed250_1_l, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_l(4, 20 +560) } spriteset(sset_ed250_1_r, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_r(4, 20 +560) } spritegroup sgroup_ed250_1 { loaded: [sset_ed250_1]; loading: [sset_ed250_1_open]; } spritegroup sgroup_ed250_1_rear { loaded: [sset_ed250_1_rear]; loading: [sset_ed250_1_rear_open]; }
spriteset(sset_ed250_7, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(4, 260) } spriteset(sset_ed250_7_open, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(4, 260 +280) } spriteset(sset_ed250_7_cut, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(4, 260 +840) } spriteset(sset_ed250_7_rear, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_rear(4, 260) } spriteset(sset_ed250_7_rear_open, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_rear(4, 260 +280) } spriteset(sset_ed250_7_l, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_l(4, 260 +560) } spriteset(sset_ed250_7_r, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_r(4, 260 +560) } spritegroup sgroup_ed250_7 { loaded: [sset_ed250_7]; loading: [sset_ed250_7_open]; } spritegroup sgroup_ed250_7_rear { loaded: [sset_ed250_7_rear]; loading: [sset_ed250_7_rear_open]; }

spriteset(sset_ed250_2_normal, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(4, 60) } spriteset(sset_ed250_2_normal_open, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(4, 60 +280) } spriteset(sset_ed250_2_normal_cut, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(4, 60 +840) } spriteset(sset_ed250_2_normal_rear, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_rear(4, 60) } spriteset(sset_ed250_2_normal_rear_open, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_rear(4, 60 +280) } spriteset(sset_ed250_2_normal_l, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_l(4, 60 +560) } spriteset(sset_ed250_2_normal_r, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_r(4, 60 +560) } spritegroup sgroup_ed250_2_normal { loaded: [sset_ed250_2_normal]; loading: [sset_ed250_2_normal_open]; } spritegroup sgroup_ed250_2_normal_rear { loaded: [sset_ed250_2_normal_rear]; loading: [sset_ed250_2_normal_rear_open]; }
spriteset(sset_ed250_3_normal, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(4, 100) } spriteset(sset_ed250_3_normal_open, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(4, 100 +280) } spriteset(sset_ed250_3_normal_cut, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(4, 100 +840) } spriteset(sset_ed250_3_normal_rear, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_rear(4, 100) } spriteset(sset_ed250_3_normal_rear_open, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_rear(4, 100 +280) } spriteset(sset_ed250_3_normal_l, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_l(4, 100 +560) } spriteset(sset_ed250_3_normal_r, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_r(4, 100 +560) } spritegroup sgroup_ed250_3_normal { loaded: [sset_ed250_3_normal]; loading: [sset_ed250_3_normal_open]; } spritegroup sgroup_ed250_3_normal_rear { loaded: [sset_ed250_3_normal_rear]; loading: [sset_ed250_3_normal_rear_open]; }
spriteset(sset_ed250_4_normal, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(4, 140) } spriteset(sset_ed250_4_normal_open, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(4, 140 +280) } spriteset(sset_ed250_4_normal_cut, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(4, 140 +840) } spriteset(sset_ed250_4_normal_rear, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_rear(4, 140) } spriteset(sset_ed250_4_normal_rear_open, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_rear(4, 140 +280) } spriteset(sset_ed250_4_normal_l, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_l(4, 140 +560) } spriteset(sset_ed250_4_normal_r, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_r(4, 140 +560) } spritegroup sgroup_ed250_4_normal { loaded: [sset_ed250_4_normal]; loading: [sset_ed250_4_normal_open]; } spritegroup sgroup_ed250_4_normal_rear { loaded: [sset_ed250_4_normal_rear]; loading: [sset_ed250_4_normal_rear_open]; }
spriteset(sset_ed250_5_normal, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(4, 180) } spriteset(sset_ed250_5_normal_open, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(4, 180 +280) } spriteset(sset_ed250_5_normal_cut, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(4, 180 +840) } spriteset(sset_ed250_5_normal_rear, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_rear(4, 180) } spriteset(sset_ed250_5_normal_rear_open, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_rear(4, 180 +280) } spriteset(sset_ed250_5_normal_l, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_l(4, 180 +560) } spriteset(sset_ed250_5_normal_r, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_r(4, 180 +560) } spritegroup sgroup_ed250_5_normal { loaded: [sset_ed250_5_normal]; loading: [sset_ed250_5_normal_open]; } spritegroup sgroup_ed250_5_normal_rear { loaded: [sset_ed250_5_normal_rear]; loading: [sset_ed250_5_normal_rear_open]; }
spriteset(sset_ed250_6_normal, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(4, 220) } spriteset(sset_ed250_6_normal_open, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(4, 220 +280) } spriteset(sset_ed250_6_normal_cut, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(4, 220 +840) } spriteset(sset_ed250_6_normal_rear, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_rear(4, 220) } spriteset(sset_ed250_6_normal_rear_open, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_rear(4, 220 +280) } spriteset(sset_ed250_6_normal_l, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_l(4, 220 +560) } spriteset(sset_ed250_6_normal_r, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_r(4, 220 +560) } spritegroup sgroup_ed250_6_normal { loaded: [sset_ed250_6_normal]; loading: [sset_ed250_6_normal_open]; } spritegroup sgroup_ed250_6_normal_rear { loaded: [sset_ed250_6_normal_rear]; loading: [sset_ed250_6_normal_rear_open]; }

spriteset(sset_ed250_2_rev, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(304, 60) } spriteset(sset_ed250_2_rev_open, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(304, 60 +280) } spriteset(sset_ed250_2_rev_cut, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(304, 60 +840) } spriteset(sset_ed250_2_rev_rear, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_rear(304, 60) } spriteset(sset_ed250_2_rev_rear_open, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_rear(304, 60 +280) } spriteset(sset_ed250_2_rev_l, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_l(304, 60 +560) } spriteset(sset_ed250_2_rev_r, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_r(304, 60 +560) } spritegroup sgroup_ed250_2_rev { loaded: [sset_ed250_2_rev]; loading: [sset_ed250_2_rev_open]; } spritegroup sgroup_ed250_2_rev_rear { loaded: [sset_ed250_2_rev_rear]; loading: [sset_ed250_2_rev_rear_open]; }
spriteset(sset_ed250_3_rev, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(304, 100) } spriteset(sset_ed250_3_rev_open, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(304, 100 +280) } spriteset(sset_ed250_3_rev_cut, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(304, 100 +840) } spriteset(sset_ed250_3_rev_rear, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_rear(304, 100) } spriteset(sset_ed250_3_rev_rear_open, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_rear(304, 100 +280) } spriteset(sset_ed250_3_rev_l, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_l(304, 100 +560) } spriteset(sset_ed250_3_rev_r, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_r(304, 100 +560) } spritegroup sgroup_ed250_3_rev { loaded: [sset_ed250_3_rev]; loading: [sset_ed250_3_rev_open]; } spritegroup sgroup_ed250_3_rev_rear { loaded: [sset_ed250_3_rev_rear]; loading: [sset_ed250_3_rev_rear_open]; }
spriteset(sset_ed250_4_rev, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(304, 140) } spriteset(sset_ed250_4_rev_open, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(304, 140 +280) } spriteset(sset_ed250_4_rev_cut, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(304, 140 +840) } spriteset(sset_ed250_4_rev_rear, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_rear(304, 140) } spriteset(sset_ed250_4_rev_rear_open, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_rear(304, 140 +280) } spriteset(sset_ed250_4_rev_l, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_l(304, 140 +560) } spriteset(sset_ed250_4_rev_r, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_r(304, 140 +560) } spritegroup sgroup_ed250_4_rev { loaded: [sset_ed250_4_rev]; loading: [sset_ed250_4_rev_open]; } spritegroup sgroup_ed250_4_rev_rear { loaded: [sset_ed250_4_rev_rear]; loading: [sset_ed250_4_rev_rear_open]; }
spriteset(sset_ed250_5_rev, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(304, 180) } spriteset(sset_ed250_5_rev_open, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(304, 180 +280) } spriteset(sset_ed250_5_rev_cut, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(304, 180 +840) } spriteset(sset_ed250_5_rev_rear, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_rear(304, 180) } spriteset(sset_ed250_5_rev_rear_open, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_rear(304, 180 +280) } spriteset(sset_ed250_5_rev_l, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_l(304, 180 +560) } spriteset(sset_ed250_5_rev_r, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_r(304, 180 +560) } spritegroup sgroup_ed250_5_rev { loaded: [sset_ed250_5_rev]; loading: [sset_ed250_5_rev_open]; } spritegroup sgroup_ed250_5_rev_rear { loaded: [sset_ed250_5_rev_rear]; loading: [sset_ed250_5_rev_rear_open]; }
spriteset(sset_ed250_6_rev, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(304, 220) } spriteset(sset_ed250_6_rev_open, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(304, 220 +280) } spriteset(sset_ed250_6_rev_cut, "gfx/ed250-pendolino.png") { tmpl_sprite_train12(304, 220 +840) } spriteset(sset_ed250_6_rev_rear, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_rear(304, 220) } spriteset(sset_ed250_6_rev_rear_open, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_rear(304, 220 +280) } spriteset(sset_ed250_6_rev_l, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_l(304, 220 +560) } spriteset(sset_ed250_6_rev_r, "gfx/ed250-pendolino.png") { tmpl_sprite_train12_r(304, 220 +560) } spritegroup sgroup_ed250_6_rev { loaded: [sset_ed250_6_rev]; loading: [sset_ed250_6_rev_open]; } spritegroup sgroup_ed250_6_rev_rear { loaded: [sset_ed250_6_rev_rear]; loading: [sset_ed250_6_rev_rear_open]; }


switch(FEAT_TRAINS, SELF, switch_ed250_articulated, extra_callback_info1) {
    1..13: return item_ed250;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_ed250_length, position_in_vehid_chain % 14) {
    1: return 4;
    3: return 4;
    5: return 4;
    7: return 4;
    9: return 4;
    11: return 4;
    13: return 4;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_ed250_purchase, extra_callback_info1 & 0xFF) {
    0x21: return sset_ed250_advert;
    return sset_ed250_purchase;
}
# 94 "src/engines/ed250-pendolino.pnml"
switch(FEAT_TRAINS, SELF, switch_ed250_1_cut_front, other_veh_is_hidden(1)) { 1: return sset_ed250_1_cut; return sgroup_ed250_1; } switch(FEAT_TRAINS, SELF, switch_ed250_1_extra_front, [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1), STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1), STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1), LOAD_TEMP(1)]) { -2..-1: return sset_ed250_1_l; 1..2: return sset_ed250_1_r; return switch_ed250_1_cut_front; } switch(FEAT_TRAINS, SELF, switch_ed250_1_front, (extra_callback_info1&0xFF)==0) { 1: return switch_ed250_1_extra_front; return sgroup_ed250_1; } switch(FEAT_TRAINS, SELF, switch_ed250_1_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) { 1: return sgroup_ed250_1_rear; return sset_dummy; }
switch(FEAT_TRAINS, SELF, switch_ed250_7_cut_front, other_veh_is_hidden(1)) { 1: return sset_ed250_7_cut; return sgroup_ed250_7; } switch(FEAT_TRAINS, SELF, switch_ed250_7_extra_front, [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1), STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1), STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1), LOAD_TEMP(1)]) { -2..-1: return sset_ed250_7_l; 1..2: return sset_ed250_7_r; return switch_ed250_7_cut_front; } switch(FEAT_TRAINS, SELF, switch_ed250_7_front, (extra_callback_info1&0xFF)==0) { 1: return switch_ed250_7_extra_front; return sgroup_ed250_7; } switch(FEAT_TRAINS, SELF, switch_ed250_7_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) { 1: return sgroup_ed250_7_rear; return sset_dummy; }

switch(FEAT_TRAINS, SELF, switch_ed250_2_normal_cut_front, other_veh_is_hidden(1)) { 1: return sset_ed250_2_normal_cut; return sgroup_ed250_2_normal; } switch(FEAT_TRAINS, SELF, switch_ed250_2_normal_extra_front, [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1), STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1), STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1), LOAD_TEMP(1)]) { -2..-1: return sset_ed250_2_normal_l; 1..2: return sset_ed250_2_normal_r; return switch_ed250_2_normal_cut_front; } switch(FEAT_TRAINS, SELF, switch_ed250_2_normal_front, (extra_callback_info1&0xFF)==0) { 1: return switch_ed250_2_normal_extra_front; return sgroup_ed250_2_normal; } switch(FEAT_TRAINS, SELF, switch_ed250_2_normal_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) { 1: return sgroup_ed250_2_normal_rear; return sset_dummy; }
switch(FEAT_TRAINS, SELF, switch_ed250_3_normal_cut_front, other_veh_is_hidden(1)) { 1: return sset_ed250_3_normal_cut; return sgroup_ed250_3_normal; } switch(FEAT_TRAINS, SELF, switch_ed250_3_normal_extra_front, [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1), STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1), STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1), LOAD_TEMP(1)]) { -2..-1: return sset_ed250_3_normal_l; 1..2: return sset_ed250_3_normal_r; return switch_ed250_3_normal_cut_front; } switch(FEAT_TRAINS, SELF, switch_ed250_3_normal_front, (extra_callback_info1&0xFF)==0) { 1: return switch_ed250_3_normal_extra_front; return sgroup_ed250_3_normal; } switch(FEAT_TRAINS, SELF, switch_ed250_3_normal_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) { 1: return sgroup_ed250_3_normal_rear; return sset_dummy; }
switch(FEAT_TRAINS, SELF, switch_ed250_4_normal_cut_front, other_veh_is_hidden(1)) { 1: return sset_ed250_4_normal_cut; return sgroup_ed250_4_normal; } switch(FEAT_TRAINS, SELF, switch_ed250_4_normal_extra_front, [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1), STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1), STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1), LOAD_TEMP(1)]) { -2..-1: return sset_ed250_4_normal_l; 1..2: return sset_ed250_4_normal_r; return switch_ed250_4_normal_cut_front; } switch(FEAT_TRAINS, SELF, switch_ed250_4_normal_front, (extra_callback_info1&0xFF)==0) { 1: return switch_ed250_4_normal_extra_front; return sgroup_ed250_4_normal; } switch(FEAT_TRAINS, SELF, switch_ed250_4_normal_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) { 1: return sgroup_ed250_4_normal_rear; return sset_dummy; }
switch(FEAT_TRAINS, SELF, switch_ed250_5_normal_cut_front, other_veh_is_hidden(1)) { 1: return sset_ed250_5_normal_cut; return sgroup_ed250_5_normal; } switch(FEAT_TRAINS, SELF, switch_ed250_5_normal_extra_front, [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1), STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1), STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1), LOAD_TEMP(1)]) { -2..-1: return sset_ed250_5_normal_l; 1..2: return sset_ed250_5_normal_r; return switch_ed250_5_normal_cut_front; } switch(FEAT_TRAINS, SELF, switch_ed250_5_normal_front, (extra_callback_info1&0xFF)==0) { 1: return switch_ed250_5_normal_extra_front; return sgroup_ed250_5_normal; } switch(FEAT_TRAINS, SELF, switch_ed250_5_normal_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) { 1: return sgroup_ed250_5_normal_rear; return sset_dummy; }
switch(FEAT_TRAINS, SELF, switch_ed250_6_normal_cut_front, other_veh_is_hidden(1)) { 1: return sset_ed250_6_normal_cut; return sgroup_ed250_6_normal; } switch(FEAT_TRAINS, SELF, switch_ed250_6_normal_extra_front, [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1), STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1), STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1), LOAD_TEMP(1)]) { -2..-1: return sset_ed250_6_normal_l; 1..2: return sset_ed250_6_normal_r; return switch_ed250_6_normal_cut_front; } switch(FEAT_TRAINS, SELF, switch_ed250_6_normal_front, (extra_callback_info1&0xFF)==0) { 1: return switch_ed250_6_normal_extra_front; return sgroup_ed250_6_normal; } switch(FEAT_TRAINS, SELF, switch_ed250_6_normal_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) { 1: return sgroup_ed250_6_normal_rear; return sset_dummy; }

switch(FEAT_TRAINS, SELF, switch_ed250_2_rev_cut_front, other_veh_is_hidden(1)) { 1: return sset_ed250_2_rev_cut; return sgroup_ed250_2_rev; } switch(FEAT_TRAINS, SELF, switch_ed250_2_rev_extra_front, [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1), STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1), STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1), LOAD_TEMP(1)]) { -2..-1: return sset_ed250_2_rev_l; 1..2: return sset_ed250_2_rev_r; return switch_ed250_2_rev_cut_front; } switch(FEAT_TRAINS, SELF, switch_ed250_2_rev_front, (extra_callback_info1&0xFF)==0) { 1: return switch_ed250_2_rev_extra_front; return sgroup_ed250_2_rev; } switch(FEAT_TRAINS, SELF, switch_ed250_2_rev_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) { 1: return sgroup_ed250_2_rev_rear; return sset_dummy; }
switch(FEAT_TRAINS, SELF, switch_ed250_3_rev_cut_front, other_veh_is_hidden(1)) { 1: return sset_ed250_3_rev_cut; return sgroup_ed250_3_rev; } switch(FEAT_TRAINS, SELF, switch_ed250_3_rev_extra_front, [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1), STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1), STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1), LOAD_TEMP(1)]) { -2..-1: return sset_ed250_3_rev_l; 1..2: return sset_ed250_3_rev_r; return switch_ed250_3_rev_cut_front; } switch(FEAT_TRAINS, SELF, switch_ed250_3_rev_front, (extra_callback_info1&0xFF)==0) { 1: return switch_ed250_3_rev_extra_front; return sgroup_ed250_3_rev; } switch(FEAT_TRAINS, SELF, switch_ed250_3_rev_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) { 1: return sgroup_ed250_3_rev_rear; return sset_dummy; }
switch(FEAT_TRAINS, SELF, switch_ed250_4_rev_cut_front, other_veh_is_hidden(1)) { 1: return sset_ed250_4_rev_cut; return sgroup_ed250_4_rev; } switch(FEAT_TRAINS, SELF, switch_ed250_4_rev_extra_front, [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1), STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1), STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1), LOAD_TEMP(1)]) { -2..-1: return sset_ed250_4_rev_l; 1..2: return sset_ed250_4_rev_r; return switch_ed250_4_rev_cut_front; } switch(FEAT_TRAINS, SELF, switch_ed250_4_rev_front, (extra_callback_info1&0xFF)==0) { 1: return switch_ed250_4_rev_extra_front; return sgroup_ed250_4_rev; } switch(FEAT_TRAINS, SELF, switch_ed250_4_rev_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) { 1: return sgroup_ed250_4_rev_rear; return sset_dummy; }
switch(FEAT_TRAINS, SELF, switch_ed250_5_rev_cut_front, other_veh_is_hidden(1)) { 1: return sset_ed250_5_rev_cut; return sgroup_ed250_5_rev; } switch(FEAT_TRAINS, SELF, switch_ed250_5_rev_extra_front, [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1), STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1), STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1), LOAD_TEMP(1)]) { -2..-1: return sset_ed250_5_rev_l; 1..2: return sset_ed250_5_rev_r; return switch_ed250_5_rev_cut_front; } switch(FEAT_TRAINS, SELF, switch_ed250_5_rev_front, (extra_callback_info1&0xFF)==0) { 1: return switch_ed250_5_rev_extra_front; return sgroup_ed250_5_rev; } switch(FEAT_TRAINS, SELF, switch_ed250_5_rev_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) { 1: return sgroup_ed250_5_rev_rear; return sset_dummy; }
switch(FEAT_TRAINS, SELF, switch_ed250_6_rev_cut_front, other_veh_is_hidden(1)) { 1: return sset_ed250_6_rev_cut; return sgroup_ed250_6_rev; } switch(FEAT_TRAINS, SELF, switch_ed250_6_rev_extra_front, [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1), STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1), STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1), LOAD_TEMP(1)]) { -2..-1: return sset_ed250_6_rev_l; 1..2: return sset_ed250_6_rev_r; return switch_ed250_6_rev_cut_front; } switch(FEAT_TRAINS, SELF, switch_ed250_6_rev_front, (extra_callback_info1&0xFF)==0) { 1: return switch_ed250_6_rev_extra_front; return sgroup_ed250_6_rev; } switch(FEAT_TRAINS, SELF, switch_ed250_6_rev_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) { 1: return sgroup_ed250_6_rev_rear; return sset_dummy; }

switch(FEAT_TRAINS, PARENT, switch_ed250_2_front, vehicle_is_reversed) { 1: return switch_ed250_2_rev_front; return switch_ed250_2_normal_front; } switch(FEAT_TRAINS, PARENT, switch_ed250_2_rear, vehicle_is_reversed) { 1: return switch_ed250_2_rev_rear; return switch_ed250_2_normal_rear; }
switch(FEAT_TRAINS, PARENT, switch_ed250_3_front, vehicle_is_reversed) { 1: return switch_ed250_3_rev_front; return switch_ed250_3_normal_front; } switch(FEAT_TRAINS, PARENT, switch_ed250_3_rear, vehicle_is_reversed) { 1: return switch_ed250_3_rev_rear; return switch_ed250_3_normal_rear; }
switch(FEAT_TRAINS, PARENT, switch_ed250_4_front, vehicle_is_reversed) { 1: return switch_ed250_4_rev_front; return switch_ed250_4_normal_front; } switch(FEAT_TRAINS, PARENT, switch_ed250_4_rear, vehicle_is_reversed) { 1: return switch_ed250_4_rev_rear; return switch_ed250_4_normal_rear; }
switch(FEAT_TRAINS, PARENT, switch_ed250_5_front, vehicle_is_reversed) { 1: return switch_ed250_5_rev_front; return switch_ed250_5_normal_front; } switch(FEAT_TRAINS, PARENT, switch_ed250_5_rear, vehicle_is_reversed) { 1: return switch_ed250_5_rev_rear; return switch_ed250_5_normal_rear; }
switch(FEAT_TRAINS, PARENT, switch_ed250_6_front, vehicle_is_reversed) { 1: return switch_ed250_6_rev_front; return switch_ed250_6_normal_front; } switch(FEAT_TRAINS, PARENT, switch_ed250_6_rear, vehicle_is_reversed) { 1: return switch_ed250_6_rev_rear; return switch_ed250_6_normal_rear; }

switch(FEAT_TRAINS, SELF, switch_ed250_graphics, position_in_vehid_chain % 14) {
    0: return switch_ed250_1_front;
    1: return switch_ed250_1_rear;
    2: return switch_ed250_2_front;
    3: return switch_ed250_2_rear;
    4: return switch_ed250_3_front;
    5: return switch_ed250_3_rear;
    6: return switch_ed250_4_front;
    7: return switch_ed250_4_rear;
    8: return switch_ed250_5_front;
    9: return switch_ed250_5_rear;
    10: return switch_ed250_6_front;
    11: return switch_ed250_6_rear;
    12: return switch_ed250_7_front;
    13: return switch_ed250_7_rear;
    return CB_FAILED;
}
switch(FEAT_TRAINS, SELF, switch_ed250_capacity, position_in_vehid_chain % 14) {
    0: return 45-1;
    2: return 56-1;
    4: return 18-1;
    6: return 74-1;
    8: return 74-1;
    10: return 74-1;
    12: return 61-1;
    return 1;
}
switch(FEAT_TRAINS, SELF, switch_ed250_visual_effect_normal, position_in_vehid_chain % 14) {
    9: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, -4, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, SELF, switch_ed250_visual_effect_rev, position_in_vehid_chain % 14) {
    7: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, -4, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, PARENT, switch_ed250_visual_effect_local, vehicle_is_reversed) {
    1: return switch_ed250_visual_effect_rev;
    return switch_ed250_visual_effect_normal;
}
switch(FEAT_TRAINS, SELF, switch_ed250_can_attach, vehicle_type_id) {
    item_en57: return string(STR_ATTACH_DISALLOW_EZT2);
    item_en71: return string(STR_ATTACH_DISALLOW_EZT2);
    item_ed72: return string(STR_ATTACH_DISALLOW_EZT2);
    item_ed74: return string(STR_ATTACH_DISALLOW_EZT2);
    item_en76: return string(STR_ATTACH_DISALLOW_EZT2);
    item_ed250: return CB_RESULT_ATTACH_ALLOW;
    item_en63a: return string(STR_ATTACH_DISALLOW_EZT2);
    item_ed161: return string(STR_ATTACH_DISALLOW_EZT2);
    return string(STR_ATTACH_DISALLOW_EZT1);
}
switch(FEAT_TRAINS, SELF, switch_ed250_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_3L, string(STR_HEATING_ELECTRIC_TEXT), string(STR_ED250_TEXT), string(STR_INCOME_1_CLASS));
    return string(STR_PURCHASE_DESCR_2L, string(STR_ED250_TEXT), string(STR_INCOME_1_CLASS));
}
switch (FEAT_TRAINS, SELF, switch_ed250_start_stop, num_vehs_in_consist / 14) {
    1..2: return CB_RESULT_NO_TEXT;
    return string(STR_TRAIN_TOO_LONG, string(STR_ED250_NAME));
}
switch (FEAT_TRAINS, PARENT, switch_ed250_running_cost2, current_speed ) { 0: return 47; return 235; } switch (FEAT_TRAINS, PARENT, switch_ed250_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ed250_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_ed250_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_ed250_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_ed250_visual_effect_local; }
# 187 "src/engines/ed250-pendolino.pnml"
item(FEAT_TRAINS, item_ed250) {
    property {

        name: string(STR_ED250_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(2013, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 6;
        cost_factor: 255;
        running_cost_factor: 235;
        cargo_age_period: int((45*(185*2.82)*1.9 + (402-45)*185*1.9)/402);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 250 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 5600 kW;
        running_cost_base: RUNNING_COST_ELECTRIC;
        dual_headed: 0;
        cargo_capacity: int((45+56+18+3*74+61 +7)/14);
        weight: 410 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_ELECTRIC;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.26*8/28;
        air_drag_coefficient: 0.06;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }
    graphics {
        purchase: switch_ed250_purchase;
        additional_text: switch_ed250_add_text;
        default: switch_ed250_graphics;
        articulated_part: switch_ed250_articulated;
        length: switch_ed250_length;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_ed250_capacity;
        visual_effect_and_powered: switch_ed250_visual_effect;
        can_attach_wagon: switch_ed250_can_attach;
        start_stop: switch_ed250_start_stop;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_ed250_running_cost;
        purchase_power: return CB_FAILED; power: switch_ed250_power;
    }
}
# 225 "src/pkp.pnml" 2
# 1 "src/engines/en63a-impuls.pnml" 1





spriteset(sset_en63a_purchase, "gfx/en63a-impuls.png") { tmpl_sprite_purchase(4, 140) }
spriteset(sset_en63a_advert, "gfx/en63a-impuls.png") { tmpl_sprite_advertisement200(4, 280) }

spriteset(sset_en63a_head, "gfx/en63a-impuls.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_en63a_mid, "gfx/en63a-impuls.png") { tmpl_sprite_train10_offset(4, 60, 1) }
spriteset(sset_en63a_tail, "gfx/en63a-impuls.png") { tmpl_sprite_train12_offset(4, 100, 3) }
spriteset(sset_en63a_head_open, "gfx/en63a-impuls.png") { tmpl_sprite_train12(4, 160) }
spriteset(sset_en63a_mid_open, "gfx/en63a-impuls.png") { tmpl_sprite_train10_offset(4, 200, 1) }
spriteset(sset_en63a_tail_open, "gfx/en63a-impuls.png") { tmpl_sprite_train12_offset(4, 240, 3) }
spritegroup sgroup_en63a_head {
    loaded: [sset_en63a_head];
    loading: [sset_en63a_head_open];
}
spritegroup sgroup_en63a_mid {
    loaded: [sset_en63a_mid];
    loading: [sset_en63a_mid_open];
}
spritegroup sgroup_en63a_tail {
    loaded: [sset_en63a_tail];
    loading: [sset_en63a_tail_open];
}


alternative_sprites(sset_en63a_head,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/en63a-impuls-x2.png") { tmpl_sprite_train12_x2(8, 40) }
alternative_sprites(sset_en63a_mid,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/en63a-impuls-x2.png") { tmpl_sprite_train10_offset_x2(8, 120, 1) }
alternative_sprites(sset_en63a_tail,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/en63a-impuls-x2.png") { tmpl_sprite_train12_offset_x2(8, 200, 3) }
alternative_sprites(sset_en63a_head_open,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/en63a-impuls-x2.png") { tmpl_sprite_train12_x2(8, 280) }
alternative_sprites(sset_en63a_mid_open,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/en63a-impuls-x2.png") { tmpl_sprite_train10_offset_x2(8, 360, 1) }
alternative_sprites(sset_en63a_tail_open,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/en63a-impuls-x2.png") { tmpl_sprite_train12_offset_x2(8, 440, 3) }



switch(FEAT_TRAINS, SELF, switch_en63a_articulated, extra_callback_info1) {
    1..4: return item_en63a;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_en63a_length, position_in_vehid_chain % 5) {
    1: return 4;
    3: return 3;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_en63a_purchase, extra_callback_info1 & 0xFF) {
    0x21: return sset_en63a_advert;
    return sset_en63a_purchase;
}
switch(FEAT_TRAINS, SELF, switch_en63a_graphics, position_in_vehid_chain % 5) {
    0: return sgroup_en63a_head;
    2: return sgroup_en63a_mid;
    4: return sgroup_en63a_tail;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_en63a_tour_capacity, position_in_vehid_chain % 5) {
    0: return 52;
    2: return 52-2;
    4: return 52;
    return 1;
}
switch(FEAT_TRAINS, SELF, switch_en63a_pass_capacity, position_in_vehid_chain % 5) {
    0: return 52+26;
    2: return 52+26-2;
    4: return 52+26;
    return 1;
}
switch(FEAT_TRAINS, SELF, switch_en63a_capacity, cargo_type_in_veh) {
    TOUR: return switch_en63a_tour_capacity;
    return switch_en63a_pass_capacity;
}
switch(FEAT_TRAINS, SELF, switch_en63a_visual_effect_local, position_in_vehid_chain % 5) {
    0: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 3, DISABLE_WAGON_POWER);
    3: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, -3, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, SELF, switch_en63a_can_attach, vehicle_type_id) {
    item_en57: return string(STR_ATTACH_DISALLOW_EZT2);
    item_en71: return string(STR_ATTACH_DISALLOW_EZT2);
    item_ed72: return string(STR_ATTACH_DISALLOW_EZT2);
    item_ed74: return string(STR_ATTACH_DISALLOW_EZT2);
    item_en76: return string(STR_ATTACH_DISALLOW_EZT2);
    item_ed250: return string(STR_ATTACH_DISALLOW_EZT2);
    item_en63a: return CB_RESULT_ATTACH_ALLOW;
    item_ed161: return string(STR_ATTACH_DISALLOW_EZT2);
    return string(STR_ATTACH_DISALLOW_EZT1);
}
switch (FEAT_TRAINS, SELF, switch_en63a_start_stop, num_vehs_in_consist / 5) {
    1..3: return CB_RESULT_NO_TEXT;
    return string(STR_TRAIN_TOO_LONG, string(STR_EN63A_NAME));
}
switch (FEAT_TRAINS, PARENT, switch_en63a_running_cost2, current_speed ) { 0: return 20; return 69; } switch (FEAT_TRAINS, PARENT, switch_en63a_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_en63a_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_en63a_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_en63a_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_en63a_visual_effect_local; }
# 114 "src/engines/en63a-impuls.pnml"
item(FEAT_TRAINS, item_en63a) {
    property {

        name: string(STR_EN63A_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(2014, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 11;
        cost_factor: 60;
        running_cost_factor: 69;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 160 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 1600 kW;
        running_cost_base: RUNNING_COST_ELECTRIC;
        dual_headed: 0;
        cargo_capacity: int((52*3 +26*3 +2)/5);
        weight: 110 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_ELECTRIC;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.25*75/110;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

    graphics {
        purchase: switch_en63a_purchase;
        default: switch_en63a_graphics;
        articulated_part: switch_en63a_articulated;
        length: switch_en63a_length;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_en63a_capacity;
        visual_effect_and_powered: switch_en63a_visual_effect;
        can_attach_wagon: switch_en63a_can_attach;
        start_stop: switch_en63a_start_stop;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_en63a_running_cost;
        purchase_power: return CB_FAILED; power: switch_en63a_power;
    }
}
# 226 "src/pkp.pnml" 2
# 1 "src/engines/ed161.pnml" 1





spriteset(sset_ed161_purchase, "gfx/ed161.png") { tmpl_sprite_purchase(4, 660) }
spriteset(sset_ed161_advert, "gfx/ed161.png") { tmpl_sprite_advertisement300(4, 680) }

spriteset(sset_ed161_head, "gfx/ed161.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_ed161_mid1, "gfx/ed161.png") { tmpl_sprite_train10_offset(4, 60, 1) }
spriteset(sset_ed161_mid2, "gfx/ed161.png") { tmpl_sprite_train10_offset(4, 100, 1) }
spriteset(sset_ed161_mid3, "gfx/ed161.png") { tmpl_sprite_train10_offset(4, 140, 1) }
spriteset(sset_ed161_mid4, "gfx/ed161.png") { tmpl_sprite_train10_offset(4, 180, 1) }
spriteset(sset_ed161_mid5, "gfx/ed161.png") { tmpl_sprite_train10_offset(4, 220, 1) }
spriteset(sset_ed161_mid6, "gfx/ed161.png") { tmpl_sprite_train10_offset(4, 260, 1) }
spriteset(sset_ed161_tail, "gfx/ed161.png") { tmpl_sprite_train12_offset(4, 300, 1) }
spriteset(sset_ed161_head_open, "gfx/ed161.png") { tmpl_sprite_train12(4, 340) }
spriteset(sset_ed161_mid1_open, "gfx/ed161.png") { tmpl_sprite_train10_offset(4, 380, 1) }
spriteset(sset_ed161_mid2_open, "gfx/ed161.png") { tmpl_sprite_train10_offset(4, 420, 1) }
spriteset(sset_ed161_mid3_open, "gfx/ed161.png") { tmpl_sprite_train10_offset(4, 460, 1) }
spriteset(sset_ed161_mid4_open, "gfx/ed161.png") { tmpl_sprite_train10_offset(4, 500, 1) }
spriteset(sset_ed161_mid5_open, "gfx/ed161.png") { tmpl_sprite_train10_offset(4, 540, 1) }
spriteset(sset_ed161_mid6_open, "gfx/ed161.png") { tmpl_sprite_train10_offset(4, 580, 1) }
spriteset(sset_ed161_tail_open, "gfx/ed161.png") { tmpl_sprite_train12_offset(4, 620, 1) }
spritegroup sgroup_ed161_head {
    loaded: [sset_ed161_head];
    loading: [sset_ed161_head_open];
}
spritegroup sgroup_ed161_mid1 {
    loaded: [sset_ed161_mid1];
    loading: [sset_ed161_mid1_open];
}
spritegroup sgroup_ed161_mid2 {
    loaded: [sset_ed161_mid2];
    loading: [sset_ed161_mid2_open];
}
spritegroup sgroup_ed161_mid3 {
    loaded: [sset_ed161_mid3];
    loading: [sset_ed161_mid3_open];
}
spritegroup sgroup_ed161_mid4 {
    loaded: [sset_ed161_mid4];
    loading: [sset_ed161_mid4_open];
}
spritegroup sgroup_ed161_mid5 {
    loaded: [sset_ed161_mid5];
    loading: [sset_ed161_mid5_open];
}
spritegroup sgroup_ed161_mid6 {
    loaded: [sset_ed161_mid6];
    loading: [sset_ed161_mid6_open];
}
spritegroup sgroup_ed161_tail {
    loaded: [sset_ed161_tail];
    loading: [sset_ed161_tail_open];
}


alternative_sprites(sset_ed161_head,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ed161-x2.png") { tmpl_sprite_train12_x2(8, 40) }
alternative_sprites(sset_ed161_mid1,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ed161-x2.png") { tmpl_sprite_train10_offset_x2(8, 120, 1) }
alternative_sprites(sset_ed161_mid2,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ed161-x2.png") { tmpl_sprite_train10_offset_x2(8, 200, 1) }
alternative_sprites(sset_ed161_mid3,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ed161-x2.png") { tmpl_sprite_train10_offset_x2(8, 280, 1) }
alternative_sprites(sset_ed161_mid4,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ed161-x2.png") { tmpl_sprite_train10_offset_x2(8, 360, 1) }
alternative_sprites(sset_ed161_mid5,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ed161-x2.png") { tmpl_sprite_train10_offset_x2(8, 440, 1) }
alternative_sprites(sset_ed161_mid6,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ed161-x2.png") { tmpl_sprite_train10_offset_x2(8, 520, 1) }
alternative_sprites(sset_ed161_tail,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ed161-x2.png") { tmpl_sprite_train12_offset_x2(8, 600, 1) }
alternative_sprites(sset_ed161_head_open,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ed161-x2.png") { tmpl_sprite_train12_x2(8, 680) }
alternative_sprites(sset_ed161_mid1_open,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ed161-x2.png") { tmpl_sprite_train10_offset_x2(8, 760, 1) }
alternative_sprites(sset_ed161_mid2_open,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ed161-x2.png") { tmpl_sprite_train10_offset_x2(8, 840, 1) }
alternative_sprites(sset_ed161_mid3_open,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ed161-x2.png") { tmpl_sprite_train10_offset_x2(8, 920, 1) }
alternative_sprites(sset_ed161_mid4_open,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ed161-x2.png") { tmpl_sprite_train10_offset_x2(8, 1000, 1) }
alternative_sprites(sset_ed161_mid5_open,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ed161-x2.png") { tmpl_sprite_train10_offset_x2(8, 1080, 1) }
alternative_sprites(sset_ed161_mid6_open,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ed161-x2.png") { tmpl_sprite_train10_offset_x2(8, 1160, 1) }
alternative_sprites(sset_ed161_tail_open,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/ed161-x2.png") { tmpl_sprite_train12_offset_x2(8, 1240, 1) }



switch(FEAT_TRAINS, SELF, switch_ed161_articulated, extra_callback_info1) {
    1..15: return item_ed161;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_ed161_length, position_in_vehid_chain % 16) {
    1: return 4;
    3: return 1;
    5: return 1;
    7: return 1;
    9: return 1;
    11: return 1;
    13: return 1;
    15: return 2;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_ed161_purchase, extra_callback_info1 & 0xFF) {
    0x21: return sset_ed161_advert;
    return sset_ed161_purchase;
}
switch(FEAT_TRAINS, SELF, switch_ed161_graphics, position_in_vehid_chain % 16) {
    0: return sgroup_ed161_head;
    2: return sgroup_ed161_mid1;
    4: return sgroup_ed161_mid2;
    6: return sgroup_ed161_mid3;
    8: return sgroup_ed161_mid4;
    10: return sgroup_ed161_mid5;
    12: return sgroup_ed161_mid6;
    14: return sgroup_ed161_tail;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_ed161_capacity, position_in_vehid_chain % 16) {
    0: return 36-1;
    2: return 28-1;
    4: return 16-1;
    6: return 48-1;
    8: return 60-1;
    10: return 56-1;
    12: return 56-1;
    14: return 56-1;
    return 1;
}
switch(FEAT_TRAINS, SELF, switch_ed161_visual_effect_local, position_in_vehid_chain % 16) {
    14: return visual_effect_and_powered(VISUAL_EFFECT_ELECTRIC, -3, DISABLE_WAGON_POWER);
    return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, SELF, switch_ed161_can_attach, vehicle_type_id) {
    item_en57: return string(STR_ATTACH_DISALLOW_EZT2);
    item_en71: return string(STR_ATTACH_DISALLOW_EZT2);
    item_ed72: return string(STR_ATTACH_DISALLOW_EZT2);
    item_en76: return string(STR_ATTACH_DISALLOW_EZT2);
    item_ed74: return string(STR_ATTACH_DISALLOW_EZT2);
    item_ed250: return string(STR_ATTACH_DISALLOW_EZT2);
    item_en63a: return string(STR_ATTACH_DISALLOW_EZT2);
    item_ed161: return CB_RESULT_ATTACH_ALLOW;
    return string(STR_ATTACH_DISALLOW_EZT1);
}
switch (FEAT_TRAINS, SELF, switch_ed161_start_stop, num_vehs_in_consist / 16) {
    1..2: return CB_RESULT_NO_TEXT;
    return string(STR_TRAIN_TOO_LONG, string(STR_ED161_NAME));
}
switch(FEAT_TRAINS, SELF, switch_ed161_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_3L, string(STR_HEATING_ELECTRIC_TEXT), string(STR_ED161_TEXT), string(STR_INCOME_1_CLASS));
    return string(STR_PURCHASE_DESCR_2L, string(STR_ED161_TEXT), string(STR_INCOME_1_CLASS));
}
switch (FEAT_TRAINS, PARENT, switch_ed161_running_cost2, current_speed ) { 0: return 44; return 145; } switch (FEAT_TRAINS, PARENT, switch_ed161_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ed161_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_ed161_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_ed161_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_ed161_visual_effect_local; }
# 172 "src/engines/ed161.pnml"
item(FEAT_TRAINS, item_ed161) {
    property {

        name: string(STR_ED161_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(2015, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 6;
        cost_factor: 120;
        running_cost_factor: 145;
        cargo_age_period: int((60*(185*2.82)*1.9 + (356-60)*185*1.9)/356);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 200 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 2400 kW;
        running_cost_base: RUNNING_COST_ELECTRIC;
        dual_headed: 0;
        cargo_capacity: int((36+28+16+48+60+56+56+56 +8)/16);
        weight: 249 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_ELECTRIC;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.3*80/249;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

    graphics {
        purchase: switch_ed161_purchase;
        additional_text: switch_ed161_add_text;
        default: switch_ed161_graphics;
        articulated_part: switch_ed161_articulated;
        length: switch_ed161_length;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_ed161_capacity;
        visual_effect_and_powered: switch_ed161_visual_effect;
        can_attach_wagon: switch_ed161_can_attach;
        start_stop: switch_ed161_start_stop;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_ed161_running_cost;
        purchase_power: return CB_FAILED; power: switch_ed161_power;
    }
}
# 227 "src/pkp.pnml" 2


# 1 "src/wagons/gmy.pnml" 1





spriteset(sset_gmy_purchase, "gfx/gmy.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_gmy, "gfx/gmy.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_gmy_open, "gfx/gmy.png") { tmpl_sprite_train(4, 80) }

alternative_sprites(sset_gmy,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/gmy-x2.png") { tmpl_sprite_train_x2(8, 40) }
alternative_sprites(sset_gmy_open,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/gmy-x2.png") { tmpl_sprite_train_x2(8, 120) }

spritegroup sgroup_gmy {
    loaded: [sset_gmy];
    loading: [sset_gmy_open];
}


item(FEAT_TRAINS, item_gmy) {
    property {

        name: string(STR_GMY_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_MAIL, CC_ARMOURED); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: MAIL;
        loading_speed: 6;
        cost_factor: 32;
        running_cost_factor: 3 + 3;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 80 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: int(17*2);
        weight: 19 ton;
        length: 7;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 72;
        retire_early: 16;
    }
}
    graphics {
        purchase: sset_gmy_purchase;
        additional_text: return string(STR_BRAKE_HAND);
        default: sgroup_gmy;
    }
}
# 230 "src/pkp.pnml" 2
# 1 "src/wagons/ghmx.pnml" 1





spriteset(sset_ghmx_purchase, "gfx/ghmx.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_ghmx, "gfx/ghmx.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_ghmx_open, "gfx/ghmx.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_ghmx_cut, "gfx/ghmx.png") { tmpl_sprite_train12(4, 120) }
spritegroup sgroup_ghmx {
    loaded: [sset_ghmx];
    loading: [sset_ghmx_open];
}


switch(FEAT_TRAINS, SELF, switch_ghmx_articulated, extra_callback_info1) {
    1: return item_dummy_3;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_ghmx_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_ghmx_cut;
    return sgroup_ghmx;
}


item(FEAT_TRAINS, item_ghmx) {
    property {

        name: string(STR_GHMX_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1929, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_MAIL, CC_ARMOURED); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: MAIL;
        loading_speed: 7;
        cost_factor: 58;
        running_cost_factor: 8 -1 + 3;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 120 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: int(32*2);
        weight: 41 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 72;
        retire_early: 16;
    }
}
    graphics {
        purchase: sset_ghmx_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: switch_ghmx_graphics;
        articulated_part: switch_ghmx_articulated;
    }
}
# 231 "src/pkp.pnml" 2
# 1 "src/wagons/gmw.pnml" 1





spriteset(sset_gmw_purchase, "gfx/5g.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_gmw, "gfx/5g.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_gmw_open, "gfx/5g.png") { tmpl_sprite_train(4, 80) }
spritegroup sgroup_gmw {
    loaded: [sset_gmw];
    loading: [sset_gmw_open];
}


item(FEAT_TRAINS, item_gmw) {
    property {

        name: string(STR_GMW_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1954, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_MAIL, CC_ARMOURED); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: MAIL;
        loading_speed: 6;
        cost_factor: 46;
        running_cost_factor: 3 + 3;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: int(18*2);
        weight: 25 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 57;
        retire_early: 16;
    }
}
    graphics {
        purchase: sset_gmw_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: sgroup_gmw;
    }
}
# 232 "src/pkp.pnml" 2
# 1 "src/wagons/pdn.pnml" 1





spriteset(sset_pdn_old_purchase, "gfx/101c.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_pdn_new_purchase, "gfx/101c.png") { tmpl_sprite_purchase(4, 120) }
spriteset(sset_pdn_old, "gfx/101c.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_pdn_new, "gfx/101c.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_pdn_old_open, "gfx/101c.png") { tmpl_sprite_train12(4, 140) }
spriteset(sset_pdn_new_open, "gfx/101c.png") { tmpl_sprite_train12(4, 180) }
spriteset(sset_pdn_old_cut, "gfx/101c.png") { tmpl_sprite_train12(4, 220) }
spriteset(sset_pdn_new_cut, "gfx/101c.png") { tmpl_sprite_train12(4, 260) }
spritegroup sgroup_pdn_old {
    loaded: [sset_pdn_old];
    loading: [sset_pdn_old_open];
}
spritegroup sgroup_pdn_new {
    loaded: [sset_pdn_new];
    loading: [sset_pdn_new_open];
}



switch(FEAT_TRAINS, SELF, switch_pdn_purchase, build_year >= 1993) {
    1: return sset_pdn_new_purchase;
    return sset_pdn_old_purchase;
}
switch(FEAT_TRAINS, SELF, switch_pdn_articulated, extra_callback_info1) {
    1: return item_dummy_3;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_pdn_old_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_pdn_old_cut;
    return sgroup_pdn_old;
}
switch(FEAT_TRAINS, SELF, switch_pdn_new_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_pdn_new_cut;
    return sgroup_pdn_new;
}
switch(FEAT_TRAINS, SELF, switch_pdn_graphics, build_year >= 1993) {
    1: return switch_pdn_new_graphics;
    return switch_pdn_old_graphics;
}


item(FEAT_TRAINS, item_pdn) {
    property {

        name: string(STR_PDN_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1963, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_MAIL, CC_ARMOURED); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: MAIL;
        loading_speed: 7;
        cost_factor: 68;
        running_cost_factor: 8 + 3;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 160 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: int(36*2);
        weight: 37 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

    graphics {
        purchase: switch_pdn_purchase;
  additional_text: return string(STR_BRAKE_AIR);
        default: switch_pdn_graphics;
        articulated_part: switch_pdn_articulated;
    }
}
# 233 "src/pkp.pnml" 2
# 1 "src/wagons/ohxt.pnml" 1





spriteset(sset_ohxt_purchase, "gfx/ohxt.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_ohxt, "gfx/ohxt.png") { tmpl_sprite_train10(4, 20) }


switch(FEAT_TRAINS, SELF, switch_ohxt_articulated, extra_callback_info1) {
    1: return item_dummy_1;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}

item(FEAT_TRAINS, item_ohxt) {
    property {

        name: string(STR_OHXT_NAME);
        climates_available: bitmask(CLIMATE_ARCTIC);
        introduction_date: date(1930, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 5;
        cost_factor: 56;
        running_cost_factor: 8 +12;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 140 km/h;
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 0;
        weight: 32 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_STEAM, -1, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 72;
        retire_early: 16;
    }
}
    graphics {
        purchase: sset_ohxt_purchase;
        additional_text: return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_AIR), string(STR_HEATING_STEAM_POWER_TEXT, 270));
        default: sset_ohxt;
        articulated_part: switch_ohxt_articulated;
    }
}
# 234 "src/pkp.pnml" 2
# 1 "src/wagons/fg.pnml" 1





spriteset(sset_fg_purchase, "gfx/fg.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_fg, "gfx/fg.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_fg_open, "gfx/fg.png") { tmpl_sprite_train(4, 80) }

alternative_sprites(sset_fg,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/fg-x2.png") { tmpl_sprite_train_x2(8, 40) }
alternative_sprites(sset_fg_open,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/fg-x2.png") { tmpl_sprite_train_x2(8, 120) }

spritegroup sgroup_fg {
    loaded: [sset_fg];
    loading: [sset_fg_open];
}


switch(FEAT_TRAINS, SELF, switch_fg_articulated, extra_callback_info1) {
    1: return item_goods_dummy_1;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}


item(FEAT_TRAINS, item_goods_dummy_1) {
    property {

        climates_available: NO_CLIMATE;
        introduction_date: date(1918, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;

        refittable_cargo_classes: bitmask();
        non_refittable_cargo_classes: bitmask();
        cargo_allow_refit: [GOOD];
        default_cargo_type: GOOD;
        loading_speed: 3;
        cost_factor: 0;
        running_cost_factor: 0;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        cargo_capacity: 14;
        weight: 0;
        length: 1;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }
    graphics {
        default: sset_dummy;
    }
}


item(FEAT_TRAINS, item_fg) {
    property {

        name: string(STR_FG_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1925, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;

        refittable_cargo_classes: bitmask();
        non_refittable_cargo_classes: bitmask();
        cargo_allow_refit: [MAIL];
        default_cargo_type: MAIL;
        loading_speed: 4;
        cost_factor: 36;
        running_cost_factor: 3 +1 + 3;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 90 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: int(8*2);
        weight: 19 ton;
        length: 7;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 68;
        retire_early: 16;
    }
}
    graphics {
        purchase: sset_fg_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: sgroup_fg;
        articulated_part: switch_fg_articulated;
    }
}
# 235 "src/pkp.pnml" 2
# 1 "src/wagons/fy.pnml" 1





spriteset(sset_fy_purchase, "gfx/fy.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_fy, "gfx/fy.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_fy_open, "gfx/fy.png") { tmpl_sprite_train(4, 80) }






spritegroup sgroup_fy {
    loaded: [sset_fy];
    loading: [sset_fy_open];
}


item(FEAT_TRAINS, item_fy) {
    property {

        name: string(STR_FY_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: [GOOD]; cargo_disallow_refit: []; default_cargo_type: GOOD;
        loading_speed: 5;
        cost_factor: 32;
        running_cost_factor: 3 + 3;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 80 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 24;
        weight: 16 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0, 3);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 67;
        retire_early: 16;
    }
}
    graphics {
        purchase: sset_fy_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: sgroup_fy;
    }
}
# 236 "src/pkp.pnml" 2
# 1 "src/wagons/fhx.pnml" 1





spriteset(sset_fhx_purchase, "gfx/lilpop-b3.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_fhx, "gfx/lilpop-b3.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_fhx_open, "gfx/lilpop-b3.png") { tmpl_sprite_train10(4, 80) }
spriteset(sset_fhx_cut, "gfx/lilpop-b3.png") { tmpl_sprite_train10(4, 120) }
spritegroup sgroup_fhx {
    loaded: [sset_fhx];
    loading: [sset_fhx_open];
}


switch(FEAT_TRAINS, SELF, switch_fhx_articulated, extra_callback_info1) {
    1: return item_dummy_2;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_fhx_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_fhx_cut;
    return sgroup_fhx;
}


item(FEAT_TRAINS, item_fhx) {
    property {

        name: string(STR_FHX_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1932, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: [GOOD]; cargo_disallow_refit: []; default_cargo_type: GOOD;
        loading_speed: 6;
        cost_factor: 52;
        running_cost_factor: 5 -1 + 3;
        cargo_age_period: 185;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 34;
        weight: 38 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0, 3);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 66;
        retire_early: 16;
    }
}
    graphics {
        purchase: sset_fhx_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: switch_fhx_graphics;
        articulated_part: switch_fhx_articulated;
        colour_mapping: switch_lights_wagon_olive_2;
    }
}
# 237 "src/pkp.pnml" 2
# 1 "src/wagons/dhxt.pnml" 1





spriteset(sset_dhxt_purchase, "gfx/1f.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_dhxt, "gfx/1f.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_dhxt_open, "gfx/1f.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_dhxt_cut, "gfx/1f.png") { tmpl_sprite_train12(4, 120) }
spritegroup sgroup_dhxt {
    loaded: [sset_dhxt];
    loading: [sset_dhxt_open];
}


switch(FEAT_TRAINS, SELF, switch_dhxt_articulated, extra_callback_info1) {
    1: return item_dummy_3;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_dhxt_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_dhxt_cut;
    return sgroup_dhxt;
}


item(FEAT_TRAINS, item_dhxt) {
    property {

        name: string(STR_DHXT_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1954, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: [GOOD]; cargo_disallow_refit: []; default_cargo_type: GOOD;
        loading_speed: 6;
        cost_factor: 62;
        running_cost_factor: 8 -1 + 3;
        cargo_age_period: int(185*1.41);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 120 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 36;
        weight: 41 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0, 3);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 66;
        retire_early: 16;
    }
}
    graphics {
        purchase: sset_dhxt_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: switch_dhxt_graphics;
        articulated_part: switch_dhxt_articulated;
        colour_mapping: switch_lights_wagon_olive_2;
    }
}
# 238 "src/pkp.pnml" 2
# 1 "src/wagons/dwxz.pnml" 1





spriteset(sset_dwxz_old_purchase, "gfx/209c.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_dwxz_new_purchase, "gfx/209c.png") { tmpl_sprite_purchase(4, 120) }
spriteset(sset_dwxz_old, "gfx/209c.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_dwxz_new, "gfx/209c.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_dwxz_old_open, "gfx/209c.png") { tmpl_sprite_train12(4, 140) }
spriteset(sset_dwxz_new_open, "gfx/209c.png") { tmpl_sprite_train12(4, 180) }
spriteset(sset_dwxz_old_cut, "gfx/209c.png") { tmpl_sprite_train12(4, 220) }
spriteset(sset_dwxz_new_cut, "gfx/209c.png") { tmpl_sprite_train12(4, 260) }
spritegroup sgroup_dwxz_old {
    loaded: [sset_dwxz_old];
    loading: [sset_dwxz_old_open];
}
spritegroup sgroup_dwxz_new {
    loaded: [sset_dwxz_new];
    loading: [sset_dwxz_new_open];
}



switch(FEAT_TRAINS, SELF, switch_dwxz_purchase, build_year >= 1993) {
    1: return sset_dwxz_new_purchase;
    return sset_dwxz_old_purchase;
}
switch(FEAT_TRAINS, SELF, switch_dwxz_articulated, extra_callback_info1) {
    1: return item_dummy_3;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_dwxz_old_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_dwxz_old_cut;
    return sgroup_dwxz_old;
}
switch(FEAT_TRAINS, SELF, switch_dwxz_new_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_dwxz_new_cut;
    return sgroup_dwxz_new;
}
switch(FEAT_TRAINS, SELF, switch_dwxz_graphics, build_year >= 1993) {
    1: return switch_dwxz_new_graphics;
    return switch_dwxz_old_graphics;
}
switch(FEAT_TRAINS, SELF, switch_dwxz_colour_mapping, build_year >= 1993) {
    1: return switch_lights_wagon_brown_2;
    return switch_lights_wagon_olive_2;
}


item(FEAT_TRAINS, item_dwxz) {
    property {

        name: string(STR_DWXZ_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1975, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: [GOOD]; cargo_disallow_refit: []; default_cargo_type: GOOD;
        loading_speed: 7;
        cost_factor: 74;
        running_cost_factor: 8 + 3;
        cargo_age_period: int(185*1.41);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 160 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 36;
        weight: 43 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0, 3);
    }

    graphics {
        purchase: switch_dwxz_purchase;
  additional_text: return string(STR_BRAKE_AIR);
        default: switch_dwxz_graphics;
        articulated_part: switch_dwxz_articulated;
        colour_mapping: switch_dwxz_colour_mapping;
    }
}
# 239 "src/pkp.pnml" 2
# 1 "src/wagons/bdwxzd.pnml" 1





spriteset(sset_bdwxzd_purchase, "gfx/609a.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_bdwxzd, "gfx/609a.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_bdwxzd_ic, "gfx/609a.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_bdwxzd_open, "gfx/609a.png") { tmpl_sprite_train12(4, 120) }
spriteset(sset_bdwxzd_ic_open, "gfx/609a.png") { tmpl_sprite_train12(4, 160) }
spriteset(sset_bdwxzd_cut, "gfx/609a.png") { tmpl_sprite_train12(4, 200) }
spriteset(sset_bdwxzd_ic_cut, "gfx/609a.png") { tmpl_sprite_train12(4, 240) }
spritegroup sgroup_bdwxzd {
    loaded: [sset_bdwxzd];
    loading: [sset_bdwxzd_open];
}
spritegroup sgroup_bdwxzd_ic {
    loaded: [sset_bdwxzd_ic];
    loading: [sset_bdwxzd_ic_open];
}


switch(FEAT_TRAINS, SELF, switch_bdwxzd_articulated, extra_callback_info1) {
    1: return item_goods_dummy_3;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_bdwxzd_graphics_classic, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_bdwxzd_cut;
    return sgroup_bdwxzd;
}
switch(FEAT_TRAINS, SELF, switch_bdwxzd_graphics_ic, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_bdwxzd_ic_cut;
    return sgroup_bdwxzd_ic;
}
switch(FEAT_TRAINS, PARENT, switch_bdwxzd_graphics, bitmask_consist_info & bitmask(2)) {
    bitmask(2): return switch_bdwxzd_graphics_ic;
    return switch_bdwxzd_graphics_classic;
}
switch (FEAT_TRAINS, SELF, switch_bdwxzd_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_3L, string(STR_BRAKE_AIR), string(STR_HEATING_ST_EL_TEXT), string(STR_INCOME_LOWER));
    return string(STR_PURCHASE_DESCR_3L, string(STR_BRAKE_AIR), string(STR_BH_BON_TEXT), string(STR_INCOME_LOWER));
}


item(FEAT_TRAINS, item_goods_dummy_3) {
    property {

        climates_available: NO_CLIMATE;
        introduction_date: date(1918, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;

        refittable_cargo_classes: bitmask();
        non_refittable_cargo_classes: bitmask();
        cargo_allow_refit: [GOOD];
        default_cargo_type: GOOD;
        loading_speed: 4;
        cost_factor: 0;
        running_cost_factor: 0;
        cargo_age_period: int(185*1.41);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        cargo_capacity: 24;
        weight: 0;
        length: 3;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }
    graphics {
        default: sset_dummy;
    }
}







item(FEAT_TRAINS, item_bdwxzd) {
    property {

        name: string(STR_BDWXZD_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1981, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 6;
        cost_factor: 76;
        running_cost_factor: 5 +1 + 3;
        cargo_age_period: int(185*0.84);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 160 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 32;
        weight: 43 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0, 3);
    }

    graphics {
        purchase: sset_bdwxzd_purchase;
        additional_text: switch_bdwxzd_add_text;
        default: switch_bdwxzd_graphics;
        articulated_part: switch_bdwxzd_articulated;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: return CB_FAILED;
        colour_mapping: switch_lights_wagon_brown_2;
    }
}
# 240 "src/pkp.pnml" 2

# 1 "src/wagons/bcy.pnml" 1





spriteset(sset_bcy_purchase, "gfx/bcy.png") { tmpl_sprite_purchase(4, 100) }
spriteset(sset_bcy, "gfx/bcy.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_bcy_open, "gfx/bcy.png") { tmpl_sprite_train(4, 120) }

alternative_sprites(sset_bcy,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/bcy-x2.png") { tmpl_sprite_train_x2(8, 40) }
alternative_sprites(sset_bcy_open,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/bcy-x2.png") { tmpl_sprite_train_x2(8, 200) }

spritegroup sgroup_bcy {
    loaded: [sset_bcy];
    loading: [sset_bcy_open];
}

spriteset(sset_bcyh_purchase, "gfx/bcy.png") { tmpl_sprite_purchase(124, 100) }
spriteset(sset_bcyh, "gfx/bcy.png") { tmpl_sprite_train(4, 60) }
spriteset(sset_bcyh_open, "gfx/bcy.png") { tmpl_sprite_train(4, 160) }

alternative_sprites(sset_bcyh,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/bcy-x2.png") { tmpl_sprite_train_x2(8, 120) }
alternative_sprites(sset_bcyh_open,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/bcy-x2.png") { tmpl_sprite_train_x2(8, 280) }

spritegroup sgroup_bcyh {
    loaded: [sset_bcyh];
    loading: [sset_bcyh_open];
}


switch (FEAT_TRAINS, SELF, switch_bcy_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_NONE), string(STR_HEATING_STEAM_TEXT));
    return string(STR_BRAKE_NONE);
}


switch (FEAT_TRAINS, SELF, switch_bcyh_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_HAND), string(STR_HEATING_STEAM_TEXT));
    return string(STR_BRAKE_HAND);
}
switch (FEAT_TRAINS, PARENT, switch_BCYH_running_cost, vehicle_is_in_depot & (current_speed == 0) ) { 1: return 3; return 3 +3; }







item(FEAT_TRAINS, item_bcy) {
    property {

        name: string(STR_BCY_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 8;
        cost_factor: 34;
        running_cost_factor: 2;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 80 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 48;
        weight: 20 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 72;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_bcy_purchase;
        additional_text: switch_bcy_add_text;
        default: sgroup_bcy;
        purchase_cargo_capacity: return 48;
        cargo_capacity: return 48;
    }
}


item(FEAT_TRAINS, item_bcyh) {
    property {

        name: string(STR_BCYH_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 8;
        cost_factor: 36;


        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 80 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 48;
        weight: 21 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 72;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_bcyh_purchase;
        additional_text: switch_bcyh_add_text;
        default: sgroup_bcyh;
        purchase_cargo_capacity: return 48;
        cargo_capacity: return 48;
        purchase_running_cost_factor: return 3 +3; running_cost_factor: switch_BCYH_running_cost;
    }
}
# 242 "src/pkp.pnml" 2
# 1 "src/wagons/bci.pnml" 1





spriteset(sset_bci_purchase, "gfx/bci.png") { tmpl_sprite_purchase(4, 100) }
spriteset(sset_bci1, "gfx/bci.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_bci2, "gfx/bci.png") { tmpl_sprite_train(4, 60) }
spriteset(sset_bci1_open, "gfx/bci.png") { tmpl_sprite_train(4, 120) }
spriteset(sset_bci2_open, "gfx/bci.png") { tmpl_sprite_train(4, 160) }
spritegroup sgroup_bci1 {
    loaded: [sset_bci1];
    loading: [sset_bci1_open];
}
spritegroup sgroup_bci2 {
    loaded: [sset_bci2];
    loading: [sset_bci2_open];
}


random_switch(FEAT_TRAINS, SELF, switch_bci_graphics) {
    5: return sgroup_bci1;
    3: return sgroup_bci2;
}
switch (FEAT_TRAINS, SELF, switch_bci_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_AIR), string(STR_HEATING_STEAM_TEXT));
 return string(STR_BRAKE_AIR);
}







item(FEAT_TRAINS, item_bci) {
    property {

        name: string(STR_BCI_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1939, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 9;
        cost_factor: 38;
        running_cost_factor: 3;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 90 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 58;
        weight: 19 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
 }
} else {
    property {
        model_life: 62;
  retire_early: 16;
 }
}
    graphics {
        purchase: sset_bci_purchase;
  additional_text: switch_bci_add_text;
        default: switch_bci_graphics;
        purchase_cargo_capacity: return 58;
        cargo_capacity: return 58;
    }
}
# 243 "src/pkp.pnml" 2
# 1 "src/wagons/bh-bonanza.pnml" 1





spriteset(sset_bh_bon_old_purchase, "gfx/120a.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_bh_bon_new_purchase, "gfx/120a.png") { tmpl_sprite_purchase(4, 120) }
spriteset(sset_bh_bon_old, "gfx/120a.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_bh_bon_new, "gfx/120a.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_bh_bon_old_open, "gfx/120a.png") { tmpl_sprite_train12(4, 140) }
spriteset(sset_bh_bon_new_open, "gfx/120a.png") { tmpl_sprite_train12(4, 180) }
spriteset(sset_bh_bon_old_cut, "gfx/120a.png") { tmpl_sprite_train12(4, 220) }
spriteset(sset_bh_bon_new_cut, "gfx/120a.png") { tmpl_sprite_train12(4, 260) }
spritegroup sgroup_bh_bon_old {
    loaded: [sset_bh_bon_old];
    loading: [sset_bh_bon_old_open];
}
spritegroup sgroup_bh_bon_new {
    loaded: [sset_bh_bon_new];
    loading: [sset_bh_bon_new_open];
}
# 35 "src/wagons/bh-bonanza.pnml"
switch(FEAT_TRAINS, SELF, switch_bh_bon_purchase, build_year >= 1993) {
    1: return sset_bh_bon_new_purchase;
    return sset_bh_bon_old_purchase;
}
switch(FEAT_TRAINS, SELF, switch_bh_bon_articulated, extra_callback_info1) {
    1: return item_bh_mail_dummy_3;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_bh_bon_old_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_bh_bon_old_cut;
    return sgroup_bh_bon_old;
}
switch(FEAT_TRAINS, SELF, switch_bh_bon_new_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_bh_bon_new_cut;
    return sgroup_bh_bon_new;
}
switch(FEAT_TRAINS, PARENT, switch_bh_bon_engine_graphics, build_year >= 2003) {
    1: return switch_bh_bon_new_graphics;
    return switch_bh_bon_old_graphics;
}
switch(FEAT_TRAINS, SELF, switch_bh_bon_graphics, build_year >= 1993) {
    1: return switch_bh_bon_new_graphics;
    return switch_bh_bon_engine_graphics;
}
switch(FEAT_TRAINS, SELF, switch_bh_bon_capacity, cargo_type_in_veh) {
    TOUR: return 80-24;
    return 80-24 +8;
}
switch (FEAT_TRAINS, SELF, switch_bh_bon_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_4L, string(STR_BRAKE_AIR), string(STR_HEATING_ST_EL_TEXT), string(STR_BH_BON_TEXT), string(STR_INCOME_LOWER));
    return string(STR_PURCHASE_DESCR_3L, string(STR_BRAKE_AIR), string(STR_BH_BON_TEXT), string(STR_INCOME_LOWER));
}


item(FEAT_TRAINS, item_bh_bon) {
    property {

        name: string(STR_BH_BON_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1973, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 11;
        cost_factor: (68-3);
        running_cost_factor: 5;
        cargo_age_period: int(185*0.84);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 140 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 80-24 +8;
        weight: 39 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

    graphics {
        purchase: switch_bh_bon_purchase;
        additional_text: switch_bh_bon_add_text;
        default: switch_bh_bon_graphics;
        articulated_part: switch_bh_bon_articulated;
        purchase_cargo_capacity: return 80-24 +8;
        cargo_capacity: switch_bh_bon_capacity;
        colour_mapping: switch_lights_wagon_green_2;
    }
}
# 244 "src/pkp.pnml" 2
# 1 "src/wagons/bipa.pnml" 1





spriteset(sset_bipa_purchase, "gfx/bipa.png") { tmpl_sprite_purchase(4, 180) }
spriteset(sset_bipa4_head, "gfx/bipa.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_bipa4_mid1, "gfx/bipa.png") { tmpl_sprite_train10_offset(4, 60, 1) }
spriteset(sset_bipa4_mid2, "gfx/bipa.png") { tmpl_sprite_train10(4, 100) }
spriteset(sset_bipa4_tail, "gfx/bipa.png") { tmpl_sprite_train10_offset(4, 140, 2) }
spriteset(sset_bipa4_head_open, "gfx/bipa.png") { tmpl_sprite_train10(4, 200) }
spriteset(sset_bipa4_mid1_open, "gfx/bipa.png") { tmpl_sprite_train10_offset(4, 240, 1) }
spriteset(sset_bipa4_mid2_open, "gfx/bipa.png") { tmpl_sprite_train10(4, 280) }
spriteset(sset_bipa4_tail_open, "gfx/bipa.png") { tmpl_sprite_train10_offset(4, 320, 2) }
spriteset(sset_bipa23_head, "gfx/bipa.png") { tmpl_sprite_train10(4, 380) }
spriteset(sset_bipa23_mid, "gfx/bipa.png") { tmpl_sprite_train10(4, 420) }
spriteset(sset_bipa23_tail, "gfx/bipa.png") { tmpl_sprite_train10_offset(4, 460, 2) }
spriteset(sset_bipa23_head_open, "gfx/bipa.png") { tmpl_sprite_train10(4, 500) }
spriteset(sset_bipa23_mid_open, "gfx/bipa.png") { tmpl_sprite_train10(4, 540) }
spriteset(sset_bipa23_tail_open, "gfx/bipa.png") { tmpl_sprite_train10_offset(4, 580, 2) }
spritegroup sgroup_bipa4_head {
    loaded: [sset_bipa4_head];
    loading: [sset_bipa4_head_open];
}
spritegroup sgroup_bipa4_mid1 {
    loaded: [sset_bipa4_mid1];
    loading: [sset_bipa4_mid1_open];
}
spritegroup sgroup_bipa4_mid2 {
    loaded: [sset_bipa4_mid2];
    loading: [sset_bipa4_mid2_open];
}
spritegroup sgroup_bipa4_tail {
    loaded: [sset_bipa4_tail];
    loading: [sset_bipa4_tail_open];
}
spritegroup sgroup_bipa23_head {
    loaded: [sset_bipa23_head];
    loading: [sset_bipa23_head_open];
}
spritegroup sgroup_bipa23_mid {
    loaded: [sset_bipa23_mid];
    loading: [sset_bipa23_mid_open];
}
spritegroup sgroup_bipa23_tail {
    loaded: [sset_bipa23_tail];
    loading: [sset_bipa23_tail_open];
}


switch(FEAT_TRAINS, SELF, switch_bipa_subtype_text, cargo_subtype) {
    0: return string(STR_BIPA_2PARTS);
    1: return string(STR_BIPA_3PARTS);
    2: return string(STR_BIPA_4PARTS);
    return CB_RESULT_NO_TEXT;
}
switch(FEAT_TRAINS, SELF, switch_bipa_articulated, extra_callback_info1) {
    1..5: return item_bipa;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_bipa2_graphics, position_in_vehid_chain % 6) {
    0: return sgroup_bipa23_head;
    5: return sgroup_bipa23_tail;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_bipa3_graphics, position_in_vehid_chain % 6) {
    0: return sgroup_bipa23_head;
    2: return sgroup_bipa23_mid;
    5: return sgroup_bipa23_tail;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_bipa4_graphics, position_in_vehid_chain % 6) {
    0: return sgroup_bipa4_head;
    2: return sgroup_bipa4_mid1;
    3: return sgroup_bipa4_mid2;
    5: return sgroup_bipa4_tail;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_bipa_graphics, cargo_subtype % 3) {
    1: return switch_bipa3_graphics;
    2: return switch_bipa4_graphics;
    return switch_bipa2_graphics;
}
switch(FEAT_TRAINS, SELF, switch_bipa2_length, position_in_vehid_chain % 6) {
    1: return 1;
    2: return 1;
    3: return 1;
    4: return 1;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_bipa3_length, position_in_vehid_chain % 6) {
    1: return 2;
    3: return 1;
    4: return 2;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_bipa4_length, position_in_vehid_chain % 6) {
    1: return 3;
    4: return 3;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_bipa_length, cargo_subtype % 3) {
    1: return switch_bipa3_length;
    2: return switch_bipa4_length;
    return switch_bipa2_length;
}
switch(FEAT_TRAINS, SELF, switch_bipa2_tour_capacity, position_in_vehid_chain % 6) {
    0: return 90-2;
    5: return 90-2;
    return 1;
}
switch(FEAT_TRAINS, SELF, switch_bipa3_tour_capacity, position_in_vehid_chain % 6) {
    0: return 90-1;
    2: return 80;
    5: return 90-2;
    return 1;
}
switch(FEAT_TRAINS, SELF, switch_bipa4_tour_capacity, position_in_vehid_chain % 6) {
    0: return 90-1;
    2: return 80;
    3: return 80;
    5: return 90-1;
    return 1;
}
switch(FEAT_TRAINS, SELF, switch_bipa_tour_capacity, cargo_subtype % 3) {
    1: return switch_bipa3_tour_capacity;
    2: return switch_bipa4_tour_capacity;
    return switch_bipa2_tour_capacity;
}
switch(FEAT_TRAINS, SELF, switch_bipa2_pass_capacity, position_in_vehid_chain % 6) {
    0: return 90+16-2;
    5: return 90+16-2;
    return 1;
}
switch(FEAT_TRAINS, SELF, switch_bipa3_pass_capacity, position_in_vehid_chain % 6) {
    0: return 90+16-1;
    2: return 80+16;
    5: return 90+16-2;
    return 1;
}
switch(FEAT_TRAINS, SELF, switch_bipa4_pass_capacity, position_in_vehid_chain % 6) {
    0: return 90+16-1;
    2: return 80+16;
    3: return 80+16;
    5: return 90+16-1;
    return 1;
}
switch(FEAT_TRAINS, SELF, switch_bipa_pass_capacity, cargo_subtype % 3) {
    1: return switch_bipa3_pass_capacity;
    2: return switch_bipa4_pass_capacity;
    return switch_bipa2_pass_capacity;
}
switch(FEAT_TRAINS, SELF, switch_bipa_capacity, cargo_type_in_veh) {
    TOUR: return switch_bipa_tour_capacity;
    return switch_bipa_pass_capacity;
}

switch(FEAT_TRAINS, SELF, switch_bipa_running_cost, cargo_subtype % 3) {
    1: return (5*3 + 1);
    2: return (5*4 + 1);
    return (5*2 + 1);
}

switch(FEAT_TRAINS, SELF, switch_bipa_weight, cargo_subtype % 3) {
    1: return (36*2 + 30*(3 -2));
    2: return (36*2 + 30*(4 -2));
    return (36*2 + 30*(2 -2));
}
switch (FEAT_TRAINS, SELF, switch_bipa_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_4L, string(STR_BRAKE_AIR), string(STR_HEATING_ST_EL_TEXT), string(STR_BIPA_TEXT), string(STR_INCOME_LOWER));
    return string(STR_PURCHASE_DESCR_3L, string(STR_BRAKE_AIR), string(STR_BIPA_TEXT), string(STR_INCOME_LOWER));
}



switch(FEAT_TRAINS, SELF, switch_bipa_refit_cost_single, ((extra_callback_info1>>8)&0xFF)%3 - cargo_subtype%3) {
   -2: return (-2*int(int((124+8)*2 / 5) / 3)) & CB_RESULT_REFIT_COST_MASK;
   -1: return (-1*int(int((124+8)*2 / 5) / 3)) & CB_RESULT_REFIT_COST_MASK;
    1: return 1*int((124+8)*2 / 5);
    2: return 2*int((124+8)*2 / 5);
    return 0 | CB_RESULT_AUTOREFIT;
}
switch(FEAT_TRAINS, SELF, switch_bipa_refit_cost, position_in_vehid_chain % 6) {
    0: switch_bipa_refit_cost_single;
    return 0 | CB_RESULT_AUTOREFIT;
}
# 201 "src/wagons/bipa.pnml"
item(FEAT_TRAINS, item_bipa) {
    property {

        name: string(STR_BIPA_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1957, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 22;
        cost_factor: int((124+8) * (2 +1) / 5);
        running_cost_factor: (5*2 + 1);
        cargo_age_period: int(185*0.84);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: int((90*2 +16*2) / 6);
        weight: (36*2 + 30*(2 -2)) ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 88;
        retire_early: 16;
    }
}
    graphics {
        purchase: sset_bipa_purchase;
        additional_text: switch_bipa_add_text;
        default: switch_bipa_graphics;
        cargo_subtype_text: switch_bipa_subtype_text;
        articulated_part: switch_bipa_articulated;
        length: switch_bipa_length;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_bipa_capacity;
        purchase_running_cost_factor: return CB_FAILED;
        running_cost_factor: switch_bipa_running_cost;
        weight: switch_bipa_weight;
        colour_mapping: switch_lights_wagon_olive_1;
        refit_cost: switch_bipa_refit_cost;
    }
}
# 245 "src/pkp.pnml" 2
# 1 "src/wagons/bdhpumn.pnml" 1






spriteset(sset_bdhpumn_yb_purchase, "gfx/bdhpumn.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_bdhpumn_yb, "gfx/bdhpumn.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_bdhpumn_yb_open, "gfx/bdhpumn.png") { tmpl_sprite_train12(4, 180) }
spriteset(sset_bdhpumn_yb_cut, "gfx/bdhpumn.png") { tmpl_sprite_train12(4, 420) }
spriteset(sset_bdhpumn_yb_rear, "gfx/bdhpumn.png") { tmpl_sprite_train12_rear(4, 20) }
spriteset(sset_bdhpumn_yb_rear_open, "gfx/bdhpumn.png") { tmpl_sprite_train12_rear(4, 180) }
spriteset(sset_bdhpumn_yb_l, "gfx/bdhpumn.png") { tmpl_sprite_train12_l(4, 300) }
spriteset(sset_bdhpumn_yb_r, "gfx/bdhpumn.png") { tmpl_sprite_train12_r(4, 300) }

spriteset(sset_bdhpumn_pr_purchase, "gfx/bdhpumn.png") { tmpl_sprite_purchase(4, 120) }
spriteset(sset_bdhpumn_pr, "gfx/bdhpumn.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_bdhpumn_pr_open, "gfx/bdhpumn.png") { tmpl_sprite_train12(4, 220) }
spriteset(sset_bdhpumn_pr_cut, "gfx/bdhpumn.png") { tmpl_sprite_train12(4, 460) }
spriteset(sset_bdhpumn_pr_rear, "gfx/bdhpumn.png") { tmpl_sprite_train12_rear(4, 80) }
spriteset(sset_bdhpumn_pr_rear_open, "gfx/bdhpumn.png") { tmpl_sprite_train12_rear(4, 220) }
spriteset(sset_bdhpumn_pr_l, "gfx/bdhpumn.png") { tmpl_sprite_train12_l(4, 340) }
spriteset(sset_bdhpumn_pr_r, "gfx/bdhpumn.png") { tmpl_sprite_train12_r(4, 340) }

spriteset(sset_bdhpumn_ir, "gfx/bdhpumn.png") { tmpl_sprite_train12(4, 140) }
spriteset(sset_bdhpumn_ir_open, "gfx/bdhpumn.png") { tmpl_sprite_train12(4, 260) }
spriteset(sset_bdhpumn_ir_cut, "gfx/bdhpumn.png") { tmpl_sprite_train12(4, 500) }
spriteset(sset_bdhpumn_ir_rear, "gfx/bdhpumn.png") { tmpl_sprite_train12_rear(4, 140) }
spriteset(sset_bdhpumn_ir_rear_open, "gfx/bdhpumn.png") { tmpl_sprite_train12_rear(4, 260) }
spriteset(sset_bdhpumn_ir_l, "gfx/bdhpumn.png") { tmpl_sprite_train12_l(4, 380) }
spriteset(sset_bdhpumn_ir_r, "gfx/bdhpumn.png") { tmpl_sprite_train12_r(4, 380) }

spritegroup sgroup_bdhpumn_yb {
    loaded: [sset_bdhpumn_yb];
    loading: [sset_bdhpumn_yb_open];
}
spritegroup sgroup_bdhpumn_yb_rear {
    loaded: [sset_bdhpumn_yb_rear];
    loading: [sset_bdhpumn_yb_rear_open];
}

spritegroup sgroup_bdhpumn_pr {
    loaded: [sset_bdhpumn_pr];
    loading: [sset_bdhpumn_pr_open];
}
spritegroup sgroup_bdhpumn_pr_rear {
    loaded: [sset_bdhpumn_pr_rear];
    loading: [sset_bdhpumn_pr_rear_open];
}

spritegroup sgroup_bdhpumn_ir {
    loaded: [sset_bdhpumn_ir];
    loading: [sset_bdhpumn_ir_open];
}
spritegroup sgroup_bdhpumn_ir_rear {
    loaded: [sset_bdhpumn_ir_rear];
    loading: [sset_bdhpumn_ir_rear_open];
}
# 70 "src/wagons/bdhpumn.pnml"
switch(FEAT_TRAINS, SELF, switch_bdhpumn_purchase, (build_year >= 2012) || (date_of_last_service >= date(2012, 1, 1))) {
    1: return sset_bdhpumn_pr_purchase;
    return sset_bdhpumn_yb_purchase;
}
switch(FEAT_TRAINS, SELF, switch_bdhpumn_articulated, extra_callback_info1) {
    1: return item_bdhpumn;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}

switch(FEAT_TRAINS, SELF, switch_bdhpumn_yb_cut_front, other_veh_is_hidden(1)) {
    1: return sset_bdhpumn_yb_cut;
    return sgroup_bdhpumn_yb;
}
switch(FEAT_TRAINS, SELF, switch_bdhpumn_yb_extra_front,
   [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1),
    STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1),
    STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1),
    LOAD_TEMP(1)]) {
    -2..-1: return sset_bdhpumn_yb_l;
    1..2: return sset_bdhpumn_yb_r;
    return switch_bdhpumn_yb_cut_front;
}
switch(FEAT_TRAINS, SELF, switch_bdhpumn_yb_front, (extra_callback_info1&0xFF)==0) {
    1: return switch_bdhpumn_yb_extra_front;
    return sgroup_bdhpumn_yb;
}
switch(FEAT_TRAINS, SELF, switch_bdhpumn_yb_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) {
    1: return sgroup_bdhpumn_yb_rear;
    return sset_dummy;
}

switch(FEAT_TRAINS, SELF, switch_bdhpumn_pr_cut_front, other_veh_is_hidden(1)) {
    1: return sset_bdhpumn_pr_cut;
    return sgroup_bdhpumn_pr;
}
switch(FEAT_TRAINS, SELF, switch_bdhpumn_pr_extra_front,
   [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1),
    STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1),
    STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1),
    LOAD_TEMP(1)]) {
    -2..-1: return sset_bdhpumn_pr_l;
    1..2: return sset_bdhpumn_pr_r;
    return switch_bdhpumn_pr_cut_front;
}
switch(FEAT_TRAINS, SELF, switch_bdhpumn_pr_front, (extra_callback_info1&0xFF)==0) {
    1: return switch_bdhpumn_pr_extra_front;
    return sgroup_bdhpumn_pr;
}
switch(FEAT_TRAINS, SELF, switch_bdhpumn_pr_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) {
    1: return sgroup_bdhpumn_pr_rear;
    return sset_dummy;
}

switch(FEAT_TRAINS, SELF, switch_bdhpumn_ir_cut_front, other_veh_is_hidden(1)) {
    1: return sset_bdhpumn_ir_cut;
    return sgroup_bdhpumn_ir;
}
switch(FEAT_TRAINS, SELF, switch_bdhpumn_ir_extra_front,
   [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1),
    STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1),
    STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1),
    LOAD_TEMP(1)]) {
    -2..-1: return sset_bdhpumn_ir_l;
    1..2: return sset_bdhpumn_ir_r;
    return switch_bdhpumn_ir_cut_front;
}
switch(FEAT_TRAINS, SELF, switch_bdhpumn_ir_front, (extra_callback_info1&0xFF)==0) {
    1: return switch_bdhpumn_ir_extra_front;
    return sgroup_bdhpumn_ir;
}
switch(FEAT_TRAINS, SELF, switch_bdhpumn_ir_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) {
    1: return sgroup_bdhpumn_ir_rear;
    return sset_dummy;
}
random_switch(FEAT_TRAINS, SELF, switch_bdhpumn_auto_front) {
    6: return switch_bdhpumn_pr_front;
    2: return switch_bdhpumn_ir_front;
}
random_switch(FEAT_TRAINS, FORWARD_SELF(1), switch_bdhpumn_auto_rear) {
    dependent: switch_bdhpumn_auto_front;
    6: return switch_bdhpumn_pr_rear;
    2: return switch_bdhpumn_ir_rear;
}
switch(FEAT_TRAINS, SELF, switch_bdhpumn_front, (build_year >= 2012) || (date_of_last_service >= date(2012, 1, 1))) {
    1: return switch_bdhpumn_auto_front;
    return switch_bdhpumn_yb_front;
}
switch(FEAT_TRAINS, SELF, switch_bdhpumn_rear, (build_year >= 2012) || (date_of_last_service >= date(2012, 1, 1))) {
    1: return switch_bdhpumn_auto_rear;
    return switch_bdhpumn_yb_rear;
}
switch(FEAT_TRAINS, SELF, switch_bdhpumn_graphics, position_in_vehid_chain % 2) {
    1: return switch_bdhpumn_rear;
    return switch_bdhpumn_front;
}

random_switch(FEAT_TRAINS, SELF, switch_bdhpumn_lights_auto_front) {
    dependent: switch_bdhpumn_auto_front;
    6: return switch_lights_wagon_ltblue_2;
    2: return switch_lights_wagon_dkblue_2;
}
random_switch(FEAT_TRAINS, FORWARD_SELF(1), switch_bdhpumn_lights_auto_rear) {
    dependent: switch_bdhpumn_auto_rear;
    6: return switch_lights_wagon_ltblue_1;
    2: return switch_lights_wagon_dkblue_1;
}
switch(FEAT_TRAINS, SELF, switch_bdhpumn_lights_front, (build_year >= 2012) || (date_of_last_service >= date(2012, 1, 1))) {
    1: return switch_bdhpumn_lights_auto_front;
    return switch_lights_wagon_ltblue_2;
}
switch(FEAT_TRAINS, SELF, switch_bdhpumn_lights_rear, (build_year >= 2012) || (date_of_last_service >= date(2012, 1, 1))) {
    1: return switch_bdhpumn_lights_auto_rear;
    return switch_lights_wagon_ltblue_1;
}
switch(FEAT_TRAINS, SELF, switch_bdhpumn_recolour, position_in_vehid_chain % 2) {
    1: return switch_bdhpumn_lights_rear;
    return switch_bdhpumn_lights_front;
}



switch(FEAT_TRAINS, SELF, switch_bdhpumn_length, position_in_vehid_chain % 2) {
    1: return 4;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_bdhpumn_tour_capacity, position_in_vehid_chain % 2) {
    0: return 132 -1;
    return 1;
}
switch(FEAT_TRAINS, SELF, switch_bdhpumn_pass_capacity, position_in_vehid_chain % 2) {
    0: return 132 +16 -1;
    return 1;
}
switch(FEAT_TRAINS, SELF, switch_bdhpumn_capacity, cargo_type_in_veh) {
    TOUR: return switch_bdhpumn_tour_capacity;
    return switch_bdhpumn_pass_capacity;
}
switch (FEAT_TRAINS, SELF, switch_bdhpumn_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_3L, string(STR_BRAKE_AIR), string(STR_HEATING_ELECTRIC_TEXT), string(STR_INCOME_LOWER));
    return string(STR_PURCHASE_DESCR_3L, string(STR_BRAKE_AIR), string(STR_BH_BON_TEXT), string(STR_INCOME_LOWER));
}




item(FEAT_TRAINS, item_bdhpumn) {
    property {

        name: string(STR_BDHPUMN_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1989, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 30;
        cost_factor: 70;
        running_cost_factor: 5 +1;
        cargo_age_period: int(185*0.84);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 120 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: int((132 +16)/2);
        weight: 42 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

    graphics {
        purchase: switch_bdhpumn_purchase;
        additional_text: switch_bdhpumn_add_text;
        default: switch_bdhpumn_graphics;

        articulated_part: switch_bdhpumn_articulated;
        length: switch_bdhpumn_length;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_bdhpumn_capacity;
        colour_mapping: switch_bdhpumn_recolour;
    }
}
# 246 "src/pkp.pnml" 2
# 1 "src/wagons/twindexx.pnml" 1





spriteset(sset_twindexx_purchase, "gfx/twindexx.png") { tmpl_sprite_purchase(4, 520) }
spriteset(sset_twindexx, "gfx/twindexx.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_twindexx_open, "gfx/twindexx.png") { tmpl_sprite_train12(4, 120) }
spriteset(sset_twindexx_cut, "gfx/twindexx.png") { tmpl_sprite_train12(4, 280) }
spriteset(sset_twindexx_rear, "gfx/twindexx.png") { tmpl_sprite_train(32, 360) }
spriteset(sset_twindexx_rear_open, "gfx/twindexx.png") { tmpl_sprite_train(32, 400) }
spriteset(sset_twindexx_l, "gfx/twindexx.png") { tmpl_sprite_train12_l(4, 200) }
spriteset(sset_twindexx_r, "gfx/twindexx.png") { tmpl_sprite_train12_r(4, 200) }

spritegroup sgroup_twindexx {
    loaded: [sset_twindexx];
    loading: [sset_twindexx_open];
}
spritegroup sgroup_twindexx_rear {
    loaded: [sset_twindexx_rear];
    loading: [sset_twindexx_rear_open];
}







switch(FEAT_TRAINS, SELF, switch_twindexx_articulated, extra_callback_info1) {
    1: return item_twindexx;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_twindexx_cut_front, other_veh_is_hidden(1)) {
    1: return sset_twindexx_cut;
    return sgroup_twindexx;
}
switch(FEAT_TRAINS, SELF, switch_twindexx_extra_front,
   [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1),
    STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1),
    STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1),
    LOAD_TEMP(1)]) {
    -2..-1: return sset_twindexx_l;
    1..2: return sset_twindexx_r;
    return switch_twindexx_cut_front;
}
switch(FEAT_TRAINS, SELF, switch_twindexx_front, (extra_callback_info1&0xFF)==0) {
    1: return switch_twindexx_extra_front;
    return sgroup_twindexx;
}
switch(FEAT_TRAINS, SELF, switch_twindexx_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) {
    1: return sgroup_twindexx_rear;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_twindexx_graphics, position_in_vehid_chain % 2) {
    1: return switch_twindexx_rear;
    return switch_twindexx_front;
}

switch(FEAT_TRAINS, SELF, switch_twindexx_length, position_in_vehid_chain % 2) {
    1: return 4;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_twindexx_capacity, position_in_vehid_chain % 2) {
    0: return 133 -1;
    return 1;
}
switch (FEAT_TRAINS, SELF, switch_twindexx_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_3L, string(STR_BRAKE_AIR), string(STR_HEATING_ELECTRIC_TEXT), string(STR_TWINDEXX_TEXT));
    return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_AIR), string(STR_TWINDEXX_TEXT));
}




item(FEAT_TRAINS, item_twindexx) {
    property {

        name: string(STR_TWINDEXX_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(2008, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 30;
        cost_factor: 100;
        running_cost_factor: 8 +1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 160 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: int(133/2);
        weight: 50 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

    graphics {
        purchase: sset_twindexx_purchase;
        additional_text: switch_twindexx_add_text;
        default: switch_twindexx_graphics;

        articulated_part: switch_twindexx_articulated;
        length: switch_twindexx_length;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_twindexx_capacity;
    }
}
# 247 "src/pkp.pnml" 2
# 1 "src/wagons/twindexxcontrolcar.pnml" 1





spriteset(sset_twindexxcc_purchase, "gfx/twindexx.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_twindexxcc, "gfx/twindexx.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_twindexxcc_open, "gfx/twindexx.png") { tmpl_sprite_train12(4, 160) }
spriteset(sset_twindexxcc_cut, "gfx/twindexx.png") { tmpl_sprite_train12(4, 320) }
spriteset(sset_twindexxcc_rear, "gfx/twindexx.png") { tmpl_sprite_train(32, 440) }
spriteset(sset_twindexxcc_rear_open, "gfx/twindexx.png") { tmpl_sprite_train(32, 480) }
spriteset(sset_twindexxcc_l, "gfx/twindexx.png") { tmpl_sprite_train12_l(4, 240) }
spriteset(sset_twindexxcc_r, "gfx/twindexx.png") { tmpl_sprite_train12_r(4, 240) }

spritegroup sgroup_twindexxcc {
    loaded: [sset_twindexxcc];
    loading: [sset_twindexxcc_open];
}
spritegroup sgroup_twindexxcc_rear {
    loaded: [sset_twindexxcc_rear];
    loading: [sset_twindexxcc_rear_open];
}







switch(FEAT_TRAINS, SELF, switch_twindexxcc_articulated, extra_callback_info1) {
    1: return item_twindexxcc;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_twindexxcc_cut_front, other_veh_is_hidden(1)) {
    1: return sset_twindexxcc_cut;
    return sgroup_twindexxcc;
}
switch(FEAT_TRAINS, SELF, switch_twindexxcc_extra_front,
   [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1),
    STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1),
    STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1),
    LOAD_TEMP(1)]) {
    -2..-1: return sset_twindexxcc_l;
    1..2: return sset_twindexxcc_r;
    return switch_twindexxcc_cut_front;
}
switch(FEAT_TRAINS, SELF, switch_twindexxcc_front, (extra_callback_info1&0xFF)==0) {
    1: return switch_twindexxcc_extra_front;
    return sgroup_twindexxcc;
}
switch(FEAT_TRAINS, SELF, switch_twindexxcc_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) {
    1: return sgroup_twindexxcc_rear;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_twindexxcc_graphics, position_in_vehid_chain % 2) {
    1: return switch_twindexxcc_rear;
    return switch_twindexxcc_front;
}

switch(FEAT_TRAINS, SELF, switch_twindexxcc_length, position_in_vehid_chain % 2) {
    1: return 4;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_twindexxcc_capacity, position_in_vehid_chain % 2) {
    0: return 85 -1;
    return 1;
}
switch (FEAT_TRAINS, SELF, switch_twindexxcc_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_4L, string(STR_BRAKE_AIR), string(STR_HEATING_ELECTRIC_TEXT), string(STR_INCOME_1_CLASS), string(STR_TWINDEXX_TEXT));
    return string(STR_PURCHASE_DESCR_3L, string(STR_BRAKE_AIR), string(STR_TWINDEXX_TEXT), string(STR_INCOME_1_CLASS));
}






item(FEAT_TRAINS, item_twindexxcc) {
    property {

        name: string(STR_TWINDEXXCC_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(2008, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 30;
        cost_factor: 106;
        running_cost_factor: 8 +1;
        cargo_age_period: int((12*185*2.82 + (85-12)*185)/85);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 160 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: int(85/2);
        weight: 52 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

    graphics {
        purchase: sset_twindexxcc_purchase;
        additional_text: switch_twindexxcc_add_text;
        default: switch_twindexxcc_graphics;

        articulated_part: switch_twindexxcc_articulated;
        length: switch_twindexxcc_length;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_twindexxcc_capacity;
    }
}
# 248 "src/pkp.pnml" 2
# 1 "src/wagons/bhxz.pnml" 1





spriteset(sset_bhxz_purchase, "gfx/ringhoffer.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_bhxz, "gfx/ringhoffer.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_bhxz_open, "gfx/ringhoffer.png") { tmpl_sprite_train10(4, 80) }
spriteset(sset_bhxz_cut, "gfx/ringhoffer.png") { tmpl_sprite_train10(4, 120) }
spritegroup sgroup_bhxz {
    loaded: [sset_bhxz];
    loading: [sset_bhxz_open];
}


switch(FEAT_TRAINS, SELF, switch_bhxz_articulated, extra_callback_info1) {
    1: return item_dummy_2;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_bhxz_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_bhxz_cut;
    return sgroup_bhxz;
}
switch (FEAT_TRAINS, SELF, switch_bhxz_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_AIR), string(STR_HEATING_STEAM_TEXT));
 return string(STR_BRAKE_AIR);
}







item(FEAT_TRAINS, item_bhxz) {
    property {

        name: string(STR_BHXZ_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 6;
        cost_factor: 50+2;
        running_cost_factor: 8 +1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 51;
        weight: 39 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 62;
        retire_early: 16;
    }
}
    graphics {
        purchase: sset_bhxz_purchase;
        additional_text: switch_bhxz_add_text;
        default: switch_bhxz_graphics;
        articulated_part: switch_bhxz_articulated;
        purchase_cargo_capacity: return 51;
        cargo_capacity: return 51;
        cargo_age_period: switch_normal_cargo_age_period;
        colour_mapping: switch_lights_wagon_olive_2;
    }
}
# 249 "src/pkp.pnml" 2
# 1 "src/wagons/abhxz.pnml" 1





spriteset(sset_abhxz_purchase, "gfx/lilpop.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_abhxz_c2, "gfx/lilpop.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_abhxz_c12, "gfx/lilpop.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_abhxz_c1, "gfx/lilpop.png") { tmpl_sprite_train12(4, 120) }
spriteset(sset_abhxz_c2_open, "gfx/lilpop.png") { tmpl_sprite_train12(4, 160) }
spriteset(sset_abhxz_c12_open, "gfx/lilpop.png") { tmpl_sprite_train12(4, 200) }
spriteset(sset_abhxz_c1_open, "gfx/lilpop.png") { tmpl_sprite_train12(4, 240) }
spriteset(sset_abhxz_c2_cut, "gfx/lilpop.png") { tmpl_sprite_train12(4, 280) }
spriteset(sset_abhxz_c12_cut, "gfx/lilpop.png") { tmpl_sprite_train12(4, 320) }
spritegroup sgroup_abhxz_c2 {
    loaded: [sset_abhxz_c2];
    loading: [sset_abhxz_c2_open];
}
spritegroup sgroup_abhxz_c12 {
    loaded: [sset_abhxz_c12];
    loading: [sset_abhxz_c12_open];
}
spritegroup sgroup_abhxz_c1 {
    loaded: [sset_abhxz_c1];
    loading: [sset_abhxz_c1_open];
}







switch(FEAT_TRAINS, SELF, switch_abhxz_articulated, extra_callback_info1) {
    1: return item_dummy_3;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_abhxz_c2_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_abhxz_c2_cut;
    return sgroup_abhxz_c2;
}
switch(FEAT_TRAINS, SELF, switch_abhxz_c12_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_abhxz_c12_cut;
    return sgroup_abhxz_c12;
}
switch(FEAT_TRAINS, SELF, switch_abhxz_c1_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_abhxz_c12_cut;
    return sgroup_abhxz_c1;
}
switch(FEAT_TRAINS, SELF, switch_abhxz_graphics, cargo_subtype % 3) {
    1: return switch_abhxz_c12_graphics;
    2: return switch_abhxz_c1_graphics;
    return switch_abhxz_c2_graphics;
}
switch(FEAT_TRAINS, SELF, switch_abhxz_capacity, cargo_subtype % 3) {
    1: return 64;
    2: return 48;
    return 80;
}
switch (FEAT_TRAINS, SELF, switch_abhxz_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_4L, string(STR_BRAKE_AIR), string(STR_HEATING_STEAM_TEXT), string(STR_ABHXZ_TEXT), string(STR_INCOME_1_CLASS));
    return string(STR_PURCHASE_DESCR_3L, string(STR_BRAKE_AIR), string(STR_ABHXZ_TEXT), string(STR_INCOME_1_CLASS));
}


item(FEAT_TRAINS, item_abhxz) {
    property {

        name: string(STR_ABHXZ_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1931, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 7;
        cost_factor: 58;
        running_cost_factor: 8 -1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 120 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 80;
        weight: 41 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 72;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_abhxz_purchase;
        additional_text: switch_abhxz_add_text;
        default: switch_abhxz_graphics;
        cargo_subtype_text: switch_old_subtype_text;
        articulated_part: switch_abhxz_articulated;
        purchase_cargo_capacity: return 80;
        cargo_capacity: switch_abhxz_capacity;
        cargo_age_period: switch_old_cargo_age_period;
        colour_mapping: switch_lights_wagon_olive_2;
        refit_cost: switch_old_refit_cost;
    }
}
# 250 "src/pkp.pnml" 2
# 1 "src/wagons/abdnu.pnml" 1
# 10 "src/wagons/abdnu.pnml"
spriteset(sset_abdnu_old_purchase, "gfx/111a-112a.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_abdnu_c2_old, "gfx/111a-112a.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_abdnu_c12_old, "gfx/111a-112a.png") { tmpl_sprite_train12(4, 140) }
spriteset(sset_abdnu_c1_old, "gfx/111a-112a.png") { tmpl_sprite_train12(4, 180) }
spriteset(sset_abdnu_c2_old_open, "gfx/111a-112a.png") { tmpl_sprite_train12(4, 300) }
spriteset(sset_abdnu_c12_old_open, "gfx/111a-112a.png") { tmpl_sprite_train12(4, 380) }
spriteset(sset_abdnu_c1_old_open, "gfx/111a-112a.png") { tmpl_sprite_train12(4, 420) }
spriteset(sset_abdnu_c2_old_cut, "gfx/111a-112a.png") { tmpl_sprite_train12(4, 540) }
spriteset(sset_abdnu_c12_old_cut, "gfx/111a-112a.png") { tmpl_sprite_train12(4, 620) }

spriteset(sset_abdnu_new_purchase, "gfx/111a-112a.png") { tmpl_sprite_purchase(4, 120) }
spriteset(sset_abdnu_c2_new, "gfx/111a-112a.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_abdnu_c12_new, "gfx/111a-112a.png") { tmpl_sprite_train12(4, 220) }
spriteset(sset_abdnu_c1_new, "gfx/111a-112a.png") { tmpl_sprite_train12(4, 260) }
spriteset(sset_abdnu_c2_new_open, "gfx/111a-112a.png") { tmpl_sprite_train12(4, 340) }
spriteset(sset_abdnu_c12_new_open, "gfx/111a-112a.png") { tmpl_sprite_train12(4, 460) }
spriteset(sset_abdnu_c1_new_open, "gfx/111a-112a.png") { tmpl_sprite_train12(4, 500) }
spriteset(sset_abdnu_c2_new_cut, "gfx/111a-112a.png") { tmpl_sprite_train12(4, 580) }
spriteset(sset_abdnu_c12_new_cut, "gfx/111a-112a.png") { tmpl_sprite_train12(4, 660) }
spriteset(sset_abdnu_c1_new_cut, "gfx/111a-112a.png") { tmpl_sprite_train12(4, 700) }

spriteset(sset_abdnu_c2_ic, "gfx/140a-141a.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_abdnu_c1_ic, "gfx/140a-141a.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_abdnu_c2_ic_open, "gfx/140a-141a.png") { tmpl_sprite_train12(4, 120) }
spriteset(sset_abdnu_c1_ic_open, "gfx/140a-141a.png") { tmpl_sprite_train12(4, 160) }
spriteset(sset_abdnu_c2_ic_cut, "gfx/140a-141a.png") { tmpl_sprite_train12(4, 200) }
spriteset(sset_abdnu_c1_ic_cut, "gfx/140a-141a.png") { tmpl_sprite_train12(4, 240) }

spritegroup sgroup_abdnu_c2_old {
    loaded: [sset_abdnu_c2_old];
    loading: [sset_abdnu_c2_old_open];
}
spritegroup sgroup_abdnu_c12_old {
    loaded: [sset_abdnu_c12_old];
    loading: [sset_abdnu_c12_old_open];
}
spritegroup sgroup_abdnu_c1_old {
    loaded: [sset_abdnu_c1_old];
    loading: [sset_abdnu_c1_old_open];
}

spritegroup sgroup_abdnu_c2_new {
    loaded: [sset_abdnu_c2_new];
    loading: [sset_abdnu_c2_new_open];
}
spritegroup sgroup_abdnu_c12_new {
    loaded: [sset_abdnu_c12_new];
    loading: [sset_abdnu_c12_new_open];
}
spritegroup sgroup_abdnu_c1_new {
    loaded: [sset_abdnu_c1_new];
    loading: [sset_abdnu_c1_new_open];
}

spritegroup sgroup_abdnu_c2_ic {
    loaded: [sset_abdnu_c2_ic];
    loading: [sset_abdnu_c2_ic_open];
}
spritegroup sgroup_abdnu_c1_ic {
    loaded: [sset_abdnu_c1_ic];
    loading: [sset_abdnu_c1_ic_open];
}
# 81 "src/wagons/abdnu.pnml"
switch(FEAT_TRAINS, SELF, switch_abdnu_purchase, build_year >= 1993) {
    1: return sset_abdnu_new_purchase;
    return sset_abdnu_old_purchase;
}
switch(FEAT_TRAINS, SELF, switch_abdnu_articulated, extra_callback_info1) {
    1: return item_dummy_3;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_abdnu_c2_old_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_abdnu_c2_old_cut;
    return sgroup_abdnu_c2_old;
}
switch(FEAT_TRAINS, SELF, switch_abdnu_c12_old_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_abdnu_c12_old_cut;
    return sgroup_abdnu_c12_old;
}
switch(FEAT_TRAINS, SELF, switch_abdnu_c1_old_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_abdnu_c12_old_cut;
    return sgroup_abdnu_c1_old;
}
switch(FEAT_TRAINS, SELF, switch_abdnu_old_graphics, cargo_subtype % 3) {
    1: return switch_abdnu_c12_old_graphics;
    2: return switch_abdnu_c1_old_graphics;
    return switch_abdnu_c2_old_graphics;
}
switch(FEAT_TRAINS, SELF, switch_abdnu_c2_new_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_abdnu_c2_new_cut;
    return sgroup_abdnu_c2_new;
}
switch(FEAT_TRAINS, SELF, switch_abdnu_c12_new_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_abdnu_c12_new_cut;
    return sgroup_abdnu_c12_new;
}
switch(FEAT_TRAINS, SELF, switch_abdnu_c1_new_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_abdnu_c1_new_cut;
    return sgroup_abdnu_c1_new;
}
switch(FEAT_TRAINS, SELF, switch_abdnu_new_graphics, cargo_subtype % 3) {
    1: return switch_abdnu_c12_new_graphics;
    2: return switch_abdnu_c1_new_graphics;
    return switch_abdnu_c2_new_graphics;
}
switch(FEAT_TRAINS, SELF, switch_abdnu_c2_ic_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_abdnu_c2_ic_cut;
    return sgroup_abdnu_c2_ic;
}
switch(FEAT_TRAINS, SELF, switch_abdnu_c1_ic_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_abdnu_c1_ic_cut;
    return sgroup_abdnu_c1_ic;
}
switch(FEAT_TRAINS, SELF, switch_abdnu_ic_graphics, cargo_subtype % 3) {
    1: return switch_abdnu_c12_new_graphics;
    2: return switch_abdnu_c1_ic_graphics;
    return switch_abdnu_c2_ic_graphics;
}
switch(FEAT_TRAINS, PARENT, switch_abdnu_engine_graphics, build_year >= 2003) {
    1: return switch_abdnu_new_graphics;
    return switch_abdnu_old_graphics;
}
switch(FEAT_TRAINS, SELF, switch_abdnu_graphics2, build_year >= 1993) {
    1: return switch_abdnu_new_graphics;
    return switch_abdnu_engine_graphics;
}
switch(FEAT_TRAINS, PARENT, switch_abdnu_graphics, bitmask_consist_info & bitmask(2)) {
    bitmask(2): return switch_abdnu_ic_graphics;
    return switch_abdnu_graphics2;
}
switch(FEAT_TRAINS, SELF, switch_abdnu_capacity, cargo_subtype % 3) {
    1: return 64;
    2: return 54;
    return 80;
}
switch (FEAT_TRAINS, SELF, switch_abdnu_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_4L, string(STR_BRAKE_AIR), string(STR_HEATING_ST_EL_TEXT), string(STR_ABDNU_TEXT), string(STR_INCOME_1_CLASS));
    return string(STR_PURCHASE_DESCR_3L, string(STR_BRAKE_AIR), string(STR_ABDNU_TEXT), string(STR_INCOME_1_CLASS));
}
switch(FEAT_TRAINS, SELF, switch_abdnu_new_lights, cargo_subtype % 3) {
    2: return switch_lights_wagon_red_2;
    return switch_lights_wagon_green_2;
}
switch(FEAT_TRAINS, SELF, switch_abdnu_lights, build_year >= 1993) {
    1: return switch_abdnu_new_lights;
    return switch_lights_wagon_olive_2;
}


item(FEAT_TRAINS, item_abdnu) {
    property {

        name: string(STR_ABDNU_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1968, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 7;
        cost_factor: 70;
        running_cost_factor: 8;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 160 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 80;
        weight: 39 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

    graphics {
        purchase: switch_abdnu_purchase;
        additional_text: switch_abdnu_add_text;
        default: switch_abdnu_graphics;
        cargo_subtype_text: switch_old_subtype_text;
        articulated_part: switch_abdnu_articulated;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_abdnu_capacity;
        cargo_age_period: switch_old_cargo_age_period;
        colour_mapping: switch_abdnu_lights;
        refit_cost: switch_old_refit_cost;
    }
}
# 251 "src/pkp.pnml" 2
# 1 "src/wagons/abdhmnu.pnml" 1





spriteset(sset_abdhmnu_purchase, "gfx/152a-154a.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_abdhmnu_c2, "gfx/152a-154a.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_abdhmnu_c1, "gfx/152a-154a.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_abdhmnu_c2_open, "gfx/152a-154a.png") { tmpl_sprite_train12(4, 120) }
spriteset(sset_abdhmnu_c1_open, "gfx/152a-154a.png") { tmpl_sprite_train12(4, 160) }
spriteset(sset_abdhmnu_c2_l, "gfx/152a-154a.png") { tmpl_sprite_train12_l(4, 200) }
spriteset(sset_abdhmnu_c2_r, "gfx/152a-154a.png") { tmpl_sprite_train12_r(4, 200) }
spriteset(sset_abdhmnu_c1_l, "gfx/152a-154a.png") { tmpl_sprite_train12_l(4, 240) }
spriteset(sset_abdhmnu_c1_r, "gfx/152a-154a.png") { tmpl_sprite_train12_r(4, 240) }
spriteset(sset_abdhmnu_c2_cut, "gfx/152a-154a.png") { tmpl_sprite_train12(4, 280) }
spriteset(sset_abdhmnu_c1_cut, "gfx/152a-154a.png") { tmpl_sprite_train12(4, 320) }
spriteset(sset_abdhmnu_c2_rear, "gfx/152a-154a.png") { tmpl_sprite_train(32, 360) }
spriteset(sset_abdhmnu_c2_rear_open, "gfx/152a-154a.png") { tmpl_sprite_train(32, 400) }
spriteset(sset_abdhmnu_c1_rear, "gfx/152a-154a.png") { tmpl_sprite_train(32, 440) }
spriteset(sset_abdhmnu_c1_rear_open, "gfx/152a-154a.png") { tmpl_sprite_train(32, 480) }
spritegroup sgroup_abdhmnu_c2 {
    loaded: [sset_abdhmnu_c2];
    loading: [sset_abdhmnu_c2_open];
}
spritegroup sgroup_abdhmnu_c1 {
    loaded: [sset_abdhmnu_c1];
    loading: [sset_abdhmnu_c1_open];
}
spritegroup sgroup_abdhmnu_c2_rear {
    loaded: [sset_abdhmnu_c2_rear];
    loading: [sset_abdhmnu_c2_rear_open];
}
spritegroup sgroup_abdhmnu_c1_rear {
    loaded: [sset_abdhmnu_c1_rear];
    loading: [sset_abdhmnu_c1_rear_open];
}







switch(FEAT_TRAINS, SELF, switch_abdhmnu_articulated, extra_callback_info1) {
    1: return item_abdhmnu;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_abdhmnu_c2_cut_front, other_veh_is_hidden(1)) {
    1: return sset_abdhmnu_c2_cut;
    return sgroup_abdhmnu_c2;
}
switch(FEAT_TRAINS, SELF, switch_abdhmnu_c2_extra_front,
   [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1),
    STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1),
    STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1),
    LOAD_TEMP(1)]) {
    -2..-1: return sset_abdhmnu_c2_l;
    1..2: return sset_abdhmnu_c2_r;
    return switch_abdhmnu_c2_cut_front;
}
switch(FEAT_TRAINS, SELF, switch_abdhmnu_c2_front, (extra_callback_info1&0xFF)==0) {
    1: return switch_abdhmnu_c2_extra_front;
    return sgroup_abdhmnu_c2;
}
switch(FEAT_TRAINS, SELF, switch_abdhmnu_c2_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) {
    1: return sgroup_abdhmnu_c2_rear;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_abdhmnu_c2_graphics, position_in_vehid_chain % 2) {
    1: return switch_abdhmnu_c2_rear;
    return switch_abdhmnu_c2_front;
}
switch(FEAT_TRAINS, SELF, switch_abdhmnu_c1_cut_front, other_veh_is_hidden(1)) {
    1: return sset_abdhmnu_c1_cut;
    return sgroup_abdhmnu_c1;
}
switch(FEAT_TRAINS, SELF, switch_abdhmnu_c1_extra_front,
   [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1),
    STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1),
    STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1),
    LOAD_TEMP(1)]) {
    -2..-1: return sset_abdhmnu_c1_l;
    1..2: return sset_abdhmnu_c1_r;
    return switch_abdhmnu_c1_cut_front;
}
switch(FEAT_TRAINS, SELF, switch_abdhmnu_c1_front, (extra_callback_info1&0xFF)==0) {
    1: return switch_abdhmnu_c1_extra_front;
    return sgroup_abdhmnu_c1;
}
switch(FEAT_TRAINS, SELF, switch_abdhmnu_c1_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) {
    1: return sgroup_abdhmnu_c1_rear;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_abdhmnu_c1_graphics, position_in_vehid_chain % 2) {
    1: return switch_abdhmnu_c1_rear;
    return switch_abdhmnu_c1_front;
}
switch(FEAT_TRAINS, SELF, switch_abdhmnu_graphics, cargo_subtype % 2) {
    1: return switch_abdhmnu_c1_graphics;
    return switch_abdhmnu_c2_graphics;
}
switch(FEAT_TRAINS, SELF, switch_abdhmnu_length, position_in_vehid_chain % 2) {
    1: return 4;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_abdhmnu_capacity, (position_in_vehid_chain%2)*2 + cargo_subtype%2) {
    0: return 80 -1;
    1: return 54-1;
    return 1;
}
switch (FEAT_TRAINS, SELF, switch_abdhmnu_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_4L, string(STR_BRAKE_AIR), string(STR_HEATING_ELECTRIC_TEXT), string(STR_ABDHMNU_TEXT), string(STR_INCOME_1_CLASS));
    return string(STR_PURCHASE_DESCR_3L, string(STR_BRAKE_AIR), string(STR_ABDHMNU_TEXT), string(STR_INCOME_1_CLASS));
}




item(FEAT_TRAINS, item_abdhmnu) {
    property {

        name: string(STR_ABDHMNU_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1995, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 7;
        cost_factor: 88;
        running_cost_factor: 8 +1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 200 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: int(80/2);
        weight: 48 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0, 2);
    }

    graphics {
        purchase: sset_abdhmnu_purchase;
        additional_text: switch_abdhmnu_add_text;
        default: switch_abdhmnu_graphics;
        cargo_subtype_text: switch_new_subtype_text;
        articulated_part: switch_abdhmnu_articulated;
        length: switch_abdhmnu_length;
        purchase_cargo_capacity: return int(80/2);
        cargo_capacity: switch_abdhmnu_capacity;
        cargo_age_period: switch_new_cargo_age_period;
        refit_cost: switch_new_refit_cost;
    }
}
# 252 "src/pkp.pnml" 2
# 1 "src/wagons/ab9mnopuz.pnml" 1





spriteset(sset_ab9mnopuz_purchase, "gfx/158a-159a.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_ab9mnopuz_c2, "gfx/158a-159a.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_ab9mnopuz_c1, "gfx/158a-159a.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_ab9mnopuz_c2_open, "gfx/158a-159a.png") { tmpl_sprite_train12(4, 120) }
spriteset(sset_ab9mnopuz_c1_open, "gfx/158a-159a.png") { tmpl_sprite_train12(4, 160) }
spriteset(sset_ab9mnopuz_c2_l, "gfx/158a-159a.png") { tmpl_sprite_train12_l(4, 200) }
spriteset(sset_ab9mnopuz_c2_r, "gfx/158a-159a.png") { tmpl_sprite_train12_r(4, 200) }
spriteset(sset_ab9mnopuz_c1_l, "gfx/158a-159a.png") { tmpl_sprite_train12_l(4, 240) }
spriteset(sset_ab9mnopuz_c1_r, "gfx/158a-159a.png") { tmpl_sprite_train12_r(4, 240) }
spriteset(sset_ab9mnopuz_c2_cut, "gfx/158a-159a.png") { tmpl_sprite_train12(4, 280) }
spriteset(sset_ab9mnopuz_c1_cut, "gfx/158a-159a.png") { tmpl_sprite_train12(4, 320) }
spriteset(sset_ab9mnopuz_c2_rear, "gfx/158a-159a.png") { tmpl_sprite_train(32, 360) }
spriteset(sset_ab9mnopuz_c2_rear_open, "gfx/158a-159a.png") { tmpl_sprite_train(32, 400) }
spriteset(sset_ab9mnopuz_c1_rear, "gfx/158a-159a.png") { tmpl_sprite_train(32, 440) }
spriteset(sset_ab9mnopuz_c1_rear_open, "gfx/158a-159a.png") { tmpl_sprite_train(32, 480) }
spritegroup sgroup_ab9mnopuz_c2 {
    loaded: [sset_ab9mnopuz_c2];
    loading: [sset_ab9mnopuz_c2_open];
}
spritegroup sgroup_ab9mnopuz_c1 {
    loaded: [sset_ab9mnopuz_c1];
    loading: [sset_ab9mnopuz_c1_open];
}
spritegroup sgroup_ab9mnopuz_c2_rear {
    loaded: [sset_ab9mnopuz_c2_rear];
    loading: [sset_ab9mnopuz_c2_rear_open];
}
spritegroup sgroup_ab9mnopuz_c1_rear {
    loaded: [sset_ab9mnopuz_c1_rear];
    loading: [sset_ab9mnopuz_c1_rear_open];
}







switch(FEAT_TRAINS, SELF, switch_ab9mnopuz_articulated, extra_callback_info1) {
    1: return item_ab9mnopuz;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_ab9mnopuz_2_cut_front, other_veh_is_hidden(1)) {
    1: return sset_ab9mnopuz_c2_cut;
    return sgroup_ab9mnopuz_c2;
}
switch(FEAT_TRAINS, SELF, switch_ab9mnopuz_2_extra_front,
   [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1),
    STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1),
    STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1),
    LOAD_TEMP(1)]) {
    -2..-1: return sset_ab9mnopuz_c2_l;
    1..2: return sset_ab9mnopuz_c2_r;
    return switch_ab9mnopuz_2_cut_front;
}
switch(FEAT_TRAINS, SELF, switch_ab9mnopuz_2_front, (extra_callback_info1&0xFF)==0) {
    1: return switch_ab9mnopuz_2_extra_front;
    return sgroup_ab9mnopuz_c2;
}
switch(FEAT_TRAINS, SELF, switch_ab9mnopuz_2_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) {
    1: return sgroup_ab9mnopuz_c2_rear;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_ab9mnopuz_2_graphics, position_in_vehid_chain % 2) {
    1: return switch_ab9mnopuz_2_rear;
    return switch_ab9mnopuz_2_front;
}
switch(FEAT_TRAINS, SELF, switch_ab9mnopuz_1_cut_front, other_veh_is_hidden(1)) {
    1: return sset_ab9mnopuz_c1_cut;
    return sgroup_ab9mnopuz_c1;
}
switch(FEAT_TRAINS, SELF, switch_ab9mnopuz_1_extra_front,
   [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1),
    STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1),
    STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1),
    LOAD_TEMP(1)]) {
    -2..-1: return sset_ab9mnopuz_c1_l;
    1..2: return sset_ab9mnopuz_c1_r;
    return switch_ab9mnopuz_1_cut_front;
}
switch(FEAT_TRAINS, SELF, switch_ab9mnopuz_1_front, (extra_callback_info1&0xFF)==0) {
    1: return switch_ab9mnopuz_1_extra_front;
    return sgroup_ab9mnopuz_c1;
}
switch(FEAT_TRAINS, SELF, switch_ab9mnopuz_1_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) {
    1: return sgroup_ab9mnopuz_c1_rear;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_ab9mnopuz_1_graphics, position_in_vehid_chain % 2) {
    1: return switch_ab9mnopuz_1_rear;
    return switch_ab9mnopuz_1_front;
}
switch(FEAT_TRAINS, SELF, switch_ab9mnopuz_graphics, cargo_subtype % 2) {
    1: return switch_ab9mnopuz_1_graphics;
    return switch_ab9mnopuz_2_graphics;
}
switch(FEAT_TRAINS, SELF, switch_ab9mnopuz_length, position_in_vehid_chain % 2) {
    1: return 4;
    return 8;
}
switch(FEAT_TRAINS, SELF, switch_ab9mnopuz_capacity, (position_in_vehid_chain%2)*2 + cargo_subtype%2) {
    0: return 72-1;
    1: return 54-1;
    return 1;
}
switch (FEAT_TRAINS, SELF, switch_ab9mnopuz_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_4L, string(STR_BRAKE_AIR), string(STR_HEATING_ELECTRIC_TEXT), string(STR_AB9MNOPUZ_TEXT), string(STR_INCOME_1_CLASS));
    return string(STR_PURCHASE_DESCR_3L, string(STR_BRAKE_AIR), string(STR_AB9MNOPUZ_TEXT), string(STR_INCOME_1_CLASS));
}




item(FEAT_TRAINS, item_ab9mnopuz) {
    property {

        name: string(STR_AB9MNOPUZ_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(2010, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 7;
        cost_factor: 98;
        running_cost_factor: 8 +2;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 230 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: int(72/2);
        weight: 50 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0, 2);
    }

    graphics {
        purchase: sset_ab9mnopuz_purchase;
        additional_text: switch_ab9mnopuz_add_text;
        default: switch_ab9mnopuz_graphics;
        cargo_subtype_text: switch_new_subtype_text;
        articulated_part: switch_ab9mnopuz_articulated;
        length: switch_ab9mnopuz_length;
        purchase_cargo_capacity: return int(72/2);
        cargo_capacity: switch_ab9mnopuz_capacity;
        cargo_age_period: switch_new_cargo_age_period;
        refit_cost: switch_new_refit_cost;
    }
}
# 253 "src/pkp.pnml" 2
# 1 "src/wagons/wlabwxz.pnml" 1





spriteset(sset_wlabwxz_purchase, "gfx/gorlitz67.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_wlabwxz, "gfx/gorlitz67.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_wlabwxz_open, "gfx/gorlitz67.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_wlabwxz_cut, "gfx/gorlitz67.png") { tmpl_sprite_train12(4, 120) }

spritegroup sgroup_wlabwxz {
    loaded: [sset_wlabwxz];
    loading: [sset_wlabwxz_open];
}


switch(FEAT_TRAINS, SELF, switch_wlabwxz_articulated, extra_callback_info1) {
    1: return item_dummy_3;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_wlabwxz_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_wlabwxz_cut;
    return sgroup_wlabwxz;
}







item(FEAT_TRAINS, item_wlabwxz) {
    property {

        name: string(STR_WLABWXZ_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1967, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 6;
        cost_factor: 71;
        running_cost_factor: 8 + 4;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 140 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 32;
        weight: 48 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 18;
        retire_early: 1;
    }
}

    graphics {
        purchase: sset_wlabwxz_purchase;
        additional_text: return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_AIR), string(STR_INCOME_HIGH));
        default: switch_wlabwxz_graphics;
        articulated_part: switch_wlabwxz_articulated;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: return CB_FAILED;
        cargo_age_period: switch_sleep_cargo_age_period;
        colour_mapping: switch_lights_wagon_dkblue_2;
    }
}
# 254 "src/pkp.pnml" 2
# 1 "src/wagons/wlab.pnml" 1
# 9 "src/wagons/wlab.pnml"
spriteset(sset_wlab_purchase, "gfx/wlab.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_wlab, "gfx/wlab.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_wlab_open, "gfx/wlab.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_wlab_cut, "gfx/wlab.png") { tmpl_sprite_train12(4, 120) }

spriteset(sset_wlab_ic, "gfx/gorlitz77.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_wlab_ic_open, "gfx/gorlitz77.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_wlab_ic_cut, "gfx/gorlitz77.png") { tmpl_sprite_train12(4, 120) }

spritegroup sgroup_wlab {
    loaded: [sset_wlab];
    loading: [sset_wlab_open];
}

spritegroup sgroup_wlab_ic {
    loaded: [sset_wlab_ic];
    loading: [sset_wlab_ic_open];
}


switch(FEAT_TRAINS, SELF, switch_wlab_articulated, extra_callback_info1) {
    1: return item_dummy_3;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_wlab_classic_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_wlab_cut;
    return sgroup_wlab;
}
switch(FEAT_TRAINS, SELF, switch_wlab_ic_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_wlab_ic_cut;
    return sgroup_wlab_ic;
}
switch(FEAT_TRAINS, PARENT, switch_wlab_graphics, bitmask_consist_info & bitmask(2)) {
    bitmask(2): return switch_wlab_ic_graphics;
    return switch_wlab_classic_graphics;
}
# 53 "src/wagons/wlab.pnml"
item(FEAT_TRAINS, item_wlab) {
    property {

        name: string(STR_WLAB_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1977, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 6;
        cost_factor: 72;
        running_cost_factor: 8 + 4;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 160 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 32;
        weight: 49 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 69;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_wlab_purchase;
        additional_text: return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_AIR), string(STR_INCOME_HIGH));
        default: switch_wlab_graphics;
        articulated_part: switch_wlab_articulated;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: return CB_FAILED;
        cargo_age_period: switch_sleep_cargo_age_period;
        colour_mapping: switch_lights_wagon_dkblue_2;
    }
}
# 255 "src/pkp.pnml" 2
# 1 "src/wagons/wlab10mnouz.pnml" 1





spriteset(sset_wlab10mnouz_purchase, "gfx/305ad.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_wlab10mnouz, "gfx/305ad.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_wlab10mnouz_open, "gfx/305ad.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_wlab10mnouz_l, "gfx/305ad.png") { tmpl_sprite_train12_l(4, 120) }
spriteset(sset_wlab10mnouz_r, "gfx/305ad.png") { tmpl_sprite_train12_r(4, 120) }
spriteset(sset_wlab10mnouz_cut, "gfx/305ad.png") { tmpl_sprite_train12(4, 160) }
spriteset(sset_wlab10mnouz_rear, "gfx/305ad.png") { tmpl_sprite_train12_rear(4, 20) }
spriteset(sset_wlab10mnouz_rear_open, "gfx/305ad.png") { tmpl_sprite_train12_rear(4, 80) }
spritegroup sgroup_wlab10mnouz {
    loaded: [sset_wlab10mnouz];
    loading: [sset_wlab10mnouz_open];
}
spritegroup sgroup_wlab10mnouz_rear {
    loaded: [sset_wlab10mnouz_rear];
    loading: [sset_wlab10mnouz_rear_open];
}







switch(FEAT_TRAINS, SELF, switch_wlab10mnouz_articulated, extra_callback_info1) {
    1: return item_wlab10mnouz;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_wlab10mnouz_cut_front, other_veh_is_hidden(1)) {
    1: return sset_wlab10mnouz_cut;
    return sgroup_wlab10mnouz;
}
switch(FEAT_TRAINS, SELF, switch_wlab10mnouz_extra_front,
   [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1),
    STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1),
    STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1),
    LOAD_TEMP(1)]) {
    -2..-1: return sset_wlab10mnouz_l;
    1..2: return sset_wlab10mnouz_r;
    return switch_wlab10mnouz_cut_front;
}
switch(FEAT_TRAINS, SELF, switch_wlab10mnouz_front, (extra_callback_info1&0xFF)==0) {
    1: return switch_wlab10mnouz_extra_front;
    return sgroup_wlab10mnouz;
}
switch(FEAT_TRAINS, SELF, switch_wlab10mnouz_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) {
    1: return sgroup_wlab10mnouz_rear;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_wlab10mnouz_graphics, position_in_vehid_chain % 2) {
    1: return switch_wlab10mnouz_rear;
    return switch_wlab10mnouz_front;
}
switch(FEAT_TRAINS, SELF, switch_wlab10mnouz_length, position_in_vehid_chain % 2) {
    1: return 4;
    return 8;
}
switch (FEAT_TRAINS, SELF, switch_wlab10mnouz_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_3L, string(STR_BRAKE_AIR), string(STR_HEATING_ELECTRIC_TEXT), string(STR_INCOME_HIGH));
    return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_AIR), string(STR_INCOME_HIGH));
}




item(FEAT_TRAINS, item_wlab10mnouz) {
    property {

        name: string(STR_WLAB10MNOUZ_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(2004, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 6;
        cost_factor: 94;
        running_cost_factor: 8 +1 + 4;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 200 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: int(30/2);
        weight: 55 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0);
    }

    graphics {
        purchase: sset_wlab10mnouz_purchase;
        additional_text: switch_wlab10mnouz_add_text;
        default: switch_wlab10mnouz_graphics;
        articulated_part: switch_wlab10mnouz_articulated;
        length: switch_wlab10mnouz_length;
        purchase_cargo_capacity: return int(30/2);
        cargo_capacity: return int(30/2);
        cargo_age_period: switch_sleep_cargo_age_period;
        colour_mapping: switch_lights_wagon_dkblue_2;
    }
}
# 256 "src/pkp.pnml" 2
# 1 "src/wagons/jhx.pnml" 1





spriteset(sset_jhx_purchase, "gfx/wr4u-34.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_jhx, "gfx/wr4u-34.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_jhx_open, "gfx/wr4u-34.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_jhx_cut, "gfx/wr4u-34.png") { tmpl_sprite_train12(4, 120) }
spritegroup sgroup_jhx {
    loaded: [sset_jhx];
    loading: [sset_jhx_open];
}


switch(FEAT_TRAINS, SELF, switch_jhx_articulated, extra_callback_info1) {
    1: return item_dummy_3;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_jhx_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_jhx_cut;
    return sgroup_jhx;
}


item(FEAT_TRAINS, item_jhx) {
    property {

        name: string(STR_JHX_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1934, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 1;
        cost_factor: 56;
        running_cost_factor: 8 + 4;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 1;
        weight: 41 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0, 4);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 56;
        retire_early: 16;
    }
}
    graphics {
        purchase: sset_jhx_purchase;
        additional_text: return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_AIR), string(STR_INCOME_ALL_EXPRESS));
        default: switch_jhx_graphics;
        articulated_part: switch_jhx_articulated;
        purchase_cargo_capacity: return 0;
        cargo_capacity: return 0;
        colour_mapping: switch_lights_wagon_olive_2;
    }
}
# 257 "src/pkp.pnml" 2
# 1 "src/wagons/jhix.pnml" 1





spriteset(sset_jhix_purchase, "gfx/bautzen60.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_jhix, "gfx/bautzen60.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_jhix_open, "gfx/bautzen60.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_jhix_cut, "gfx/bautzen60.png") { tmpl_sprite_train12(4, 120) }
spritegroup sgroup_jhix {
    loaded: [sset_jhix];
    loading: [sset_jhix_open];
}


switch(FEAT_TRAINS, SELF, switch_jhix_articulated, extra_callback_info1) {
    1: return item_dummy_3;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_jhix_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_jhix_cut;
    return sgroup_jhix;
}
switch (FEAT_TRAINS, SELF, switch_jhix_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_3L, string(STR_BRAKE_AIR), string(STR_HEATING_ST_EL_TEXT), string(STR_INCOME_ALL_EXPRESS));
    return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_AIR), string(STR_INCOME_ALL_EXPRESS));
}


item(FEAT_TRAINS, item_jhix) {
    property {

        name: string(STR_JHIX_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1960, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 1;
        cost_factor: 70;
        running_cost_factor: 8 + 4;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 140 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 1;
        weight: 46 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0, 4);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 53;
        retire_early: 16;
    }
}
    graphics {
        purchase: sset_jhix_purchase;
        additional_text: switch_jhix_add_text;
        default: switch_jhix_graphics;
        articulated_part: switch_jhix_articulated;
        purchase_cargo_capacity: return 0;
        cargo_capacity: return 0;
        colour_mapping: switch_lights_wagon_red_2;
    }
}
# 258 "src/pkp.pnml" 2
# 1 "src/wagons/wrdmnu.pnml" 1





spriteset(sset_wrdmnu_purchase, "gfx/bautzen89.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_wrdmnu_red, "gfx/bautzen89.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_wrdmnu_ic, "gfx/bautzen89.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_wrdmnu_red_open, "gfx/bautzen89.png") { tmpl_sprite_train12(4, 120) }
spriteset(sset_wrdmnu_ic_open, "gfx/bautzen89.png") { tmpl_sprite_train12(4, 160) }
spriteset(sset_wrdmnu_red_l, "gfx/bautzen89.png") { tmpl_sprite_train12_l(4, 200) }
spriteset(sset_wrdmnu_red_r, "gfx/bautzen89.png") { tmpl_sprite_train12_r(4, 200) }
spriteset(sset_wrdmnu_ic_l, "gfx/bautzen89.png") { tmpl_sprite_train12_l(4, 240) }
spriteset(sset_wrdmnu_ic_r, "gfx/bautzen89.png") { tmpl_sprite_train12_r(4, 240) }
spriteset(sset_wrdmnu_red_cut, "gfx/bautzen89.png") { tmpl_sprite_train12(4, 280) }
spriteset(sset_wrdmnu_ic_cut, "gfx/bautzen89.png") { tmpl_sprite_train12(4, 320) }
spriteset(sset_wrdmnu_red_rear, "gfx/bautzen89.png") { tmpl_sprite_train12_rear(4, 20) }
spriteset(sset_wrdmnu_ic_rear, "gfx/bautzen89.png") { tmpl_sprite_train12_rear(4, 80) }
spriteset(sset_wrdmnu_red_rear_open, "gfx/bautzen89.png") { tmpl_sprite_train12_rear(4, 120) }
spriteset(sset_wrdmnu_ic_rear_open, "gfx/bautzen89.png") { tmpl_sprite_train12_rear(4, 160) }
spritegroup sgroup_wrdmnu_red {
    loaded: [sset_wrdmnu_red];
    loading: [sset_wrdmnu_red_open];
}
spritegroup sgroup_wrdmnu_ic {
    loaded: [sset_wrdmnu_ic];
    loading: [sset_wrdmnu_ic_open];
}
spritegroup sgroup_wrdmnu_red_rear {
    loaded: [sset_wrdmnu_red_rear];
    loading: [sset_wrdmnu_red_rear_open];
}
spritegroup sgroup_wrdmnu_ic_rear {
    loaded: [sset_wrdmnu_ic_rear];
    loading: [sset_wrdmnu_ic_rear_open];
}



switch (FEAT_TRAINS, SELF, switch_wrdmnu_subtype_text_refit, cargo_subtype) {
    0: return string(STR_SUBTYPE_LIVERY_CLASSIC);
    1: return string(STR_SUBTYPE_LIVERY_PKP_IC);
    return CB_RESULT_NO_TEXT;
}
switch (FEAT_TRAINS, SELF, switch_wrdmnu_subtype_text, current_year >= 2010) {
    1: return switch_wrdmnu_subtype_text_refit;
    return CB_RESULT_NO_TEXT;
}
switch(FEAT_TRAINS, SELF, switch_wrdmnu_articulated, extra_callback_info1) {
    1: return item_wrdmnu;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_wrdmnu_red_cut_front, other_veh_is_hidden(1)) {
    1: return sset_wrdmnu_red_cut;
    return sgroup_wrdmnu_red;
}
switch(FEAT_TRAINS, SELF, switch_wrdmnu_red_extra_front,
   [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1),
    STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1),
    STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1),
    LOAD_TEMP(1)]) {
    -2..-1: return sset_wrdmnu_red_l;
    1..2: return sset_wrdmnu_red_r;
    return switch_wrdmnu_red_cut_front;
}
switch(FEAT_TRAINS, SELF, switch_wrdmnu_red_front, (extra_callback_info1&0xFF)==0) {
    1: return switch_wrdmnu_red_extra_front;
    return sgroup_wrdmnu_red;
}
switch(FEAT_TRAINS, SELF, switch_wrdmnu_red_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) {
    1: return sgroup_wrdmnu_red_rear;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_wrdmnu_red_graphics, position_in_vehid_chain % 2) {
    1: return switch_wrdmnu_red_rear;
    return switch_wrdmnu_red_front;
}
switch(FEAT_TRAINS, SELF, switch_wrdmnu_ic_cut_front, other_veh_is_hidden(1)) {
    1: return sset_wrdmnu_ic_cut;
    return sgroup_wrdmnu_ic;
}
switch(FEAT_TRAINS, SELF, switch_wrdmnu_ic_extra_front,
   [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1),
    STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1),
    STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1),
    LOAD_TEMP(1)]) {
    -2..-1: return sset_wrdmnu_ic_l;
    1..2: return sset_wrdmnu_ic_r;
    return switch_wrdmnu_ic_cut_front;
}
switch(FEAT_TRAINS, SELF, switch_wrdmnu_ic_front, (extra_callback_info1&0xFF)==0) {
    1: return switch_wrdmnu_ic_extra_front;
    return sgroup_wrdmnu_ic;
}
switch(FEAT_TRAINS, SELF, switch_wrdmnu_ic_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) {
    1: return sgroup_wrdmnu_ic_rear;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_wrdmnu_ic_graphics, position_in_vehid_chain % 2) {
    1: return switch_wrdmnu_ic_rear;
    return switch_wrdmnu_ic_front;
}
switch(FEAT_TRAINS, SELF, switch_wrdmnu_graphics, cargo_subtype % 2) {
    1: return switch_wrdmnu_ic_graphics;
    return switch_wrdmnu_red_graphics;
}
switch(FEAT_TRAINS, SELF, switch_wrdmnu_length, position_in_vehid_chain % 2) {
    1: return 4;
    return 8;
}
switch (FEAT_TRAINS, SELF, switch_wrdmnu_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_3L, string(STR_BRAKE_AIR), string(STR_HEATING_ELECTRIC_TEXT), string(STR_INCOME_ALL_EXPRESS));
    return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_AIR), string(STR_INCOME_ALL_EXPRESS));
}


item(FEAT_TRAINS, item_wrdmnu) {
    property {

        name: string(STR_WRDMNU_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1989, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 5;
        cost_factor: 80;
        running_cost_factor: 8 +1 + 4;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 160 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 1;
        weight: 48 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0, 4);
    }

    graphics {
        purchase: sset_wrdmnu_purchase;
        additional_text: switch_wrdmnu_add_text;
        default: switch_wrdmnu_graphics;
        cargo_subtype_text: switch_wrdmnu_subtype_text;
        articulated_part: switch_wrdmnu_articulated;
        length: switch_wrdmnu_length;
        purchase_cargo_capacity: return 0;
        cargo_capacity: return 0;
    }
}
# 259 "src/pkp.pnml" 2
# 1 "src/wagons/wrmnouz.pnml" 1





spriteset(sset_wrmnouz_purchase, "gfx/407a.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_wrmnouz, "gfx/407a.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_wrmnouz_open, "gfx/407a.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_wrmnouz_l, "gfx/407a.png") { tmpl_sprite_train12_l(4, 120) }
spriteset(sset_wrmnouz_r, "gfx/407a.png") { tmpl_sprite_train12_r(4, 120) }
spriteset(sset_wrmnouz_cut, "gfx/407a.png") { tmpl_sprite_train12(4, 160) }
spriteset(sset_wrmnouz_rear, "gfx/407a.png") { tmpl_sprite_train12_rear(4, 20) }
spriteset(sset_wrmnouz_rear_open, "gfx/407a.png") { tmpl_sprite_train12_rear(4, 80) }
spritegroup sgroup_wrmnouz {
    loaded: [sset_wrmnouz];
    loading: [sset_wrmnouz_open];
}
spritegroup sgroup_wrmnouz_rear {
    loaded: [sset_wrmnouz_rear];
    loading: [sset_wrmnouz_rear_open];
}


switch(FEAT_TRAINS, SELF, switch_wrmnouz_articulated, extra_callback_info1) {
    1: return item_wrmnouz;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_wrmnouz_cut_front, other_veh_is_hidden(1)) {
    1: return sset_wrmnouz_cut;
    return sgroup_wrmnouz;
}
switch(FEAT_TRAINS, SELF, switch_wrmnouz_extra_front,
   [STORE_TEMP(curv_info_prev_cur, 0), STORE_TEMP(curv_info_cur_next, 1),
    STORE_TEMP((LOAD_TEMP(0)<0 && LOAD_TEMP(1)<0)?0:LOAD_TEMP(1), 1),
    STORE_TEMP((LOAD_TEMP(0)>0 && LOAD_TEMP(1)>0)?0:LOAD_TEMP(1), 1),
    LOAD_TEMP(1)]) {
    -2..-1: return sset_wrmnouz_l;
    1..2: return sset_wrmnouz_r;
    return switch_wrmnouz_cut_front;
}
switch(FEAT_TRAINS, SELF, switch_wrmnouz_front, (extra_callback_info1&0xFF)==0) {
    1: return switch_wrmnouz_extra_front;
    return sgroup_wrmnouz;
}
switch(FEAT_TRAINS, SELF, switch_wrmnouz_rear, (extra_callback_info1&0xFF)==0 && curv_info_prev_cur==0 && other_veh_z_offset(-1)==0 ) {
    1: return sgroup_wrmnouz_rear;
    return sset_dummy;
}
switch(FEAT_TRAINS, SELF, switch_wrmnouz_graphics, position_in_vehid_chain % 2) {
    1: return switch_wrmnouz_rear;
    return switch_wrmnouz_front;
}
switch(FEAT_TRAINS, SELF, switch_wrmnouz_length, position_in_vehid_chain % 2) {
    1: return 4;
    return 8;
}
switch (FEAT_TRAINS, SELF, switch_wrmnouz_add_text, climate == CLIMATE_ARCTIC ) {
    1: return string(STR_PURCHASE_DESCR_3L, string(STR_BRAKE_AIR), string(STR_HEATING_ELECTRIC_TEXT), string(STR_INCOME_ALL_EXPRESS));
    return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_AIR), string(STR_INCOME_ALL_EXPRESS));
}


item(FEAT_TRAINS, item_wrmnouz) {
    property {

        name: string(STR_WRMNOUZ_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(2013, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: []; default_cargo_type: PASS;
        loading_speed: 5;
        cost_factor: 96;
        running_cost_factor: 8 +2 + 4;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 200 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 1;
        weight: 56 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(0, 4);
    }

    graphics {
        purchase: sset_wrmnouz_purchase;
        additional_text: switch_wrmnouz_add_text;
        default: switch_wrmnouz_graphics;
        articulated_part: switch_wrmnouz_articulated;
        length: switch_wrmnouz_length;
        purchase_cargo_capacity: return 0;
        cargo_capacity: return 0;
    }
}
# 260 "src/pkp.pnml" 2

# 1 "src/wagons/wddo.pnml" 1





spriteset(sset_wddo_purchase, "gfx/wddo.png") { tmpl_sprite_purchase(4, 100) }
spriteset(sset_wddo_empty, "gfx/wddo.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_wddo_half, "gfx/wddo.png") { tmpl_sprite_train(4, 120) }
spriteset(sset_wddo_full, "gfx/wddo.png") { tmpl_sprite_train(4, 200) }
spriteset(sset_wddo_wood_half, "gfx/wddo.png") { tmpl_sprite_train(4, 280) }
spriteset(sset_wddo_wood_full, "gfx/wddo.png") { tmpl_sprite_train(4, 360) }
spriteset(sset_wddo_wdpr_half, "gfx/wddo.png") { tmpl_sprite_train(4, 440) }
spriteset(sset_wddo_wdpr_full, "gfx/wddo.png") { tmpl_sprite_train(4, 520) }

alternative_sprites(sset_wddo_empty,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/wddo-x2.png") { tmpl_sprite_train_x2(8, 40) }
alternative_sprites(sset_wddo_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/wddo-x2.png") { tmpl_sprite_train_x2(8, 200) }
alternative_sprites(sset_wddo_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/wddo-x2.png") { tmpl_sprite_train_x2(8, 360) }
alternative_sprites(sset_wddo_wood_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/wddo-x2.png") { tmpl_sprite_train_x2(8, 520) }
alternative_sprites(sset_wddo_wood_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/wddo-x2.png") { tmpl_sprite_train_x2(8, 680) }
alternative_sprites(sset_wddo_wdpr_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/wddo-x2.png") { tmpl_sprite_train_x2(8, 840) }
alternative_sprites(sset_wddo_wdpr_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/wddo-x2.png") { tmpl_sprite_train_x2(8, 1000) }

spritegroup sgroup_wddo {
    loaded: [sset_wddo_empty, sset_wddo_half, sset_wddo_full];
    loading: [sset_wddo_empty, sset_wddo_half, sset_wddo_full];
}
spritegroup sgroup_wddo_wood {
    loaded: [sset_wddo_empty, sset_wddo_wood_half, sset_wddo_wood_full];
    loading: [sset_wddo_empty, sset_wddo_wood_half, sset_wddo_wood_full];
}
spritegroup sgroup_wddo_wdpr {
    loaded: [sset_wddo_empty, sset_wddo_wdpr_half, sset_wddo_wdpr_full];
    loading: [sset_wddo_empty, sset_wddo_wdpr_half, sset_wddo_wdpr_full];
}

spriteset(sset_wddoh_purchase, "gfx/wddo.png") { tmpl_sprite_purchase(124, 100) }
spriteset(sset_wddoh_empty, "gfx/wddo.png") { tmpl_sprite_train(4, 60) }
spriteset(sset_wddoh_half, "gfx/wddo.png") { tmpl_sprite_train(4, 160) }
spriteset(sset_wddoh_full, "gfx/wddo.png") { tmpl_sprite_train(4, 240) }
spriteset(sset_wddoh_wood_half, "gfx/wddo.png") { tmpl_sprite_train(4, 320) }
spriteset(sset_wddoh_wood_full, "gfx/wddo.png") { tmpl_sprite_train(4, 400) }
spriteset(sset_wddoh_wdpr_half, "gfx/wddo.png") { tmpl_sprite_train(4, 480) }
spriteset(sset_wddoh_wdpr_full, "gfx/wddo.png") { tmpl_sprite_train(4, 560) }

alternative_sprites(sset_wddoh_empty,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/wddo-x2.png") { tmpl_sprite_train_x2(8, 120) }
alternative_sprites(sset_wddoh_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/wddo-x2.png") { tmpl_sprite_train_x2(8, 280) }
alternative_sprites(sset_wddoh_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/wddo-x2.png") { tmpl_sprite_train_x2(8, 440) }
alternative_sprites(sset_wddoh_wood_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/wddo-x2.png") { tmpl_sprite_train_x2(8, 600) }
alternative_sprites(sset_wddoh_wood_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/wddo-x2.png") { tmpl_sprite_train_x2(8, 760) }
alternative_sprites(sset_wddoh_wdpr_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/wddo-x2.png") { tmpl_sprite_train_x2(8, 920) }
alternative_sprites(sset_wddoh_wdpr_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/wddo-x2.png") { tmpl_sprite_train_x2(8, 1080) }

spritegroup sgroup_wddoh {
    loaded: [sset_wddoh_empty, sset_wddoh_half, sset_wddoh_full];
    loading: [sset_wddoh_empty, sset_wddoh_half, sset_wddoh_full];
}
spritegroup sgroup_wddoh_wood {
    loaded: [sset_wddoh_empty, sset_wddoh_wood_half, sset_wddoh_wood_full];
    loading: [sset_wddoh_empty, sset_wddoh_wood_half, sset_wddoh_wood_full];
}
spritegroup sgroup_wddoh_wdpr {
    loaded: [sset_wddoh_empty, sset_wddoh_wdpr_half, sset_wddoh_wdpr_full];
    loading: [sset_wddoh_empty, sset_wddoh_wdpr_half, sset_wddoh_wdpr_full];
}


switch(FEAT_TRAINS, SELF, switch_wddoh_capacity, cargo_type_in_veh) {
    WOOD: return 18;
    WDPR: return 18;
    return CB_FAILED;
}
switch(FEAT_TRAINS, SELF, switch_wddoh_loading_speed, cargo_type_in_veh) {
    WOOD: return 3;
    WDPR: return 3;
    return CB_FAILED;
}
switch (FEAT_TRAINS, PARENT, switch_WDDOH_running_cost, vehicle_is_in_depot & (current_speed == 0) ) { 1: return 2; return 2 +3; }


item(FEAT_TRAINS, item_wddo) {
    property {

        name: string(STR_WDDO_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_BULK); non_refittable_cargo_classes: bitmask(CC_REFRIGERATED); cargo_allow_refit: [WOOD]; cargo_disallow_refit: [GRAI, WHEA, CERE, FICR, CBLK, CMNT, SUGR, BEAN, QLME, SASH, KAOL, SALT, PLAS, FERT]; default_cargo_type: COAL;
        loading_speed: 5;
        cost_factor: 12;
        running_cost_factor: 1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 65 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 21;
        weight: 11 ton;
        length: 6;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
 }
} else {
    property {
        model_life: 66;
  retire_early: 16;
 }
}

    graphics {
        WOOD: sgroup_wddo_wood;
        WDPR: sgroup_wddo_wdpr;
        purchase: sset_wddo_purchase;
  additional_text: return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_NONE), string(STR_CAPACITY_NON_FRIABLE));
        default: sgroup_wddo;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_wddoh_capacity;
        loading_speed: switch_wddoh_loading_speed;
        colour_mapping: switch_bulk_recolour;
    }
}


item(FEAT_TRAINS, item_wddoh) {
    property {

        name: string(STR_WDDOH_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_BULK); non_refittable_cargo_classes: bitmask(CC_REFRIGERATED); cargo_allow_refit: [WOOD]; cargo_disallow_refit: [GRAI, WHEA, CERE, FICR, CBLK, CMNT, SUGR, BEAN, QLME, SASH, KAOL, SALT, PLAS, FERT]; default_cargo_type: COAL;
        loading_speed: 5;
        cost_factor: 13;


        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 65 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 21;
        weight: 12 ton;
        length: 7;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
 }
} else {
    property {
        model_life: 66;
  retire_early: 16;
 }
}

    graphics {
        WOOD: sgroup_wddoh_wood;
        WDPR: sgroup_wddoh_wdpr;
        purchase: sset_wddoh_purchase;
  additional_text: return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_HAND), string(STR_CAPACITY_NON_FRIABLE));
        default: sgroup_wddoh;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_wddoh_capacity;
        loading_speed: switch_wddoh_loading_speed;
        colour_mapping: switch_bulk_recolour;
        purchase_running_cost_factor: return 2 +3; running_cost_factor: switch_WDDOH_running_cost;
    }
}
# 262 "src/pkp.pnml" 2
# 1 "src/wagons/wddo-2w.pnml" 1





spriteset(sset_wddo_2w_purchase, "gfx/2w-gray.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_wddo_2w_gray_empty, "gfx/2w-gray.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_wddo_2w_gray_half, "gfx/2w-gray.png") { tmpl_sprite_train(4, 80) }
spriteset(sset_wddo_2w_gray_full, "gfx/2w-gray.png") { tmpl_sprite_train(4, 120) }
spriteset(sset_wddo_2w_gray_wood_half, "gfx/2w-gray.png") { tmpl_sprite_train(4, 160) }
spriteset(sset_wddo_2w_gray_wood_full, "gfx/2w-gray.png") { tmpl_sprite_train(4, 200) }
spriteset(sset_wddo_2w_gray_wdpr_half, "gfx/2w-gray.png") { tmpl_sprite_train(4, 240) }
spriteset(sset_wddo_2w_gray_wdpr_full, "gfx/2w-gray.png") { tmpl_sprite_train(4, 280) }

alternative_sprites(sset_wddo_2w_gray_empty,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/2w-gray-x2.png") { tmpl_sprite_train_x2(8, 40) }
alternative_sprites(sset_wddo_2w_gray_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/2w-gray-x2.png") { tmpl_sprite_train_x2(8, 120) }
alternative_sprites(sset_wddo_2w_gray_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/2w-gray-x2.png") { tmpl_sprite_train_x2(8, 200) }
alternative_sprites(sset_wddo_2w_gray_wood_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/2w-gray-x2.png") { tmpl_sprite_train_x2(8, 280) }
alternative_sprites(sset_wddo_2w_gray_wood_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/2w-gray-x2.png") { tmpl_sprite_train_x2(8, 360) }
alternative_sprites(sset_wddo_2w_gray_wdpr_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/2w-gray-x2.png") { tmpl_sprite_train_x2(8, 440) }
alternative_sprites(sset_wddo_2w_gray_wdpr_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/2w-gray-x2.png") { tmpl_sprite_train_x2(8, 520) }

spritegroup sgroup_wddo_2w_gray {
    loaded: [sset_wddo_2w_gray_empty, sset_wddo_2w_gray_half, sset_wddo_2w_gray_full];
    loading: [sset_wddo_2w_gray_empty, sset_wddo_2w_gray_half, sset_wddo_2w_gray_full];
}
spritegroup sgroup_wddo_2w_gray_wood {
    loaded: [sset_wddo_2w_gray_empty, sset_wddo_2w_gray_wood_half, sset_wddo_2w_gray_wood_full];
    loading: [sset_wddo_2w_gray_empty, sset_wddo_2w_gray_wood_half, sset_wddo_2w_gray_wood_full];
}
spritegroup sgroup_wddo_2w_gray_wdpr {
    loaded: [sset_wddo_2w_gray_empty, sset_wddo_2w_gray_wdpr_half, sset_wddo_2w_gray_wdpr_full];
    loading: [sset_wddo_2w_gray_empty, sset_wddo_2w_gray_wdpr_half, sset_wddo_2w_gray_wdpr_full];
}
spriteset(sset_wddo_2w_brown_empty, "gfx/2w.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_wddo_2w_brown_half, "gfx/2w.png") { tmpl_sprite_train(4, 80) }
spriteset(sset_wddo_2w_brown_full, "gfx/2w.png") { tmpl_sprite_train(4, 120) }
spriteset(sset_wddo_2w_brown_wood_half, "gfx/2w.png") { tmpl_sprite_train(4, 160) }
spriteset(sset_wddo_2w_brown_wood_full, "gfx/2w.png") { tmpl_sprite_train(4, 200) }
spriteset(sset_wddo_2w_brown_wdpr_half, "gfx/2w.png") { tmpl_sprite_train(4, 240) }
spriteset(sset_wddo_2w_brown_wdpr_full, "gfx/2w.png") { tmpl_sprite_train(4, 280) }

alternative_sprites(sset_wddo_2w_brown_empty,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/2w-x2.png") { tmpl_sprite_train_x2(8, 40) }
alternative_sprites(sset_wddo_2w_brown_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/2w-x2.png") { tmpl_sprite_train_x2(8, 120) }
alternative_sprites(sset_wddo_2w_brown_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/2w-x2.png") { tmpl_sprite_train_x2(8, 200) }
alternative_sprites(sset_wddo_2w_brown_wood_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/2w-x2.png") { tmpl_sprite_train_x2(8, 280) }
alternative_sprites(sset_wddo_2w_brown_wood_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/2w-x2.png") { tmpl_sprite_train_x2(8, 360) }
alternative_sprites(sset_wddo_2w_brown_wdpr_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/2w-x2.png") { tmpl_sprite_train_x2(8, 440) }
alternative_sprites(sset_wddo_2w_brown_wdpr_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/2w-x2.png") { tmpl_sprite_train_x2(8, 520) }

spritegroup sgroup_wddo_2w_brown {
    loaded: [sset_wddo_2w_brown_empty, sset_wddo_2w_brown_half, sset_wddo_2w_brown_full];
    loading: [sset_wddo_2w_brown_empty, sset_wddo_2w_brown_half, sset_wddo_2w_brown_full];
}
spritegroup sgroup_wddo_2w_brown_wood {
    loaded: [sset_wddo_2w_brown_empty, sset_wddo_2w_brown_wood_half, sset_wddo_2w_brown_wood_full];
    loading: [sset_wddo_2w_brown_empty, sset_wddo_2w_brown_wood_half, sset_wddo_2w_brown_wood_full];
}
spritegroup sgroup_wddo_2w_brown_wdpr {
    loaded: [sset_wddo_2w_brown_empty, sset_wddo_2w_brown_wdpr_half, sset_wddo_2w_brown_wdpr_full];
    loading: [sset_wddo_2w_brown_empty, sset_wddo_2w_brown_wdpr_half, sset_wddo_2w_brown_wdpr_full];
}


switch(FEAT_TRAINS, SELF, switch_wddo_2w_capacity, cargo_type_in_veh) {
    WOOD: return 20;
    WDPR: return 20;
    return CB_FAILED;
}
switch(FEAT_TRAINS, SELF, switch_wddo_2w_loading_speed, cargo_type_in_veh) {
    WOOD: return 3;
    WDPR: return 3;
    return CB_FAILED;
}
random_switch(FEAT_TRAINS, SELF, switch_wddo_2w) {
    3: return sgroup_wddo_2w_gray;
    1: return sgroup_wddo_2w_brown;
}
random_switch(FEAT_TRAINS, SELF, switch_wddo_2w_wood) {
    dependent: switch_wddo_2w;
    3: return sgroup_wddo_2w_gray_wood;
    1: return sgroup_wddo_2w_brown_wood;
}
random_switch(FEAT_TRAINS, SELF, switch_wddo_2w_wdpr) {
    dependent: switch_wddo_2w;
    3: return sgroup_wddo_2w_gray_wdpr;
    1: return sgroup_wddo_2w_brown_wdpr;
}


item(FEAT_TRAINS, item_wddo_2w) {
    property {

        name: string(STR_WDDO_2W_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1942, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_BULK); non_refittable_cargo_classes: bitmask(CC_REFRIGERATED); cargo_allow_refit: [WOOD]; cargo_disallow_refit: [GRAI, WHEA, CERE, FICR, CBLK, CMNT, SUGR, BEAN, QLME, SASH, KAOL, SALT, PLAS, FERT]; default_cargo_type: COAL;
        loading_speed: 5;
        cost_factor: 16;
        running_cost_factor: 2;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 80 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 24;
        weight: 10 ton;
        length: 7;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
 }
} else {
    property {
        model_life: 54;
  retire_early: 16;
 }
}

    graphics {
        WOOD: switch_wddo_2w_wood;
        WDPR: switch_wddo_2w_wdpr;
        purchase: sset_wddo_2w_purchase;
  additional_text: return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_AIR), string(STR_CAPACITY_NON_FRIABLE));
        default: switch_wddo_2w;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_wddo_2w_capacity;
        loading_speed: switch_wddo_2w_loading_speed;
        colour_mapping: switch_bulk_recolour;
    }
}
# 263 "src/pkp.pnml" 2
# 1 "src/wagons/es.pnml" 1





spriteset(sset_es_purchase, "gfx/9w.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_es_empty, "gfx/9w.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_es_half, "gfx/9w.png") { tmpl_sprite_train(4, 80) }
spriteset(sset_es_full, "gfx/9w.png") { tmpl_sprite_train(4, 120) }
spriteset(sset_es_wood_half, "gfx/9w.png") { tmpl_sprite_train(4, 160) }
spriteset(sset_es_wood_full, "gfx/9w.png") { tmpl_sprite_train(4, 200) }
spriteset(sset_es_wdpr_half, "gfx/9w.png") { tmpl_sprite_train(4, 240) }
spriteset(sset_es_wdpr_full, "gfx/9w.png") { tmpl_sprite_train(4, 280) }

alternative_sprites(sset_es_empty,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/9w-x2.png") { tmpl_sprite_train_x2(8, 40) }
alternative_sprites(sset_es_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/9w-x2.png") { tmpl_sprite_train_x2(8, 120) }
alternative_sprites(sset_es_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/9w-x2.png") { tmpl_sprite_train_x2(8, 200) }
alternative_sprites(sset_es_wood_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/9w-x2.png") { tmpl_sprite_train_x2(8, 280) }
alternative_sprites(sset_es_wood_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/9w-x2.png") { tmpl_sprite_train_x2(8, 360) }
alternative_sprites(sset_es_wdpr_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/9w-x2.png") { tmpl_sprite_train_x2(8, 440) }
alternative_sprites(sset_es_wdpr_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/9w-x2.png") { tmpl_sprite_train_x2(8, 520) }

spritegroup sgroup_es {
    loaded: [sset_es_empty, sset_es_half, sset_es_full];
    loading: [sset_es_empty, sset_es_half, sset_es_full];
}
spritegroup sgroup_es_wood {
    loaded: [sset_es_empty, sset_es_wood_half, sset_es_wood_full];
    loading: [sset_es_empty, sset_es_wood_half, sset_es_wood_full];
}
spritegroup sgroup_es_wdpr {
    loaded: [sset_es_empty, sset_es_wdpr_half, sset_es_wdpr_full];
    loading: [sset_es_empty, sset_es_wdpr_half, sset_es_wdpr_full];
}


switch(FEAT_TRAINS, SELF, switch_es_capacity, cargo_type_in_veh) {
    WOOD: return 21;
    WDPR: return 21;
    return CB_FAILED;
}
switch(FEAT_TRAINS, SELF, switch_es_loading_speed, cargo_type_in_veh) {
    WOOD: return 4;
    WDPR: return 4;
    return CB_FAILED;
}


item(FEAT_TRAINS, item_es) {
    property {

        name: string(STR_ES_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1952, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_BULK); non_refittable_cargo_classes: bitmask(CC_REFRIGERATED); cargo_allow_refit: [WOOD]; cargo_disallow_refit: [GRAI, WHEA, CERE, FICR, CBLK, CMNT, SUGR, BEAN, QLME, SASH, KAOL, SALT, PLAS, FERT]; default_cargo_type: COAL;
        loading_speed: 6;
        cost_factor: 18;
        running_cost_factor: 2;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 25;
        weight: 11 ton;
        length: 7;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 70;
        retire_early: 16;
    }
}

    graphics {
        WOOD: sgroup_es_wood;
        WDPR: sgroup_es_wdpr;
        purchase: sset_es_purchase;
        additional_text: return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_AIR), string(STR_CAPACITY_NON_FRIABLE));
        default: sgroup_es;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_es_capacity;
        loading_speed: switch_es_loading_speed;
        colour_mapping: switch_bulk_recolour;
    }
}
# 264 "src/pkp.pnml" 2
# 1 "src/wagons/eaos.pnml" 1





spriteset(sset_eaos_old_purchase, "gfx/408w.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_eaos_new_purchase, "gfx/408w.png") { tmpl_sprite_purchase(124, 60) }
spriteset(sset_eaos_old_empty, "gfx/408w.png") { tmpl_sprite_train_sym(4, 20) }
spriteset(sset_eaos_new_empty, "gfx/408w.png") { tmpl_sprite_train_sym(124, 20) }
spriteset(sset_eaos_old_empty_8, "gfx/408w.png") { tmpl_sprite_train_8(4, 20) }
spriteset(sset_eaos_new_empty_8, "gfx/408w.png") { tmpl_sprite_train_8(124, 20) }
spriteset(sset_eaos_old_half, "gfx/408w.png") { tmpl_sprite_train_sym(4, 80) }
spriteset(sset_eaos_new_half, "gfx/408w.png") { tmpl_sprite_train_sym(124, 80) }
spriteset(sset_eaos_old_full, "gfx/408w.png") { tmpl_sprite_train_sym(4, 120) }
spriteset(sset_eaos_new_full, "gfx/408w.png") { tmpl_sprite_train_sym(124, 120) }
spriteset(sset_eaos_old_wood_half, "gfx/408w.png") { tmpl_sprite_train_sym(4, 160) }
spriteset(sset_eaos_new_wood_half, "gfx/408w.png") { tmpl_sprite_train_sym(124, 160) }
spriteset(sset_eaos_old_wood_full, "gfx/408w.png") { tmpl_sprite_train_sym(4, 200) }
spriteset(sset_eaos_new_wood_full, "gfx/408w.png") { tmpl_sprite_train_sym(124, 200) }
spriteset(sset_eaos_old_wdpr_half, "gfx/408w.png") { tmpl_sprite_train(4, 240) }
spriteset(sset_eaos_new_wdpr_half, "gfx/408w.png") { tmpl_sprite_train(4, 280) }
spriteset(sset_eaos_old_wdpr_full, "gfx/408w.png") { tmpl_sprite_train_8(4, 320) }
spriteset(sset_eaos_new_wdpr_full, "gfx/408w.png") { tmpl_sprite_train_8(124, 320) }

alternative_sprites(sset_eaos_old_empty,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/408w-x2.png") { tmpl_sprite_train_sym_x2(8, 40) }
alternative_sprites(sset_eaos_new_empty,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/408w-x2.png") { tmpl_sprite_train_sym_x2(248, 40) }
alternative_sprites(sset_eaos_old_empty_8,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/408w-x2.png") { tmpl_sprite_train_8_x2(8, 40) }
alternative_sprites(sset_eaos_new_empty_8,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/408w-x2.png") { tmpl_sprite_train_8_x2(248, 40) }
alternative_sprites(sset_eaos_old_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/408w-x2.png") { tmpl_sprite_train_sym_x2(8, 120) }
alternative_sprites(sset_eaos_new_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/408w-x2.png") { tmpl_sprite_train_sym_x2(248, 120) }
alternative_sprites(sset_eaos_old_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/408w-x2.png") { tmpl_sprite_train_sym_x2(8, 200) }
alternative_sprites(sset_eaos_new_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/408w-x2.png") { tmpl_sprite_train_sym_x2(248, 200) }
alternative_sprites(sset_eaos_old_wood_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/408w-x2.png") { tmpl_sprite_train_sym_x2(8, 280) }
alternative_sprites(sset_eaos_new_wood_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/408w-x2.png") { tmpl_sprite_train_sym_x2(248, 280) }
alternative_sprites(sset_eaos_old_wood_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/408w-x2.png") { tmpl_sprite_train_sym_x2(8, 360) }
alternative_sprites(sset_eaos_new_wood_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/408w-x2.png") { tmpl_sprite_train_sym_x2(248, 360) }
alternative_sprites(sset_eaos_old_wdpr_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/408w-x2.png") { tmpl_sprite_train_x2(8, 440) }
alternative_sprites(sset_eaos_new_wdpr_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/408w-x2.png") { tmpl_sprite_train_x2(8, 520) }
alternative_sprites(sset_eaos_old_wdpr_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/408w-x2.png") { tmpl_sprite_train_8_x2(8, 600) }
alternative_sprites(sset_eaos_new_wdpr_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/408w-x2.png") { tmpl_sprite_train_8_x2(248, 600) }

spritegroup sgroup_eaos_old {
    loaded: [sset_eaos_old_empty, sset_eaos_old_half, sset_eaos_old_full];
    loading: [sset_eaos_old_empty, sset_eaos_old_half, sset_eaos_old_full];
}
spritegroup sgroup_eaos_new {
    loaded: [sset_eaos_new_empty, sset_eaos_new_half, sset_eaos_new_full];
    loading: [sset_eaos_new_empty, sset_eaos_new_half, sset_eaos_new_full];
}
spritegroup sgroup_eaos_old_wood {
    loaded: [sset_eaos_old_empty, sset_eaos_old_wood_half, sset_eaos_old_wood_full];
    loading: [sset_eaos_old_empty, sset_eaos_old_wood_half, sset_eaos_old_wood_full];
}
spritegroup sgroup_eaos_new_wood {
    loaded: [sset_eaos_new_empty, sset_eaos_new_wood_half, sset_eaos_new_wood_full];
    loading: [sset_eaos_new_empty, sset_eaos_new_wood_half, sset_eaos_new_wood_full];
}
spritegroup sgroup_eaos_old_wdpr {
    loaded: [sset_eaos_old_empty_8, sset_eaos_old_wdpr_half, sset_eaos_old_wdpr_full];
    loading: [sset_eaos_old_empty_8, sset_eaos_old_wdpr_half, sset_eaos_old_wdpr_full];
}
spritegroup sgroup_eaos_new_wdpr {
    loaded: [sset_eaos_new_empty_8, sset_eaos_new_wdpr_half, sset_eaos_new_wdpr_full];
    loading: [sset_eaos_new_empty_8, sset_eaos_new_wdpr_half, sset_eaos_new_wdpr_full];
}



switch(FEAT_TRAINS, SELF, switch_eaos_purchase, build_year >= 2003) {
    1: return sset_eaos_new_purchase;
    return sset_eaos_old_purchase;
}
switch(FEAT_TRAINS, SELF, switch_eaos_graphics, build_year >= 2003) {
    1: return sgroup_eaos_new;
    return sgroup_eaos_old;
}
switch(FEAT_TRAINS, SELF, switch_eaos_wood, build_year >= 2003) {
    1: return sgroup_eaos_new_wood;
    return sgroup_eaos_old_wood;
}
switch(FEAT_TRAINS, SELF, switch_eaos_wdpr, build_year >= 2003) {
    1: return sgroup_eaos_new_wdpr;
    return sgroup_eaos_old_wdpr;
}
switch(FEAT_TRAINS, SELF, switch_eaos_capacity, cargo_type_in_veh) {
    WOOD: return 45;
    WDPR: return 45;
    return CB_FAILED;
}
switch(FEAT_TRAINS, SELF, switch_eaos_loading_speed, cargo_type_in_veh) {
    WOOD: return 6;
    WDPR: return 6;
    return CB_FAILED;
}


item(FEAT_TRAINS, item_eaos) {
    property {

        name: string(STR_EAOS_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1963, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_BULK); non_refittable_cargo_classes: bitmask(CC_REFRIGERATED); cargo_allow_refit: [WOOD]; cargo_disallow_refit: [GRAI, WHEA, CERE, FICR, CBLK, CMNT, SUGR, BEAN, QLME, SASH, KAOL, SALT, PLAS, FERT]; default_cargo_type: COAL;
        loading_speed: 8;
        cost_factor: 23;
        running_cost_factor: 3;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 50;
        weight: 21 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

    graphics {
        WOOD: switch_eaos_wood;
        WDPR: switch_eaos_wdpr;
        purchase: switch_eaos_purchase;
        additional_text: return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_AIR), string(STR_CAPACITY_NON_FRIABLE));
        default: switch_eaos_graphics;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_eaos_capacity;
        loading_speed: switch_eaos_loading_speed;
        colour_mapping: switch_bulk_recolour;
    }
}
# 265 "src/pkp.pnml" 2
# 1 "src/wagons/eanos.pnml" 1





spriteset(sset_eanos_old_purchase, "gfx/415w.png") { tmpl_sprite_purchase(4, 100) }
spriteset(sset_eanos_new_purchase, "gfx/415w.png") { tmpl_sprite_purchase(4, 120) }
spriteset(sset_eanos_old_empty, "gfx/415w.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_eanos_new_empty, "gfx/415w.png") { tmpl_sprite_train10(4, 60) }
spriteset(sset_eanos_old_half, "gfx/415w.png") { tmpl_sprite_train10(4, 140) }
spriteset(sset_eanos_new_half, "gfx/415w.png") { tmpl_sprite_train10(4, 380) }
spriteset(sset_eanos_old_full, "gfx/415w.png") { tmpl_sprite_train10(4, 180) }
spriteset(sset_eanos_new_full, "gfx/415w.png") { tmpl_sprite_train10(4, 420) }
spriteset(sset_eanos_old_wood_half, "gfx/415w.png") { tmpl_sprite_train10(4, 220) }
spriteset(sset_eanos_new_wood_half, "gfx/415w.png") { tmpl_sprite_train10(4, 460) }
spriteset(sset_eanos_old_wood_full, "gfx/415w.png") { tmpl_sprite_train10(4, 260) }
spriteset(sset_eanos_new_wood_full, "gfx/415w.png") { tmpl_sprite_train10(4, 500) }
spriteset(sset_eanos_old_wdpr_half, "gfx/415w.png") { tmpl_sprite_train10(4, 300) }
spriteset(sset_eanos_new_wdpr_half, "gfx/415w.png") { tmpl_sprite_train10(4, 540) }
spriteset(sset_eanos_old_wdpr_full, "gfx/415w.png") { tmpl_sprite_train10(4, 340) }
spriteset(sset_eanos_new_wdpr_full, "gfx/415w.png") { tmpl_sprite_train10(4, 580) }

spritegroup sgroup_eanos_old {
    loaded: [sset_eanos_old_empty, sset_eanos_old_half, sset_eanos_old_full];
    loading: [sset_eanos_old_empty, sset_eanos_old_half, sset_eanos_old_full];
}
spritegroup sgroup_eanos_new {
    loaded: [sset_eanos_new_empty, sset_eanos_new_half, sset_eanos_new_full];
    loading: [sset_eanos_new_empty, sset_eanos_new_half, sset_eanos_new_full];
}
spritegroup sgroup_eanos_old_wood {
    loaded: [sset_eanos_old_empty, sset_eanos_old_wood_half, sset_eanos_old_wood_full];
    loading: [sset_eanos_old_empty, sset_eanos_old_wood_half, sset_eanos_old_wood_full];
}
spritegroup sgroup_eanos_new_wood {
    loaded: [sset_eanos_new_empty, sset_eanos_new_wood_half, sset_eanos_new_wood_full];
    loading: [sset_eanos_new_empty, sset_eanos_new_wood_half, sset_eanos_new_wood_full];
}
spritegroup sgroup_eanos_old_wdpr {
    loaded: [sset_eanos_old_empty, sset_eanos_old_wdpr_half, sset_eanos_old_wdpr_full];
    loading: [sset_eanos_old_empty, sset_eanos_old_wdpr_half, sset_eanos_old_wdpr_full];
}
spritegroup sgroup_eanos_new_wdpr {
    loaded: [sset_eanos_new_empty, sset_eanos_new_wdpr_half, sset_eanos_new_wdpr_full];
    loading: [sset_eanos_new_empty, sset_eanos_new_wdpr_half, sset_eanos_new_wdpr_full];
}


switch(FEAT_TRAINS, SELF, switch_eanos_articulated, extra_callback_info1) {
    1: return item_dummy_1;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}

switch(FEAT_TRAINS, SELF, switch_eanos_purchase, build_year >= 2003) {
    1: return sset_eanos_new_purchase;
    return sset_eanos_old_purchase;
}
switch(FEAT_TRAINS, SELF, switch_eanos_graphics, build_year >= 2003) {
    1: return sgroup_eanos_new;
    return sgroup_eanos_old;
}
switch(FEAT_TRAINS, SELF, switch_eanos_wood, build_year >= 2003) {
    1: return sgroup_eanos_new_wood;
    return sgroup_eanos_old_wood;
}
switch(FEAT_TRAINS, SELF, switch_eanos_wdpr, build_year >= 2003) {
    1: return sgroup_eanos_new_wdpr;
    return sgroup_eanos_old_wdpr;
}
switch(FEAT_TRAINS, SELF, switch_eanos_capacity, cargo_type_in_veh) {
    WOOD: return 56;
    WDPR: return 56;
    return CB_FAILED;
}
switch(FEAT_TRAINS, SELF, switch_eanos_loading_speed, cargo_type_in_veh) {
    WOOD: return 6;
    WDPR: return 6;
    return CB_FAILED;
}
switch(FEAT_TRAINS, SELF, switch_eanos_speed, cargo_count) {
    1..66: return 100;
    0: return 120;
    return CB_FAILED;
}


item(FEAT_TRAINS, item_eanos) {
    property {

        name: string(STR_EANOS_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1994, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_BULK); non_refittable_cargo_classes: bitmask(CC_REFRIGERATED); cargo_allow_refit: [WOOD]; cargo_disallow_refit: [GRAI, WHEA, CERE, FICR, CBLK, CMNT, SUGR, BEAN, QLME, SASH, KAOL, SALT, PLAS, FERT]; default_cargo_type: COAL;
        loading_speed: 8;
        cost_factor: 29;
        running_cost_factor: 5;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 66;
        weight: 24 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 45;
        retire_early: 16;
    }
}

    graphics {
        WOOD: switch_eanos_wood;
        WDPR: switch_eanos_wdpr;
        purchase: switch_eanos_purchase;
        additional_text: return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_AIR), string(STR_CAPACITY_NON_FRIABLE));
        default: switch_eanos_graphics;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_eanos_capacity;
        loading_speed: switch_eanos_loading_speed;
        speed: switch_eanos_speed;
        colour_mapping: switch_bulk_recolour;
        articulated_part: switch_eanos_articulated;
    }
}
# 266 "src/pkp.pnml" 2
# 1 "src/wagons/eanos-445w.pnml" 1





spriteset(sset_eanos_445w_purchase, "gfx/445w.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_eanos_445w_empty, "gfx/445w.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_eanos_445w_half, "gfx/445w.png") { tmpl_sprite_train(4, 80) }
spriteset(sset_eanos_445w_full, "gfx/445w.png") { tmpl_sprite_train(4, 120) }
spriteset(sset_eanos_445w_wood_half, "gfx/445w.png") { tmpl_sprite_train(4, 160) }
spriteset(sset_eanos_445w_wood_full, "gfx/445w.png") { tmpl_sprite_train(4, 200) }
spriteset(sset_eanos_445w_wdpr_half, "gfx/445w.png") { tmpl_sprite_train(4, 240) }
spriteset(sset_eanos_445w_wdpr_full, "gfx/445w.png") { tmpl_sprite_train(4, 280) }
# 30 "src/wagons/eanos-445w.pnml"
spritegroup sgroup_eanos_445w {
    loaded: [sset_eanos_445w_empty, sset_eanos_445w_half, sset_eanos_445w_full];
    loading: [sset_eanos_445w_empty, sset_eanos_445w_half, sset_eanos_445w_full];
}
spritegroup sgroup_eanos_445w_wood {
    loaded: [sset_eanos_445w_empty, sset_eanos_445w_wood_half, sset_eanos_445w_wood_full];
    loading: [sset_eanos_445w_empty, sset_eanos_445w_wood_half, sset_eanos_445w_wood_full];
}
spritegroup sgroup_eanos_445w_wdpr {
    loaded: [sset_eanos_445w_empty, sset_eanos_445w_wdpr_half, sset_eanos_445w_wdpr_full];
    loading: [sset_eanos_445w_empty, sset_eanos_445w_wdpr_half, sset_eanos_445w_wdpr_full];
}


switch(FEAT_TRAINS, SELF, switch_eanos_445w_capacity, cargo_type_in_veh) {
    WOOD: return 45;
    WDPR: return 45;
    return CB_FAILED;
}
switch(FEAT_TRAINS, SELF, switch_eanos_445w_loading_speed, cargo_type_in_veh) {
    WOOD: return 6;
    WDPR: return 6;
    return CB_FAILED;
}


item(FEAT_TRAINS, item_eanos_445w) {
    property {

        name: string(STR_EANOS_445W_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(2011, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_BULK); non_refittable_cargo_classes: bitmask(CC_REFRIGERATED); cargo_allow_refit: [WOOD]; cargo_disallow_refit: [GRAI, WHEA, CERE, FICR, CBLK, CMNT, SUGR, BEAN, QLME, SASH, KAOL, SALT, PLAS, FERT]; default_cargo_type: COAL;
        loading_speed: 8;
        cost_factor: 28;
        running_cost_factor: 5;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 120 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 60;
        weight: 22 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

    graphics {
        WOOD: sgroup_eanos_445w_wood;
        WDPR: sgroup_eanos_445w_wdpr;
        purchase: sset_eanos_445w_purchase;
        additional_text: return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_AIR), string(STR_CAPACITY_NON_FRIABLE));
        default: sgroup_eanos_445w;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_eanos_445w_capacity;
        loading_speed: switch_eanos_445w_loading_speed;
        colour_mapping: switch_bulk_recolour;
    }
}
# 267 "src/pkp.pnml" 2
# 1 "src/wagons/eamos.pnml" 1





spriteset(sset_eamos_purchase, "gfx/401zb.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_eamos_empty, "gfx/401zb.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_eamos_half, "gfx/401zb.png") { tmpl_sprite_train(4, 80) }
spriteset(sset_eamos_full, "gfx/401zb.png") { tmpl_sprite_train(4, 120) }
spriteset(sset_eamos_steel_half, "gfx/401zb.png") { tmpl_sprite_train(4, 160) }
spriteset(sset_eamos_steel_full, "gfx/401zb.png") { tmpl_sprite_train(4, 200) }
spriteset(sset_eamos_coper_half, "gfx/401zb.png") { tmpl_sprite_train(4, 240) }
spriteset(sset_eamos_coper_full, "gfx/401zb.png") { tmpl_sprite_train(4, 280) }
spriteset(sset_eamos_bdmat_half, "gfx/401zb.png") { tmpl_sprite_train(4, 320) }
spriteset(sset_eamos_bdmat_full, "gfx/401zb.png") { tmpl_sprite_train(4, 360) }

alternative_sprites(sset_eamos_empty,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/401zb-x2.png") { tmpl_sprite_train_x2(8, 40) }
alternative_sprites(sset_eamos_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/401zb-x2.png") { tmpl_sprite_train_x2(8, 120) }
alternative_sprites(sset_eamos_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/401zb-x2.png") { tmpl_sprite_train_x2(8, 200) }
alternative_sprites(sset_eamos_steel_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/401zb-x2.png") { tmpl_sprite_train_x2(8, 280) }
alternative_sprites(sset_eamos_steel_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/401zb-x2.png") { tmpl_sprite_train_x2(8, 360) }
alternative_sprites(sset_eamos_coper_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/401zb-x2.png") { tmpl_sprite_train_x2(8, 440) }
alternative_sprites(sset_eamos_coper_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/401zb-x2.png") { tmpl_sprite_train_x2(8, 520) }
alternative_sprites(sset_eamos_bdmat_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/401zb-x2.png") { tmpl_sprite_train_x2(8, 600) }
alternative_sprites(sset_eamos_bdmat_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/401zb-x2.png") { tmpl_sprite_train_x2(8, 680) }

spritegroup sgroup_eamos {
    loaded: [sset_eamos_empty, sset_eamos_half, sset_eamos_full];
    loading: [sset_eamos_empty, sset_eamos_half, sset_eamos_full];
}
spritegroup sgroup_eamos_steel {
    loaded: [sset_eamos_empty, sset_eamos_steel_half, sset_eamos_steel_full];
    loading: [sset_eamos_empty, sset_eamos_steel_half, sset_eamos_steel_full];
}
spritegroup sgroup_eamos_coper {
    loaded: [sset_eamos_empty, sset_eamos_coper_half, sset_eamos_coper_full];
    loading: [sset_eamos_empty, sset_eamos_coper_half, sset_eamos_coper_full];
}
spritegroup sgroup_eamos_bdmat {
    loaded: [sset_eamos_empty, sset_eamos_bdmat_half, sset_eamos_bdmat_full];
    loading: [sset_eamos_empty, sset_eamos_bdmat_half, sset_eamos_bdmat_full];
}


item(FEAT_TRAINS, item_eamos) {
    property {

        name: string(STR_EAMOS_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1960, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_BULK); non_refittable_cargo_classes: bitmask(CC_REFRIGERATED); cargo_allow_refit: [STEL, COPR, IRON, METL]; cargo_disallow_refit: [CBLK, COAL, GRAI, WHEA, CERE, FICR, OLSD, SGBT, SGCN, WDPR, SUGR, BEAN, QLME, SASH, FERT, SULP, KAOL, SALT, PLAS]; default_cargo_type: IORE;
        loading_speed: 6;
        cost_factor: 23;
        running_cost_factor: 3;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 50;
        weight: 22 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

    graphics {
        STEL: sgroup_eamos_steel;
        METL: sgroup_eamos_steel;
        COPR: sgroup_eamos_coper;
        BDMT: sgroup_eamos_bdmat;
        purchase: sset_eamos_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: sgroup_eamos;
        colour_mapping: switch_bulk_recolour;
    }
}
# 268 "src/pkp.pnml" 2
# 1 "src/wagons/fals.pnml" 1





spriteset(sset_fals_purchase, "gfx/wap.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_fals_gray_empty, "gfx/wap.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_fals_brown_empty, "gfx/wap.png") { tmpl_sprite_train(4, 80) }
spriteset(sset_fals_gray_full, "gfx/wap.png") { tmpl_sprite_train(4, 120) }
spriteset(sset_fals_brown_full, "gfx/wap.png") { tmpl_sprite_train(4, 160) }
spritegroup sgroup_fals_gray {
    loaded: [sset_fals_gray_empty, sset_fals_gray_full];
    loading: [sset_fals_gray_empty, sset_fals_gray_full];
}
spritegroup sgroup_fals_brown {
    loaded: [sset_fals_brown_empty, sset_fals_brown_full];
    loading: [sset_fals_brown_empty, sset_fals_brown_full];
}


random_switch(FEAT_TRAINS, SELF, switch_fals_graphics) {
    3: return sgroup_fals_gray;
    1: return sgroup_fals_brown;
}


item(FEAT_TRAINS, item_fals) {
    property {

        name: string(STR_FALS_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1973, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_BULK); non_refittable_cargo_classes: bitmask(CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_NON_POURABLE); cargo_allow_refit: []; cargo_disallow_refit: [GRAI, WHEA, MAIZ, SGBT, CLAY, BEAN, SALT]; default_cargo_type: COAL;
        loading_speed: 15;
        cost_factor: 26;
        running_cost_factor: 4 -1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 44;
        weight: 28 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 72;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_fals_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: switch_fals_graphics;
        colour_mapping: switch_bulk_recolour;
    }
}
# 269 "src/pkp.pnml" 2
# 1 "src/wagons/falns.pnml" 1





spriteset(sset_falns_brown_purchase, "gfx/436v.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_falns_blue_purchase, "gfx/436v.png") { tmpl_sprite_purchase(124, 60) }
spriteset(sset_falns_brown_empty, "gfx/436v.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_falns_blue_empty, "gfx/436v.png") { tmpl_sprite_train(4, 80) }
spriteset(sset_falns_brown_full, "gfx/436v.png") { tmpl_sprite_train(4, 120) }
spriteset(sset_falns_blue_full, "gfx/436v.png") { tmpl_sprite_train(4, 160) }
spritegroup sgroup_falns_brown {
    loaded: [sset_falns_brown_empty, sset_falns_brown_full];
    loading: [sset_falns_brown_empty, sset_falns_brown_full];
}
spritegroup sgroup_falns_blue {
    loaded: [sset_falns_blue_empty, sset_falns_blue_full];
    loading: [sset_falns_blue_empty, sset_falns_blue_full];
}



random_switch(FEAT_TRAINS, SELF, switch_falns_random) {
    1: return sgroup_falns_brown;
    3: return sgroup_falns_blue;
}
switch(FEAT_TRAINS, SELF, switch_falns_purchase, build_year >= 2003) {
    1: return sset_falns_blue_purchase;
    return sset_falns_brown_purchase;
}
switch(FEAT_TRAINS, SELF, switch_falns_graphics, build_year >= 2003) {
    1: return switch_falns_random;
    return sgroup_falns_brown;
}


item(FEAT_TRAINS, item_falns) {
    property {

        name: string(STR_FALNS_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1997, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_BULK); non_refittable_cargo_classes: bitmask(CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_NON_POURABLE); cargo_allow_refit: []; cargo_disallow_refit: [GRAI, WHEA, MAIZ, SGBT, CLAY, BEAN, SALT]; default_cargo_type: COAL;
        loading_speed: 18;
        cost_factor: 30-1;
        running_cost_factor: 4;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 120 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 53;
        weight: 26 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

    graphics {
        purchase: switch_falns_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: switch_falns_graphics;
        colour_mapping: switch_bulk_recolour;
    }
}
# 270 "src/pkp.pnml" 2
# 1 "src/wagons/kdt.pnml" 1





spriteset(sset_kdt_purchase, "gfx/kdt.png") { tmpl_sprite_purchase(4, 100) }
spriteset(sset_kdt, "gfx/kdt.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_kdt_open, "gfx/kdt.png") { tmpl_sprite_train(4, 120) }

alternative_sprites(sset_kdt,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/kdt-x2.png") { tmpl_sprite_train_x2(8, 40) }
alternative_sprites(sset_kdt_open,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/kdt-x2.png") { tmpl_sprite_train_x2(8, 200) }

spritegroup sgroup_kdt {
    loaded: [sset_kdt_open, sset_kdt, sset_kdt];
    loading: [sset_kdt_open];
}

spriteset(sset_kdth_purchase, "gfx/kdt.png") { tmpl_sprite_purchase(124, 100) }
spriteset(sset_kdth, "gfx/kdt.png") { tmpl_sprite_train(4, 60) }
spriteset(sset_kdth_open, "gfx/kdt.png") { tmpl_sprite_train(4, 160) }

alternative_sprites(sset_kdth,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/kdt-x2.png") { tmpl_sprite_train_x2(8, 120) }
alternative_sprites(sset_kdth_open,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/kdt-x2.png") { tmpl_sprite_train_x2(8, 280) }

spritegroup sgroup_kdth {
    loaded: [sset_kdth_open, sset_kdth, sset_kdth];
    loading: [sset_kdth_open];
}


switch (FEAT_TRAINS, PARENT, switch_KDTH_running_cost, vehicle_is_in_depot & (current_speed == 0) ) { 1: return 2; return 2 +3; }


item(FEAT_TRAINS, item_kdt) {
    property {

        name: string(STR_KDT_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_EXPRESS, CC_PIECE_GOODS); non_refittable_cargo_classes: bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_OVERSIZED); cargo_allow_refit: [GRAI, WHEA, MAIZ, CERE, BEAN, QLME, SASH, SALT, KAOL]; cargo_disallow_refit: [ALUM, CLAY, COPR, CSTI, IRON, METL, STAL, STCB, STAL, STEL, STST, WOOD, VEHI, VBOD, ZINC]; default_cargo_type: GOOD;
        loading_speed: 5;
        cost_factor: 12;
        running_cost_factor: 1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 65 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 16*2;
        weight: 11 ton;
        length: 6;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 68;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_kdt_purchase;
        additional_text: return string(STR_BRAKE_NONE);
        default: sgroup_kdt;
    }
}


item(FEAT_TRAINS, item_kdth) {
    property {

        name: string(STR_KDTH_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_EXPRESS, CC_PIECE_GOODS); non_refittable_cargo_classes: bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_OVERSIZED); cargo_allow_refit: [GRAI, WHEA, MAIZ, CERE, BEAN, QLME, SASH, SALT, KAOL]; cargo_disallow_refit: [ALUM, CLAY, COPR, CSTI, IRON, METL, STAL, STCB, STAL, STEL, STST, WOOD, VEHI, VBOD, ZINC]; default_cargo_type: GOOD;
        loading_speed: 5;
        cost_factor: 13;


        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 65 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 16*2;
        weight: 12 ton;
        length: 7;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 68;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_kdth_purchase;
        additional_text: return string(STR_BRAKE_HAND);
        default: sgroup_kdth;
        purchase_running_cost_factor: return 2 +3; running_cost_factor: switch_KDTH_running_cost;
    }
}
# 271 "src/pkp.pnml" 2
# 1 "src/wagons/kddet.pnml" 1





spriteset(sset_kddet_purchase, "gfx/kddet.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_kddet, "gfx/kddet.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_kddet_open, "gfx/kddet.png") { tmpl_sprite_train(4, 80) }

alternative_sprites(sset_kddet,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/kddet-x2.png") { tmpl_sprite_train_x2(8, 40) }
alternative_sprites(sset_kddet_open,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/kddet-x2.png") { tmpl_sprite_train_x2(8, 120) }

spritegroup sgroup_kddet {
    loaded: [sset_kddet_open, sset_kddet, sset_kddet];
    loading: [sset_kddet_open];
}


item(FEAT_TRAINS, item_kddet) {
    property {

        name: string(STR_KDDET_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1936, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_EXPRESS, CC_PIECE_GOODS); non_refittable_cargo_classes: bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_OVERSIZED); cargo_allow_refit: [GRAI, WHEA, MAIZ, CERE, BEAN, QLME, SASH, SALT, KAOL]; cargo_disallow_refit: [ALUM, CLAY, COPR, CSTI, IRON, METL, STAL, STCB, STAL, STEL, STST, WOOD, VEHI, VBOD, ZINC]; default_cargo_type: GOOD;
        loading_speed: 5;
        cost_factor: 16;
        running_cost_factor: 2;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 80 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 21*2;
        weight: 12 ton;
        length: 7;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 67;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_kddet_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: sgroup_kddet;
    }
}
# 272 "src/pkp.pnml" 2
# 1 "src/wagons/ggs.pnml" 1





spriteset(sset_ggs_purchase, "gfx/23k.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_ggs, "gfx/23k.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_ggs_open_empty, "gfx/23k.png") { tmpl_sprite_train(4, 80) }
spriteset(sset_ggs_open_full, "gfx/23k.png") { tmpl_sprite_train(4, 120) }

alternative_sprites(sset_ggs,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/23k-x2.png") { tmpl_sprite_train_x2(8, 40) }
alternative_sprites(sset_ggs_open_empty,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/23k-x2.png") { tmpl_sprite_train_x2(8, 120) }
alternative_sprites(sset_ggs_open_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/23k-x2.png") { tmpl_sprite_train_x2(8, 200) }

spritegroup sgroup_ggs {
    loaded: [sset_ggs_open_empty, sset_ggs, sset_ggs];
    loading: [sset_ggs_open_empty, sset_ggs_open_full];
}


item(FEAT_TRAINS, item_ggs) {
    property {

        name: string(STR_GGS_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1956, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_EXPRESS, CC_PIECE_GOODS); non_refittable_cargo_classes: bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_OVERSIZED); cargo_allow_refit: [GRAI, WHEA, MAIZ, CERE, BEAN, QLME, SASH, SALT, KAOL]; cargo_disallow_refit: [ALUM, CLAY, COPR, CSTI, IRON, METL, STAL, STCB, STAL, STEL, STST, WOOD, VEHI, VBOD, ZINC]; default_cargo_type: GOOD;
        loading_speed: 5;
        cost_factor: 19;
        running_cost_factor: 3;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 24*2;
        weight: 12 ton;
        length: 7;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 68;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_ggs_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: sgroup_ggs;
    }
}
# 273 "src/pkp.pnml" 2
# 1 "src/wagons/gags.pnml" 1





spriteset(sset_gags_purchase, "gfx/401ka.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_gags, "gfx/401ka.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_gags_open_empty, "gfx/401ka.png") { tmpl_sprite_train10(4, 80) }
spriteset(sset_gags_open_full, "gfx/401ka.png") { tmpl_sprite_train10(4, 120) }

alternative_sprites(sset_gags,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/401ka-x2.png") { tmpl_sprite_train10_x2(8, 40) }
alternative_sprites(sset_gags_open_empty,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/401ka-x2.png") { tmpl_sprite_train10_x2(8, 120) }
alternative_sprites(sset_gags_open_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/401ka-x2.png") { tmpl_sprite_train10_x2(8, 200) }

spritegroup sgroup_gags {
    loaded: [sset_gags_open_empty, sset_gags, sset_gags];
    loading: [sset_gags_open_empty, sset_gags_open_full];
}


switch(FEAT_TRAINS, SELF, switch_gags_articulated, extra_callback_info1) {
    1: return item_dummy_1;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_gags_capacity, hasbit(cargo_classes, CC_PIECE_GOODS)) {
    1: return 30;
    return CB_FAILED;
}


item(FEAT_TRAINS, item_gags) {
    property {

        name: string(STR_GAGS_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1968, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_EXPRESS, CC_PIECE_GOODS); non_refittable_cargo_classes: bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_OVERSIZED); cargo_allow_refit: [GRAI, WHEA, MAIZ, CERE, BEAN, QLME, SASH, SALT, KAOL]; cargo_disallow_refit: [ALUM, CLAY, COPR, CSTI, IRON, METL, STAL, STCB, STAL, STEL, STST, WOOD, VEHI, VBOD, ZINC]; default_cargo_type: GOOD;
        loading_speed: 7;
        cost_factor: 26;
        running_cost_factor: 3 +1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 49*2;
        weight: 23 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

    graphics {
        purchase: sset_gags_purchase;
        additional_text: return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_AIR), string(STR_CAPACITY_NON_FRIABLE));
        default: sgroup_gags;
        articulated_part: switch_gags_articulated;
        cargo_capacity: switch_gags_capacity;
    }
}
# 274 "src/pkp.pnml" 2
# 1 "src/wagons/gbs.pnml" 1





spriteset(sset_gbs_purchase, "gfx/208kf.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_gbs, "gfx/208kf.png") { tmpl_sprite_train_sym(4, 20) }
spriteset(sset_gbs_open_empty, "gfx/208kf.png") { tmpl_sprite_train_sym(4, 80) }
spriteset(sset_gbs_open_full, "gfx/208kf.png") { tmpl_sprite_train_sym(4, 120) }

alternative_sprites(sset_gbs,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/208kf-x2.png") { tmpl_sprite_train_sym_x2(8, 40) }
alternative_sprites(sset_gbs_open_empty,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/208kf-x2.png") { tmpl_sprite_train_sym_x2(8, 120) }
alternative_sprites(sset_gbs_open_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/208kf-x2.png") { tmpl_sprite_train_sym_x2(8, 200) }

spritegroup sgroup_gbs {
    loaded: [sset_gbs_open_empty, sset_gbs, sset_gbs];
    loading: [sset_gbs_open_empty, sset_gbs_open_full];
}


item(FEAT_TRAINS, item_gbs) {
    property {

        name: string(STR_GBS_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1981, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_EXPRESS, CC_PIECE_GOODS); non_refittable_cargo_classes: bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_OVERSIZED); cargo_allow_refit: [GRAI, WHEA, MAIZ, CERE, BEAN, QLME, SASH, SALT, KAOL]; cargo_disallow_refit: [ALUM, CLAY, COPR, CSTI, IRON, METL, STAL, STCB, STAL, STEL, STST, WOOD, VEHI, VBOD, ZINC]; default_cargo_type: GOOD;
        loading_speed: 6;
        cost_factor: 20;
        running_cost_factor: 3;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 25*2;
        weight: 14 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

    graphics {
        purchase: sset_gbs_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: sgroup_gbs;
    }
}
# 275 "src/pkp.pnml" 2
# 1 "src/wagons/hbbins.pnml" 1





spriteset(sset_hbbins_purchase, "gfx/hbbins.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_hbbins, "gfx/hbbins.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_hbbins_open, "gfx/hbbins.png") { tmpl_sprite_train10(4, 80) }
spritegroup sgroup_hbbins {
    loaded: [sset_hbbins];
    loading: [sset_hbbins_open];
}


switch(FEAT_TRAINS, SELF, switch_hbbins_articulated, extra_callback_info1) {
    1: return item_dummy_1;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}


item(FEAT_TRAINS, item_hbbins) {
    property {

        name: string(STR_HBBINS_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1987, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_EXPRESS, CC_PIECE_GOODS); non_refittable_cargo_classes: bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_OVERSIZED); cargo_allow_refit: [SALT]; cargo_disallow_refit: [LVST, WOOD, VEHI, VBOD]; default_cargo_type: GOOD;
        loading_speed: 6;
        cost_factor: 26;
        running_cost_factor: 3;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 120 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 28*2;
        weight: 17 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

    graphics {
        purchase: sset_hbbins_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: sgroup_hbbins;
        articulated_part: switch_hbbins_articulated;
    }
}
# 276 "src/pkp.pnml" 2
# 1 "src/wagons/habbins.pnml" 1





spriteset(sset_habbins_purchase, "gfx/habbins.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_habbins1, "gfx/habbins.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_habbins1_open_empty, "gfx/habbins.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_habbins1_open_full, "gfx/habbins.png") { tmpl_sprite_train12(4, 120) }
spriteset(sset_habbins2, "gfx/habbins.png") { tmpl_sprite_train12(4, 160) }
spriteset(sset_habbins2_open_empty, "gfx/habbins.png") { tmpl_sprite_train12(4, 200) }
spriteset(sset_habbins2_open_full, "gfx/habbins.png") { tmpl_sprite_train12(4, 240) }
spriteset(sset_habbins1_cut, "gfx/habbins.png") { tmpl_sprite_train12(4, 280) }
spriteset(sset_habbins2_cut, "gfx/habbins.png") { tmpl_sprite_train12(4, 320) }
spritegroup sgroup_habbins1 {
    loaded: [sset_habbins1];
    loading: [sset_habbins1_open_empty, sset_habbins1_open_full];
}
spritegroup sgroup_habbins2 {
    loaded: [sset_habbins2];
    loading: [sset_habbins2_open_empty, sset_habbins2_open_full];
}


switch(FEAT_TRAINS, SELF, switch_habbins_articulated, extra_callback_info1) {
    1: return item_dummy_3;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_habbins_1_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_habbins1_cut;
    return sgroup_habbins1;
}
switch(FEAT_TRAINS, SELF, switch_habbins_2_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sset_habbins2_cut;
    return sgroup_habbins2;
}
random_switch(FEAT_TRAINS, SELF, switch_habbins_graphics) {
    1: return switch_habbins_1_graphics;
    1: return switch_habbins_2_graphics;
}


item(FEAT_TRAINS, item_habbins) {
    property {

        name: string(STR_HABBINS_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1991, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_EXPRESS, CC_PIECE_GOODS); non_refittable_cargo_classes: bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_OVERSIZED); cargo_allow_refit: [SALT]; cargo_disallow_refit: [LVST, WOOD, VEHI, VBOD]; default_cargo_type: GOOD;
        loading_speed: 10;
        cost_factor: 28;
        running_cost_factor: 5;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 120 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 56*2;
        weight: 24 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

    graphics {
        purchase: sset_habbins_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: switch_habbins_graphics;
        articulated_part: switch_habbins_articulated;
    }
}
# 277 "src/pkp.pnml" 2
# 1 "src/wagons/slr.pnml" 1





spriteset(sset_slr_purchase, "gfx/slr.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_slr, "gfx/slr.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_slr_open, "gfx/slr.png") { tmpl_sprite_train(4, 80) }

alternative_sprites(sset_slr,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/slr-x2.png") { tmpl_sprite_train_x2(8, 40) }
alternative_sprites(sset_slr_open,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/slr-x2.png") { tmpl_sprite_train_x2(8, 120) }

spritegroup sgroup_slr {
    loaded: [sset_slr];
    loading: [sset_slr_open];
}


item(FEAT_TRAINS, item_slr) {
    property {

        name: string(STR_SLR_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_REFRIGERATED); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: [BEER, EOIL]; cargo_disallow_refit: []; default_cargo_type: FOOD;
        loading_speed: 5;
        cost_factor: 14+1;
        running_cost_factor: 2;
        cargo_age_period: int(185*1.41);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 80 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 16*1;
        weight: 11 ton;
        length: 6;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 65;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_slr_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: sgroup_slr;
    }
}
# 278 "src/pkp.pnml" 2
# 1 "src/wagons/slms.pnml" 1





spriteset(sset_slms_purchase, "gfx/4l.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_slms, "gfx/4l.png") { tmpl_sprite_train_sym(4, 20) }
alternative_sprites(sset_slms,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/4l-x2.png") { tmpl_sprite_train_sym_x2(8, 40) }
spriteset(sset_slms_open, "gfx/4l.png") { tmpl_sprite_train_sym(4, 80) }
alternative_sprites(sset_slms_open,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/4l-x2.png") { tmpl_sprite_train_sym_x2(8, 120) }
spritegroup sgroup_slms {
    loaded: [sset_slms];
    loading: [sset_slms_open];
}


item(FEAT_TRAINS, item_slms) {
    property {

        name: string(STR_SLMS_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1957, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_REFRIGERATED); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: [BEER, EOIL]; cargo_disallow_refit: []; default_cargo_type: FOOD;
        loading_speed: 5;
        cost_factor: 20;
        running_cost_factor: 3;
        cargo_age_period: int(185*1.41);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 17*1;
        weight: 18 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 35;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_slms_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: sgroup_slms;
    }
}
# 279 "src/pkp.pnml" 2
# 1 "src/wagons/ibhss.pnml" 1





spriteset(sset_ibhss_purchase, "gfx/202lc.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_ibhss, "gfx/202lc.png") { tmpl_sprite_train_sym(4, 20) }
alternative_sprites(sset_ibhss,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/202lc-x2.png") { tmpl_sprite_train_sym_x2(8, 40) }
spriteset(sset_ibhss_open, "gfx/202lc.png") { tmpl_sprite_train_sym(4, 80) }
alternative_sprites(sset_ibhss_open,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/202lc-x2.png") { tmpl_sprite_train_sym_x2(8, 120) }
spritegroup sgroup_ibhss {
    loaded: [sset_ibhss];
    loading: [sset_ibhss_open];
}


item(FEAT_TRAINS, item_ibhss) {
    property {

        name: string(STR_IBHSS_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1967, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_REFRIGERATED); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: [BEER, EOIL]; cargo_disallow_refit: []; default_cargo_type: FOOD;
        loading_speed: 5;
        cost_factor: 25;
        running_cost_factor: 3 +1;
        cargo_age_period: int(185*1.41);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 120 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 21*1;
        weight: 16 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

    graphics {
        purchase: sset_ibhss_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: sgroup_ibhss;
    }
}
# 280 "src/pkp.pnml" 2
# 1 "src/wagons/pdk31.pnml" 1





spriteset(sset_pdk31_purchase, "gfx/pdk31.png") { tmpl_sprite_purchase(4, 100) }
spriteset(sset_pdk31_empty, "gfx/pdk31.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_pdk31_goods_half, "gfx/pdk31.png") { tmpl_sprite_train(4, 120) }
spriteset(sset_pdk31_goods_full, "gfx/pdk31.png") { tmpl_sprite_train(4, 200) }
spriteset(sset_pdk31_wood_half, "gfx/pdk31.png") { tmpl_sprite_train(4, 280) }
spriteset(sset_pdk31_wood_full, "gfx/pdk31.png") { tmpl_sprite_train(4, 360) }
spriteset(sset_pdk31_steel, "gfx/pdk31.png") { tmpl_sprite_train(4, 440) }
spriteset(sset_pdk31_coper, "gfx/pdk31.png") { tmpl_sprite_train(4, 520) }
spriteset(sset_pdk31_wdprd_half, "gfx/pdk31.png") { tmpl_sprite_train(4, 600) }
spriteset(sset_pdk31_wdprd_full, "gfx/pdk31.png") { tmpl_sprite_train(4, 680) }
spriteset(sset_pdk31_bdmat_half, "gfx/pdk31.png") { tmpl_sprite_train(4, 760) }
spriteset(sset_pdk31_bdmat_full, "gfx/pdk31.png") { tmpl_sprite_train(4, 840) }

alternative_sprites(sset_pdk31_empty,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/pdk31-x2.png") { tmpl_sprite_train_x2(8, 40) }
alternative_sprites(sset_pdk31_goods_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/pdk31-x2.png") { tmpl_sprite_train_x2(8, 200) }
alternative_sprites(sset_pdk31_goods_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/pdk31-x2.png") { tmpl_sprite_train_x2(8, 360) }
alternative_sprites(sset_pdk31_wood_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/pdk31-x2.png") { tmpl_sprite_train_x2(8, 520) }
alternative_sprites(sset_pdk31_wood_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/pdk31-x2.png") { tmpl_sprite_train_x2(8, 680) }
alternative_sprites(sset_pdk31_steel,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/pdk31-x2.png") { tmpl_sprite_train_x2(8, 840) }

alternative_sprites(sset_pdk31_wdprd_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/pdk31-x2.png") { tmpl_sprite_train_x2(8, 1000) }
alternative_sprites(sset_pdk31_wdprd_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/pdk31-x2.png") { tmpl_sprite_train_x2(8, 1160) }
alternative_sprites(sset_pdk31_bdmat_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/pdk31-x2.png") { tmpl_sprite_train_x2(8, 1320) }
alternative_sprites(sset_pdk31_bdmat_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/pdk31-x2.png") { tmpl_sprite_train_x2(8, 1480) }

spritegroup sgroup_pdk31_goods {
    loaded: [sset_pdk31_empty, sset_pdk31_goods_half, sset_pdk31_goods_full];
    loading: [sset_pdk31_empty, sset_pdk31_goods_half, sset_pdk31_goods_full];
}
spritegroup sgroup_pdk31_wood {
    loaded: [sset_pdk31_empty, sset_pdk31_wood_half, sset_pdk31_wood_full];
    loading: [sset_pdk31_empty, sset_pdk31_wood_half, sset_pdk31_wood_full];
}
spritegroup sgroup_pdk31_steel {
    loaded: [sset_pdk31_empty, sset_pdk31_steel];
    loading: [sset_pdk31_empty, sset_pdk31_steel];
}
spritegroup sgroup_pdk31_coper {
    loaded: [sset_pdk31_empty, sset_pdk31_coper];
    loading: [sset_pdk31_empty, sset_pdk31_coper];
}
spritegroup sgroup_pdk31_wdprd {
    loaded: [sset_pdk31_empty, sset_pdk31_wdprd_half, sset_pdk31_wdprd_full];
    loading: [sset_pdk31_empty, sset_pdk31_wdprd_half, sset_pdk31_wdprd_full];
}
spritegroup sgroup_pdk31_bdmat {
    loaded: [sset_pdk31_empty, sset_pdk31_bdmat_half, sset_pdk31_bdmat_full];
    loading: [sset_pdk31_empty, sset_pdk31_bdmat_half, sset_pdk31_bdmat_full];
}

spriteset(sset_pdkh31_purchase, "gfx/pdk31.png") { tmpl_sprite_purchase(124, 100) }
spriteset(sset_pdkh31_empty, "gfx/pdk31.png") { tmpl_sprite_train(4, 60) }
spriteset(sset_pdkh31_goods_half, "gfx/pdk31.png") { tmpl_sprite_train(4, 160) }
spriteset(sset_pdkh31_goods_full, "gfx/pdk31.png") { tmpl_sprite_train(4, 240) }
spriteset(sset_pdkh31_wood_half, "gfx/pdk31.png") { tmpl_sprite_train(4, 320) }
spriteset(sset_pdkh31_wood_full, "gfx/pdk31.png") { tmpl_sprite_train(4, 400) }
spriteset(sset_pdkh31_steel, "gfx/pdk31.png") { tmpl_sprite_train(4, 480) }
spriteset(sset_pdkh31_coper, "gfx/pdk31.png") { tmpl_sprite_train(4, 560) }
spriteset(sset_pdkh31_wdprd_half, "gfx/pdk31.png") { tmpl_sprite_train(4, 640) }
spriteset(sset_pdkh31_wdprd_full, "gfx/pdk31.png") { tmpl_sprite_train(4, 720) }
spriteset(sset_pdkh31_bdmat_half, "gfx/pdk31.png") { tmpl_sprite_train(4, 800) }
spriteset(sset_pdkh31_bdmat_full, "gfx/pdk31.png") { tmpl_sprite_train(4, 880) }

alternative_sprites(sset_pdkh31_empty,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/pdk31-x2.png") { tmpl_sprite_train_x2(8, 120) }
alternative_sprites(sset_pdkh31_goods_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/pdk31-x2.png") { tmpl_sprite_train_x2(8, 280) }
alternative_sprites(sset_pdkh31_goods_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/pdk31-x2.png") { tmpl_sprite_train_x2(8, 440) }
alternative_sprites(sset_pdkh31_wood_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/pdk31-x2.png") { tmpl_sprite_train_x2(8, 600) }
alternative_sprites(sset_pdkh31_wood_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/pdk31-x2.png") { tmpl_sprite_train_x2(8, 760) }
alternative_sprites(sset_pdkh31_steel,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/pdk31-x2.png") { tmpl_sprite_train_x2(8, 920) }

alternative_sprites(sset_pdkh31_wdprd_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/pdk31-x2.png") { tmpl_sprite_train_x2(8, 1080) }
alternative_sprites(sset_pdkh31_wdprd_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/pdk31-x2.png") { tmpl_sprite_train_x2(8, 1240) }
alternative_sprites(sset_pdkh31_bdmat_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/pdk31-x2.png") { tmpl_sprite_train_x2(8, 1400) }
alternative_sprites(sset_pdkh31_bdmat_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/pdk31-x2.png") { tmpl_sprite_train_x2(8, 1560) }

spritegroup sgroup_pdkh31_goods {
    loaded: [sset_pdkh31_empty, sset_pdkh31_goods_half, sset_pdkh31_goods_full];
    loading: [sset_pdkh31_empty, sset_pdkh31_goods_half, sset_pdkh31_goods_full];
}
spritegroup sgroup_pdkh31_wood {
    loaded: [sset_pdkh31_empty, sset_pdkh31_wood_half, sset_pdkh31_wood_full];
    loading: [sset_pdkh31_empty, sset_pdkh31_wood_half, sset_pdkh31_wood_full];
}
spritegroup sgroup_pdkh31_steel {
    loaded: [sset_pdkh31_empty, sset_pdkh31_steel];
    loading: [sset_pdkh31_empty, sset_pdkh31_steel];
}
spritegroup sgroup_pdkh31_coper {
    loaded: [sset_pdkh31_empty, sset_pdkh31_coper];
    loading: [sset_pdkh31_empty, sset_pdkh31_coper];
}
spritegroup sgroup_pdkh31_wdprd {
    loaded: [sset_pdkh31_empty, sset_pdkh31_wdprd_half, sset_pdkh31_wdprd_full];
    loading: [sset_pdkh31_empty, sset_pdkh31_wdprd_half, sset_pdkh31_wdprd_full];
}
spritegroup sgroup_pdkh31_bdmat {
    loaded: [sset_pdkh31_empty, sset_pdkh31_bdmat_half, sset_pdkh31_bdmat_full];
    loading: [sset_pdkh31_empty, sset_pdkh31_bdmat_half, sset_pdkh31_bdmat_full];
}


switch(FEAT_TRAINS, SELF, switch_pdkh31_capacity, cargo_type_in_veh ) {
    VEHI: return (16 * 18/ cargo_unit_weight);
    return CB_FAILED;
}
switch (FEAT_TRAINS, PARENT, switch_PDKH31_running_cost, vehicle_is_in_depot & (current_speed == 0) ) { 1: return 2; return 2 +3; }


item(FEAT_TRAINS, item_pdk31) {
    property {

        name: string(STR_PDK31_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_EXPRESS, CC_PIECE_GOODS); non_refittable_cargo_classes: bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_COVERED); cargo_allow_refit: []; cargo_disallow_refit: [LVST, PAPR, BEER, BOOM, DYES, EOIL, FERT, JAVA, NUTS, POWR, RFPR, SOAP]; default_cargo_type: WOOD;
        loading_speed: 5;
        cost_factor: 13;
        running_cost_factor: 2;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 80 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 18*1;
        weight: 9 ton;
        length: 7;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 72;
        retire_early: 16;
    }
}
    graphics {
        WOOD: sgroup_pdk31_wood;
        STEL: sgroup_pdk31_steel;
        METL: sgroup_pdk31_steel;
        COPR: sgroup_pdk31_coper;
        WDPR: sgroup_pdk31_wdprd;
        BDMT: sgroup_pdk31_bdmat;
        purchase: sset_pdk31_purchase;
        additional_text: return string(STR_BRAKE_NONE);
        default: sgroup_pdk31_goods;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_pdkh31_capacity;
    }
}


item(FEAT_TRAINS, item_pdkh31) {
    property {

        name: string(STR_PDKH31_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_EXPRESS, CC_PIECE_GOODS); non_refittable_cargo_classes: bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_COVERED); cargo_allow_refit: []; cargo_disallow_refit: [LVST, PAPR, BEER, BOOM, DYES, EOIL, FERT, JAVA, NUTS, POWR, RFPR, SOAP]; default_cargo_type: WOOD;
        loading_speed: 5;
        cost_factor: 14;


        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 80 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 18*1;
        weight: 10 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 72;
        retire_early: 16;
    }
}
    graphics {
        WOOD: sgroup_pdkh31_wood;
        STEL: sgroup_pdkh31_steel;
        METL: sgroup_pdkh31_steel;
        COPR: sgroup_pdkh31_coper;
        WDPR: sgroup_pdkh31_wdprd;
        BDMT: sgroup_pdkh31_bdmat;
        purchase: sset_pdkh31_purchase;
        additional_text: return string(STR_BRAKE_HAND);
        default: sgroup_pdkh31_goods;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_pdkh31_capacity;
        purchase_running_cost_factor: return 2 +3; running_cost_factor: switch_PDKH31_running_cost;
    }
}
# 281 "src/pkp.pnml" 2
# 1 "src/wagons/kbkks.pnml" 1





spriteset(sset_kbkks_purchase, "gfx/201z.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_kbkks_empty, "gfx/201z.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_kbkks_goods_half, "gfx/201z.png") { tmpl_sprite_train(4, 80) }
spriteset(sset_kbkks_goods_full, "gfx/201z.png") { tmpl_sprite_train(4, 120) }
spriteset(sset_kbkks_wood_half, "gfx/201z.png") { tmpl_sprite_train(4, 160) }
spriteset(sset_kbkks_wood_full, "gfx/201z.png") { tmpl_sprite_train(4, 200) }
spriteset(sset_kbkks_steel_half, "gfx/201z.png") { tmpl_sprite_train(4, 240) }
spriteset(sset_kbkks_steel_full, "gfx/201z.png") { tmpl_sprite_train(4, 280) }
spriteset(sset_kbkks_coper_half, "gfx/201z.png") { tmpl_sprite_train(4, 320) }
spriteset(sset_kbkks_coper_full, "gfx/201z.png") { tmpl_sprite_train(4, 360) }
spriteset(sset_kbkks_wdprd_half, "gfx/201z.png") { tmpl_sprite_train(4, 400) }
spriteset(sset_kbkks_wdprd_full, "gfx/201z.png") { tmpl_sprite_train(4, 440) }
spriteset(sset_kbkks_bdmat_half, "gfx/201z.png") { tmpl_sprite_train(4, 480) }
spriteset(sset_kbkks_bdmat_full, "gfx/201z.png") { tmpl_sprite_train(4, 520) }

alternative_sprites(sset_kbkks_empty,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/201z-x2.png") { tmpl_sprite_train_x2(8, 40) }
alternative_sprites(sset_kbkks_goods_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/201z-x2.png") { tmpl_sprite_train_x2(8, 120) }
alternative_sprites(sset_kbkks_goods_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/201z-x2.png") { tmpl_sprite_train_x2(8, 200) }
alternative_sprites(sset_kbkks_wood_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/201z-x2.png") { tmpl_sprite_train_x2(8, 280) }
alternative_sprites(sset_kbkks_wood_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/201z-x2.png") { tmpl_sprite_train_x2(8, 360) }
alternative_sprites(sset_kbkks_steel_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/201z-x2.png") { tmpl_sprite_train_x2(8, 440) }
alternative_sprites(sset_kbkks_steel_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/201z-x2.png") { tmpl_sprite_train_x2(8, 520) }

alternative_sprites(sset_kbkks_wdprd_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/201z-x2.png") { tmpl_sprite_train_x2(8, 600) }
alternative_sprites(sset_kbkks_wdprd_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/201z-x2.png") { tmpl_sprite_train_x2(8, 680) }
alternative_sprites(sset_kbkks_bdmat_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/201z-x2.png") { tmpl_sprite_train_x2(8, 760) }
alternative_sprites(sset_kbkks_bdmat_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/201z-x2.png") { tmpl_sprite_train_x2(8, 840) }

spritegroup sgroup_kbkks_goods {
    loaded: [sset_kbkks_empty, sset_kbkks_goods_half, sset_kbkks_goods_full];
    loading: [sset_kbkks_empty, sset_kbkks_goods_half, sset_kbkks_goods_full];
}
spritegroup sgroup_kbkks_wood {
    loaded: [sset_kbkks_empty, sset_kbkks_wood_half, sset_kbkks_wood_full];
    loading: [sset_kbkks_empty, sset_kbkks_wood_half, sset_kbkks_wood_full];
}
spritegroup sgroup_kbkks_steel {
    loaded: [sset_kbkks_empty, sset_kbkks_steel_half, sset_kbkks_steel_full];
    loading: [sset_kbkks_empty, sset_kbkks_steel_half, sset_kbkks_steel_full];
}
spritegroup sgroup_kbkks_coper {
    loaded: [sset_kbkks_empty, sset_kbkks_coper_half, sset_kbkks_coper_full];
    loading: [sset_kbkks_empty, sset_kbkks_coper_half, sset_kbkks_coper_full];
}
spritegroup sgroup_kbkks_wdprd {
    loaded: [sset_kbkks_empty, sset_kbkks_wdprd_half, sset_kbkks_wdprd_full];
    loading: [sset_kbkks_empty, sset_kbkks_wdprd_half, sset_kbkks_wdprd_full];
}
spritegroup sgroup_kbkks_bdmat {
    loaded: [sset_kbkks_empty, sset_kbkks_bdmat_half, sset_kbkks_bdmat_full];
    loading: [sset_kbkks_empty, sset_kbkks_bdmat_half, sset_kbkks_bdmat_full];
}


switch(FEAT_TRAINS, SELF, switch_kbkks_capacity, cargo_type_in_veh ) {
    VEHI: return (16 * 24/ cargo_unit_weight);
    return CB_FAILED;
}


item(FEAT_TRAINS, item_kbkks) {
    property {

        name: string(STR_KBKKS_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1954, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_EXPRESS, CC_PIECE_GOODS); non_refittable_cargo_classes: bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_COVERED); cargo_allow_refit: []; cargo_disallow_refit: [LVST, PAPR, BEER, BOOM, DYES, EOIL, FERT, JAVA, NUTS, POWR, RFPR, SOAP]; default_cargo_type: WOOD;
        loading_speed: 5;
        cost_factor: 19;
        running_cost_factor: 2;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 24*1;
        weight: 12 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 72;
        retire_early: 16;
    }
}
    graphics {
        WOOD: sgroup_kbkks_wood;
        STEL: sgroup_kbkks_steel;
        METL: sgroup_kbkks_steel;
        COPR: sgroup_kbkks_coper;
        WDPR: sgroup_kbkks_wdprd;
        BDMT: sgroup_kbkks_bdmat;
        purchase: sset_kbkks_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: sgroup_kbkks_goods;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_kbkks_capacity;
    }
}
# 282 "src/pkp.pnml" 2
# 1 "src/wagons/kgns.pnml" 1





spriteset(sset_kgns_purchase, "gfx/212z.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_kgns_empty, "gfx/212z.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_kgns_goods_half, "gfx/212z.png") { tmpl_sprite_train(4, 80) }
spriteset(sset_kgns_goods_full, "gfx/212z.png") { tmpl_sprite_train(4, 120) }
spriteset(sset_kgns_wood_half, "gfx/212z.png") { tmpl_sprite_train(4, 160) }
spriteset(sset_kgns_wood_full, "gfx/212z.png") { tmpl_sprite_train(4, 200) }
spriteset(sset_kgns_steel_half, "gfx/212z.png") { tmpl_sprite_train(4, 240) }
spriteset(sset_kgns_steel_full, "gfx/212z.png") { tmpl_sprite_train(4, 280) }
spriteset(sset_kgns_coper_half, "gfx/212z.png") { tmpl_sprite_train(4, 320) }
spriteset(sset_kgns_coper_full, "gfx/212z.png") { tmpl_sprite_train(4, 360) }
spriteset(sset_kgns_wdprd_half, "gfx/212z.png") { tmpl_sprite_train(4, 400) }
spriteset(sset_kgns_wdprd_full, "gfx/212z.png") { tmpl_sprite_train(4, 440) }
spriteset(sset_kgns_bdmat_half, "gfx/212z.png") { tmpl_sprite_train(4, 480) }
spriteset(sset_kgns_bdmat_full, "gfx/212z.png") { tmpl_sprite_train(4, 520) }
# 45 "src/wagons/kgns.pnml"
spritegroup sgroup_kgns_goods {
    loaded: [sset_kgns_empty, sset_kgns_goods_half, sset_kgns_goods_full];
    loading: [sset_kgns_empty, sset_kgns_goods_half, sset_kgns_goods_full];
}
spritegroup sgroup_kgns_wood {
    loaded: [sset_kgns_empty, sset_kgns_wood_half, sset_kgns_wood_full];
    loading: [sset_kgns_empty, sset_kgns_wood_half, sset_kgns_wood_full];
}
spritegroup sgroup_kgns_steel {
    loaded: [sset_kgns_empty, sset_kgns_steel_half, sset_kgns_steel_full];
    loading: [sset_kgns_empty, sset_kgns_steel_half, sset_kgns_steel_full];
}
spritegroup sgroup_kgns_coper {
    loaded: [sset_kgns_empty, sset_kgns_coper_half, sset_kgns_coper_full];
    loading: [sset_kgns_empty, sset_kgns_coper_half, sset_kgns_coper_full];
}
spritegroup sgroup_kgns_wdprd {
    loaded: [sset_kgns_empty, sset_kgns_wdprd_half, sset_kgns_wdprd_full];
    loading: [sset_kgns_empty, sset_kgns_wdprd_half, sset_kgns_wdprd_full];
}
spritegroup sgroup_kgns_bdmat {
    loaded: [sset_kgns_empty, sset_kgns_bdmat_half, sset_kgns_bdmat_full];
    loading: [sset_kgns_empty, sset_kgns_bdmat_half, sset_kgns_bdmat_full];
}


switch(FEAT_TRAINS, SELF, switch_kgns_capacity, cargo_type_in_veh ) {
    VEHI: return (16 * 26/ cargo_unit_weight);
    return CB_FAILED;
}


item(FEAT_TRAINS, item_kgns) {
    property {

        name: string(STR_KGNS_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1990, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_EXPRESS, CC_PIECE_GOODS); non_refittable_cargo_classes: bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_COVERED); cargo_allow_refit: []; cargo_disallow_refit: [LVST, PAPR, BEER, BOOM, DYES, EOIL, FERT, JAVA, NUTS, POWR, RFPR, SOAP]; default_cargo_type: WOOD;
        loading_speed: 5;
        cost_factor: 25-1;
        running_cost_factor: 2;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 120 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 26*1;
        weight: 15 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

    graphics {
        WOOD: sgroup_kgns_wood;
        STEL: sgroup_kgns_steel;
        METL: sgroup_kgns_steel;
        COPR: sgroup_kgns_coper;
        WDPR: sgroup_kgns_wdprd;
        BDMT: sgroup_kgns_bdmat;
        purchase: sset_kgns_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: sgroup_kgns_goods;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_kgns_capacity;
    }
}
# 283 "src/pkp.pnml" 2
# 1 "src/wagons/res.pnml" 1





spriteset(sset_res_purchase, "gfx/424z.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_res_empty, "gfx/424z.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_res_goods_1_3, "gfx/424z.png") { tmpl_sprite_train10(4, 80) }
spriteset(sset_res_goods_2_3, "gfx/424z.png") { tmpl_sprite_train10(4, 120) }
spriteset(sset_res_goods_full1, "gfx/424z.png") { tmpl_sprite_train10(4, 160) }
spriteset(sset_res_goods_full2, "gfx/424z.png") { tmpl_sprite_train10(4, 200) }
spriteset(sset_res_wood_half, "gfx/424z.png") { tmpl_sprite_train10(4, 240) }
spriteset(sset_res_wood_full, "gfx/424z.png") { tmpl_sprite_train10(4, 280) }
spriteset(sset_res_steel_1_3, "gfx/424z.png") { tmpl_sprite_train10(4, 320) }
spriteset(sset_res_steel_2_3, "gfx/424z.png") { tmpl_sprite_train10(4, 360) }
spriteset(sset_res_steel_full, "gfx/424z.png") { tmpl_sprite_train10(4, 400) }
spriteset(sset_res_coper_1_3, "gfx/424z.png") { tmpl_sprite_train10(4, 440) }
spriteset(sset_res_coper_2_3, "gfx/424z.png") { tmpl_sprite_train10(4, 480) }
spriteset(sset_res_coper_full, "gfx/424z.png") { tmpl_sprite_train10(4, 520) }
spriteset(sset_res_wdprd_half, "gfx/424z.png") { tmpl_sprite_train10(4, 560) }
spriteset(sset_res_wdprd_full, "gfx/424z.png") { tmpl_sprite_train10(4, 600) }
spriteset(sset_res_bdmat_half, "gfx/424z.png") { tmpl_sprite_train10(4, 640) }
spriteset(sset_res_bdmat_full, "gfx/424z.png") { tmpl_sprite_train10(4, 680) }

alternative_sprites(sset_res_empty,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/424z-x2.png") { tmpl_sprite_train10_x2(8, 40) }
alternative_sprites(sset_res_goods_1_3,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/424z-x2.png") { tmpl_sprite_train10_x2(8, 120) }
alternative_sprites(sset_res_goods_2_3,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/424z-x2.png") { tmpl_sprite_train10_x2(8, 200) }
alternative_sprites(sset_res_goods_full1,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/424z-x2.png") { tmpl_sprite_train10_x2(8, 280) }
alternative_sprites(sset_res_goods_full2,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/424z-x2.png") { tmpl_sprite_train10_x2(8, 360) }
alternative_sprites(sset_res_wood_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/424z-x2.png") { tmpl_sprite_train10_x2(8, 440) }
alternative_sprites(sset_res_wood_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/424z-x2.png") { tmpl_sprite_train10_x2(8, 520) }
alternative_sprites(sset_res_steel_1_3,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/424z-x2.png") { tmpl_sprite_train10_x2(8, 600) }
alternative_sprites(sset_res_steel_2_3,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/424z-x2.png") { tmpl_sprite_train10_x2(8, 680) }
alternative_sprites(sset_res_steel_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/424z-x2.png") { tmpl_sprite_train10_x2(8, 760) }

alternative_sprites(sset_res_wdprd_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/424z-x2.png") { tmpl_sprite_train10_x2(8, 840) }
alternative_sprites(sset_res_wdprd_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/424z-x2.png") { tmpl_sprite_train10_x2(8, 920) }
alternative_sprites(sset_res_bdmat_half,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/424z-x2.png") { tmpl_sprite_train10_x2(8, 1000) }
alternative_sprites(sset_res_bdmat_full,
    ZOOM_LEVEL_IN_2X, BIT_DEPTH_8BPP, "gfx/424z-x2.png") { tmpl_sprite_train10_x2(8, 1080) }

spritegroup sgroup_res_goods1 {
    loaded: [sset_res_empty, sset_res_goods_1_3, sset_res_goods_2_3, sset_res_goods_full1];
    loading: [sset_res_empty, sset_res_goods_1_3, sset_res_goods_2_3, sset_res_goods_full1];
}
spritegroup sgroup_res_goods2 {
    loaded: [sset_res_empty, sset_res_goods_1_3, sset_res_goods_2_3, sset_res_goods_full2];
    loading: [sset_res_empty, sset_res_goods_1_3, sset_res_goods_2_3, sset_res_goods_full2];
}
spritegroup sgroup_res_wood {
    loaded: [sset_res_empty, sset_res_wood_half, sset_res_wood_full];
    loading: [sset_res_empty, sset_res_wood_half, sset_res_wood_full];
}
spritegroup sgroup_res_steel {
    loaded: [sset_res_empty, sset_res_steel_1_3, sset_res_steel_2_3, sset_res_steel_full];
    loading: [sset_res_empty, sset_res_steel_1_3, sset_res_steel_2_3, sset_res_steel_full];
}
spritegroup sgroup_res_coper {
    loaded: [sset_res_empty, sset_res_coper_1_3, sset_res_coper_2_3, sset_res_coper_full];
    loading: [sset_res_empty, sset_res_coper_1_3, sset_res_coper_2_3, sset_res_coper_full];
}
spritegroup sgroup_res_wdprd {
    loaded: [sset_res_empty, sset_res_wdprd_half, sset_res_wdprd_full];
    loading: [sset_res_empty, sset_res_wdprd_half, sset_res_wdprd_full];
}
spritegroup sgroup_res_bdmat {
    loaded: [sset_res_empty, sset_res_bdmat_half, sset_res_bdmat_full];
    loading: [sset_res_empty, sset_res_bdmat_half, sset_res_bdmat_full];
}


switch(FEAT_TRAINS, SELF, switch_res_articulated, extra_callback_info1) {
    1: return item_dummy_2;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
random_switch(FEAT_TRAINS, SELF, switch_res_goods, bitmask(TRIGGER_VEHICLE_NEW_LOAD)) {
    1: return sgroup_res_goods1;
    1: return sgroup_res_goods2;
}
switch(FEAT_TRAINS, SELF, switch_res_capacity, cargo_type_in_veh ) {
    VEHI: return (16 * 56/ cargo_unit_weight);
    return CB_FAILED;
}


item(FEAT_TRAINS, item_res) {
    property {

        name: string(STR_RES_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1979, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_EXPRESS, CC_PIECE_GOODS); non_refittable_cargo_classes: bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_COVERED); cargo_allow_refit: []; cargo_disallow_refit: [LVST, PAPR, BEER, BOOM, DYES, EOIL, FERT, JAVA, NUTS, POWR, RFPR, SOAP]; default_cargo_type: WOOD;
        loading_speed: 8;
        cost_factor: 25;
        running_cost_factor: 3 +1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 56*1;
        weight: 23 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

    graphics {
        WOOD: sgroup_res_wood;
        STEL: sgroup_res_steel;
        METL: sgroup_res_steel;
        COPR: sgroup_res_coper;
        WDPR: sgroup_res_wdprd;
        BDMT: sgroup_res_bdmat;
        purchase: sset_res_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: switch_res_goods;
        articulated_part: switch_res_articulated;
        random_trigger: switch_res_goods;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_res_capacity;
    }
}
# 284 "src/pkp.pnml" 2
# 1 "src/wagons/sgs.pnml" 1





spriteset(sset_sgs_purchase, "gfx/412z.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_sgs_empty, "gfx/412z.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_sgs_s1_full, "gfx/412z.png") { tmpl_sprite_train10(4, 80) }
spriteset(sset_sgs_s2_full, "gfx/412z.png") { tmpl_sprite_train10(4, 120) }
spriteset(sset_sgs_s3_full, "gfx/412z.png") { tmpl_sprite_train10(4, 160) }
spriteset(sset_sgs_s4_full, "gfx/412z.png") { tmpl_sprite_train10(4, 200) }
spriteset(sset_sgs_s5_full, "gfx/412z.png") { tmpl_sprite_train10(4, 240) }
spriteset(sset_sgs_s6_full, "gfx/412z.png") { tmpl_sprite_train10(4, 280) }
spriteset(sset_sgs_s7_full, "gfx/412z.png") { tmpl_sprite_train10(4, 320) }
spriteset(sset_sgs_s8_full, "gfx/412z.png") { tmpl_sprite_train10(4, 360) }
spriteset(sset_sgs_s9_full, "gfx/412z.png") { tmpl_sprite_train10(4, 400) }
spriteset(sset_sgs_s10_full, "gfx/412z.png") { tmpl_sprite_train10(4, 440) }
spriteset(sset_sgs_s11_full, "gfx/412z.png") { tmpl_sprite_train10(4, 480) }
spriteset(sset_sgs_s12_full, "gfx/412z.png") { tmpl_sprite_train10(4, 520) }
spritegroup sgroup_sgs_s1 {
    loaded: [sset_sgs_empty, sset_sgs_s1_full];
    loading: [sset_sgs_empty, sset_sgs_s1_full];
}
spritegroup sgroup_sgs_s2 {
    loaded: [sset_sgs_empty, sset_sgs_s2_full];
    loading: [sset_sgs_empty, sset_sgs_s2_full];
}
spritegroup sgroup_sgs_s3 {
    loaded: [sset_sgs_empty, sset_sgs_s3_full];
    loading: [sset_sgs_empty, sset_sgs_s3_full];
}
spritegroup sgroup_sgs_s4 {
    loaded: [sset_sgs_empty, sset_sgs_s4_full];
    loading: [sset_sgs_empty, sset_sgs_s4_full];
}
spritegroup sgroup_sgs_s5 {
    loaded: [sset_sgs_empty, sset_sgs_s5_full];
    loading: [sset_sgs_empty, sset_sgs_s5_full];
}
spritegroup sgroup_sgs_s6 {
    loaded: [sset_sgs_empty, sset_sgs_s6_full];
    loading: [sset_sgs_empty, sset_sgs_s6_full];
}
spritegroup sgroup_sgs_s7 {
    loaded: [sset_sgs_empty, sset_sgs_s7_full];
    loading: [sset_sgs_empty, sset_sgs_s7_full];
}
spritegroup sgroup_sgs_s8 {
    loaded: [sset_sgs_empty, sset_sgs_s8_full];
    loading: [sset_sgs_empty, sset_sgs_s8_full];
}
spritegroup sgroup_sgs_s9 {
    loaded: [sset_sgs_empty, sset_sgs_s9_full];
    loading: [sset_sgs_empty, sset_sgs_s9_full];
}
spritegroup sgroup_sgs_s10 {
    loaded: [sset_sgs_empty, sset_sgs_s10_full];
    loading: [sset_sgs_empty, sset_sgs_s10_full];
}
spritegroup sgroup_sgs_s11 {
    loaded: [sset_sgs_empty, sset_sgs_s11_full];
    loading: [sset_sgs_empty, sset_sgs_s11_full];
}
spritegroup sgroup_sgs_s12 {
    loaded: [sset_sgs_empty, sset_sgs_s12_full];
    loading: [sset_sgs_empty, sset_sgs_s12_full];
}
spriteset(sset_sgs_d1_full, "gfx/412z_2.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_sgs_d1_half, "gfx/412z_2.png") { tmpl_sprite_train10(4, 60) }
spriteset(sset_sgs_d2_full, "gfx/412z_2.png") { tmpl_sprite_train10(4, 100) }
spriteset(sset_sgs_d2_half, "gfx/412z_2.png") { tmpl_sprite_train10(4, 140) }
spriteset(sset_sgs_d3_full, "gfx/412z_2.png") { tmpl_sprite_train10(4, 180) }
spriteset(sset_sgs_d3_half, "gfx/412z_2.png") { tmpl_sprite_train10(4, 220) }
spriteset(sset_sgs_d4_full, "gfx/412z_2.png") { tmpl_sprite_train10(4, 260) }
spriteset(sset_sgs_d4_half, "gfx/412z_2.png") { tmpl_sprite_train10(4, 300) }
spriteset(sset_sgs_d5_full, "gfx/412z_2.png") { tmpl_sprite_train10(4, 340) }
spriteset(sset_sgs_d5_half, "gfx/412z_2.png") { tmpl_sprite_train10(4, 380) }
spriteset(sset_sgs_d6_full, "gfx/412z_2.png") { tmpl_sprite_train10(4, 420) }
spriteset(sset_sgs_d6_half, "gfx/412z_2.png") { tmpl_sprite_train10(4, 460) }
spriteset(sset_sgs_d7_full, "gfx/412z_2.png") { tmpl_sprite_train10(4, 500) }
spriteset(sset_sgs_d7_half, "gfx/412z_2.png") { tmpl_sprite_train10(4, 540) }
spriteset(sset_sgs_d8_full, "gfx/412z_2.png") { tmpl_sprite_train10(4, 580) }
spriteset(sset_sgs_d8_half, "gfx/412z_2.png") { tmpl_sprite_train10(4, 620) }
spriteset(sset_sgs_d9_full, "gfx/412z_2.png") { tmpl_sprite_train10(4, 660) }
spriteset(sset_sgs_d9_half, "gfx/412z_2.png") { tmpl_sprite_train10(4, 700) }
spriteset(sset_sgs_d10_full, "gfx/412z_2.png") { tmpl_sprite_train10(4, 740) }
spriteset(sset_sgs_d10_half, "gfx/412z_2.png") { tmpl_sprite_train10(4, 780) }
spritegroup sgroup_sgs_d1 {
    loaded: [sset_sgs_empty, sset_sgs_d1_half, sset_sgs_d1_full];
    loading: [sset_sgs_empty, sset_sgs_d1_half, sset_sgs_d1_full];
}
spritegroup sgroup_sgs_d2 {
    loaded: [sset_sgs_empty, sset_sgs_d2_half, sset_sgs_d2_full];
    loading: [sset_sgs_empty, sset_sgs_d2_half, sset_sgs_d2_full];
}
spritegroup sgroup_sgs_d3 {
    loaded: [sset_sgs_empty, sset_sgs_d3_half, sset_sgs_d3_full];
    loading: [sset_sgs_empty, sset_sgs_d3_half, sset_sgs_d3_full];
}
spritegroup sgroup_sgs_d4 {
    loaded: [sset_sgs_empty, sset_sgs_d4_half, sset_sgs_d4_full];
    loading: [sset_sgs_empty, sset_sgs_d4_half, sset_sgs_d4_full];
}
spritegroup sgroup_sgs_d5 {
    loaded: [sset_sgs_empty, sset_sgs_d5_half, sset_sgs_d5_full];
    loading: [sset_sgs_empty, sset_sgs_d5_half, sset_sgs_d5_full];
}
spritegroup sgroup_sgs_d6 {
    loaded: [sset_sgs_empty, sset_sgs_d6_half, sset_sgs_d6_full];
    loading: [sset_sgs_empty, sset_sgs_d6_half, sset_sgs_d6_full];
}
spritegroup sgroup_sgs_d7 {
    loaded: [sset_sgs_empty, sset_sgs_d7_half, sset_sgs_d7_full];
    loading: [sset_sgs_empty, sset_sgs_d7_half, sset_sgs_d7_full];
}
spritegroup sgroup_sgs_d8 {
    loaded: [sset_sgs_empty, sset_sgs_d8_half, sset_sgs_d8_full];
    loading: [sset_sgs_empty, sset_sgs_d8_half, sset_sgs_d8_full];
}
spritegroup sgroup_sgs_d9 {
    loaded: [sset_sgs_empty, sset_sgs_d9_half, sset_sgs_d9_full];
    loading: [sset_sgs_empty, sset_sgs_d9_half, sset_sgs_d9_full];
}
spritegroup sgroup_sgs_d10 {
    loaded: [sset_sgs_empty, sset_sgs_d10_half, sset_sgs_d10_full];
    loading: [sset_sgs_empty, sset_sgs_d10_half, sset_sgs_d10_full];
}


switch(FEAT_TRAINS, SELF, switch_sgs_articulated, extra_callback_info1) {
    1: return item_dummy_2;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
random_switch(FEAT_TRAINS, SELF, switch_sgs_graphics, bitmask(TRIGGER_VEHICLE_NEW_LOAD)) {
    1: return sgroup_sgs_s1;
    1: return sgroup_sgs_s2;
    1: return sgroup_sgs_s3;
    1: return sgroup_sgs_s4;
    1: return sgroup_sgs_s5;
    1: return sgroup_sgs_s6;
    1: return sgroup_sgs_s7;
    1: return sgroup_sgs_s8;
    1: return sgroup_sgs_s9;
    1: return sgroup_sgs_s10;
    1: return sgroup_sgs_s11;
    1: return sgroup_sgs_s12;
    2: return sgroup_sgs_d1;
    2: return sgroup_sgs_d2;
    2: return sgroup_sgs_d3;
    2: return sgroup_sgs_d4;
    2: return sgroup_sgs_d5;
    2: return sgroup_sgs_d6;
    2: return sgroup_sgs_d7;
    2: return sgroup_sgs_d8;
    2: return sgroup_sgs_d9;
    2: return sgroup_sgs_d10;
}


item(FEAT_TRAINS, item_sgs) {
    property {

        name: string(STR_SGS_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1970, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_EXPRESS, CC_PIECE_GOODS); non_refittable_cargo_classes: bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_OVERSIZED); cargo_allow_refit: []; cargo_disallow_refit: [LVST, WOOD, ALUM, CSTI, IRON, STAL, STEL, STCB, STST, COPR, VEHI, VBOD, ZINC]; default_cargo_type: GOOD;
        loading_speed: 20;
        cost_factor: 24;
        running_cost_factor: 3;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 58*2;
        weight: 22 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

    graphics {
        purchase: sset_sgs_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: switch_sgs_graphics;
        articulated_part: switch_sgs_articulated;
        random_trigger: switch_sgs_graphics;
        loading_speed: return 20*(cargo_capacity/58);
    }
}
# 285 "src/pkp.pnml" 2
# 1 "src/wagons/sdgmnss.pnml" 1





spriteset(sset_sdgmnss_purchase, "gfx/434s.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_sdgmnss_empty, "gfx/434s.png") { tmpl_sprite_train10(4, 20) }
spriteset(sset_sdgmnss_s1_full, "gfx/434s.png") { tmpl_sprite_train10(4, 80) }
spriteset(sset_sdgmnss_s2_full, "gfx/434s.png") { tmpl_sprite_train10(4, 120) }
spriteset(sset_sdgmnss_s3_full, "gfx/434s.png") { tmpl_sprite_train10(4, 160) }
spriteset(sset_sdgmnss_s4_full, "gfx/434s.png") { tmpl_sprite_train10(4, 200) }
spriteset(sset_sdgmnss_s5_full, "gfx/434s.png") { tmpl_sprite_train10(4, 240) }
spriteset(sset_sdgmnss_s6_full, "gfx/434s.png") { tmpl_sprite_train10(4, 280) }
spriteset(sset_sdgmnss_s7_full, "gfx/434s.png") { tmpl_sprite_train10(4, 320) }
spriteset(sset_sdgmnss_s8_full, "gfx/434s.png") { tmpl_sprite_train10(4, 360) }
spriteset(sset_sdgmnss_s9_full, "gfx/434s.png") { tmpl_sprite_train10(4, 400) }
spriteset(sset_sdgmnss_s10_full, "gfx/434s.png") { tmpl_sprite_train10(4, 440) }
spriteset(sset_sdgmnss_s11_full, "gfx/434s.png") { tmpl_sprite_train10(4, 480) }
spritegroup sgroup_sdgmnss_s1 {
    loaded: [sset_sdgmnss_empty, sset_sdgmnss_s1_full];
    loading: [sset_sdgmnss_empty, sset_sdgmnss_s1_full];
}
spritegroup sgroup_sdgmnss_s2 {
    loaded: [sset_sdgmnss_empty, sset_sdgmnss_s2_full];
    loading: [sset_sdgmnss_empty, sset_sdgmnss_s2_full];
}
spritegroup sgroup_sdgmnss_s3 {
    loaded: [sset_sdgmnss_empty, sset_sdgmnss_s3_full];
    loading: [sset_sdgmnss_empty, sset_sdgmnss_s3_full];
}
spritegroup sgroup_sdgmnss_s4 {
    loaded: [sset_sdgmnss_empty, sset_sdgmnss_s4_full];
    loading: [sset_sdgmnss_empty, sset_sdgmnss_s4_full];
}
spritegroup sgroup_sdgmnss_s5 {
    loaded: [sset_sdgmnss_empty, sset_sdgmnss_s5_full];
    loading: [sset_sdgmnss_empty, sset_sdgmnss_s5_full];
}
spritegroup sgroup_sdgmnss_s6 {
    loaded: [sset_sdgmnss_empty, sset_sdgmnss_s6_full];
    loading: [sset_sdgmnss_empty, sset_sdgmnss_s6_full];
}
spritegroup sgroup_sdgmnss_s7 {
    loaded: [sset_sdgmnss_empty, sset_sdgmnss_s7_full];
    loading: [sset_sdgmnss_empty, sset_sdgmnss_s7_full];
}
spritegroup sgroup_sdgmnss_s8 {
    loaded: [sset_sdgmnss_empty, sset_sdgmnss_s8_full];
    loading: [sset_sdgmnss_empty, sset_sdgmnss_s8_full];
}
spritegroup sgroup_sdgmnss_s9 {
    loaded: [sset_sdgmnss_empty, sset_sdgmnss_s9_full];
    loading: [sset_sdgmnss_empty, sset_sdgmnss_s9_full];
}
spritegroup sgroup_sdgmnss_s10 {
    loaded: [sset_sdgmnss_empty, sset_sdgmnss_s10_full];
    loading: [sset_sdgmnss_empty, sset_sdgmnss_s10_full];
}
spritegroup sgroup_sdgmnss_s11 {
    loaded: [sset_sdgmnss_empty, sset_sdgmnss_s11_full];
    loading: [sset_sdgmnss_empty, sset_sdgmnss_s11_full];
}


switch(FEAT_TRAINS, SELF, switch_sdgmnss_articulated, extra_callback_info1) {
    1: return item_dummy_2;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
random_switch(FEAT_TRAINS, SELF, switch_sdgmnss_graphics_goods, bitmask(TRIGGER_VEHICLE_NEW_LOAD)) {

    2: return sgroup_sdgmnss_s1;
    2: return sgroup_sdgmnss_s2;
    2: return sgroup_sdgmnss_s3;
    2: return sgroup_sdgmnss_s4;
    2: return sgroup_sdgmnss_s5;
    2: return sgroup_sdgmnss_s6;
    2: return sgroup_sdgmnss_s7;
    2: return sgroup_sdgmnss_s8;
}
random_switch(FEAT_TRAINS, SELF, switch_sdgmnss_graphics_rfprd, bitmask(TRIGGER_VEHICLE_NEW_LOAD)) {
    dependent: switch_sdgmnss_graphics_goods;
    8: return sgroup_sdgmnss_s9;
    8: return sgroup_sdgmnss_s10;
}

switch(FEAT_TRAINS, SELF, switch_sdgmnss_cargo_age_period, cargo_type_in_veh) {
    FOOD: return int(185*1.41);
    FRUT: return int(185*1.41);
    FISH: return int(185*1.41);
    MILK: return int(185*1.41);
    return CB_FAILED;
}



item(FEAT_TRAINS, item_sdgmnss) {
    property {

        name: string(STR_SDGMNSS_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(2000, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_MAIL, CC_EXPRESS, CC_PIECE_GOODS); non_refittable_cargo_classes: bitmask(CC_PASSENGERS, CC_OVERSIZED); cargo_allow_refit: [RFPR]; cargo_disallow_refit: [LVST, WOOD, ALUM, CSTI, IRON, STAL, STEL, STCB, STST, COPR, VEHI, VBOD, ZINC]; default_cargo_type: GOOD;
        loading_speed: 20;
        cost_factor: 28;
        running_cost_factor: 4;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 120 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 59*2;
        weight: 21 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

    graphics {
        RFPR: switch_sdgmnss_graphics_rfprd;
        FOOD: sgroup_sdgmnss_s11;
        FRUT: sgroup_sdgmnss_s11;
        FISH: sgroup_sdgmnss_s11;
        MILK: sgroup_sdgmnss_s11;
        purchase: sset_sdgmnss_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: switch_sdgmnss_graphics_goods;
        articulated_part: switch_sdgmnss_articulated;
        random_trigger: switch_sdgmnss_graphics_goods;
        loading_speed: return 20*(cargo_capacity/59);
        cargo_age_period: switch_sdgmnss_cargo_age_period;
    }
}
# 286 "src/pkp.pnml" 2
# 1 "src/wagons/rh.pnml" 1





spriteset(sset_rh_purchase, "gfx/rh.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_rh, "gfx/rh.png") { tmpl_sprite_train(4, 20) }






item(FEAT_TRAINS, item_rh) {
    property {

        name: string(STR_RH_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_LIQUID); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: [ACID, BEER, CHLO, COAT, LYE_, O2__, NH3_, SOAP, SULP]; default_cargo_type: OIL_;
        loading_speed: 5;
        cost_factor: 14;
        running_cost_factor: 2 +3;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 65 km/h;
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 17;
        weight: 14 ton;
        length: 6;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 69;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_rh_purchase;
        additional_text: return string(STR_BRAKE_HAND);
        default: sset_rh;
    }
}
# 287 "src/pkp.pnml" 2
# 1 "src/wagons/rbh.pnml" 1





spriteset(sset_rbh_purchase, "gfx/1r1.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_rbh, "gfx/1r1.png") { tmpl_sprite_train(4, 20) }






item(FEAT_TRAINS, item_rbh) {
    property {

        name: string(STR_RBH_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1943, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_LIQUID); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: [ACID, BEER, CHLO, COAT, LYE_, O2__, NH3_, SOAP, SULP]; default_cargo_type: OIL_;
        loading_speed: 6;
        cost_factor: 17;
        running_cost_factor: 2 + 1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 80 km/h;
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 26;
        weight: 15 ton;
        length: 6;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 64;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_rbh_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: sset_rbh;
    }
}
# 288 "src/pkp.pnml" 2
# 1 "src/wagons/zaes.pnml" 1





spriteset(sset_zaes_purchase, "gfx/406r.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_zaes, "gfx/406r.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_zaes_oil, "gfx/406r.png") { tmpl_sprite_train(4, 80) }
spriteset(sset_zaes_chem, "gfx/406r.png") { tmpl_sprite_train(4, 120) }


item(FEAT_TRAINS, item_zaes) {
    property {

        name: string(STR_ZAES_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1964, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_LIQUID); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: [ACID, BEER, CHLO, COAT, LYE_, O2__, NH3_, SOAP, SULP]; default_cargo_type: OIL_;
        loading_speed: 9;
        cost_factor: 24;
        running_cost_factor: 3 +1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 52;
        weight: 23 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

    graphics {
        OIL_: sset_zaes_oil;
        PETR: sset_zaes_oil;
        RFPR: sset_zaes_chem;
        purchase: sset_zaes_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: sset_zaes;
    }
}
# 289 "src/pkp.pnml" 2
# 1 "src/wagons/sn.pnml" 1





spriteset(sset_sn_purchase, "gfx/vh14.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_sn, "gfx/vh14.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_sn_full, "gfx/vh14.png") { tmpl_sprite_train(4, 80) }
spriteset(sset_sn_open, "gfx/vh14.png") { tmpl_sprite_train(4, 120) }
spriteset(sset_sn_open_full, "gfx/vh14.png") { tmpl_sprite_train(4, 160) }
# 21 "src/wagons/sn.pnml"
spritegroup sgroup_sn {
    loaded: [sset_sn, sset_sn_full];
    loading: [sset_sn_open, sset_sn_open_full];
}


item(FEAT_TRAINS, item_sn) {
    property {

        name: string(STR_SN_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: [LVST]; cargo_disallow_refit: []; default_cargo_type: LVST;
        loading_speed: 5;
        cost_factor: 14;
        running_cost_factor: 2 + 3;
        cargo_age_period: int(185*1.41);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 80 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 16*2*1;
        weight: 11 ton;
        length: 6;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 70;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_sn_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: sgroup_sn;
    }
}
# 290 "src/pkp.pnml" 2
# 1 "src/wagons/sdw.pnml" 1





spriteset(sset_sdw_purchase, "gfx/sdw.png") { tmpl_sprite_purchase(4, 100) }
spriteset(sset_sdw, "gfx/sdw.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_sdw_open, "gfx/sdw.png") { tmpl_sprite_train(4, 120) }
spritegroup sgroup_sdw {
    loaded: [sset_sdw];
    loading: [sset_sdw_open];
}

spriteset(sset_sdwh_purchase, "gfx/sdw.png") { tmpl_sprite_purchase(124, 100) }
spriteset(sset_sdwh, "gfx/sdw.png") { tmpl_sprite_train(4, 60) }
spriteset(sset_sdwh_open, "gfx/sdw.png") { tmpl_sprite_train(4, 160) }
spritegroup sgroup_sdwh {
    loaded: [sset_sdwh];
    loading: [sset_sdwh_open];
}


switch (FEAT_TRAINS, PARENT, switch_SDWH_running_cost, vehicle_is_in_depot & (current_speed == 0) ) { 1: return 2; return 2 +3; }




item(FEAT_TRAINS, item_sdw) {
    property {

        name: string(STR_SDW_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;

        loading_speed: 5;
        cost_factor: 13;
        running_cost_factor: 2;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 80 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;

        weight: 11 ton;
        length: 6;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_replace_cargoes) {
    property {
        refittable_cargo_classes: bitmask(); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: [GOOD]; cargo_disallow_refit: []; default_cargo_type: GOOD;
        cargo_capacity: 15*2;
    }
} else {
    property {
        refittable_cargo_classes: bitmask(); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: [BDMT, CBLK, CMNT, KAOL, LIME, QLME, SASH]; cargo_disallow_refit: []; default_cargo_type: BDMT;
        cargo_capacity: 15;
    }
}

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 75-1;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_sdw_purchase;
        additional_text: return string(STR_BRAKE_NONE);
        default: sgroup_sdw;
    }
}


item(FEAT_TRAINS, item_sdwh) {
    property {

        name: string(STR_SDWH_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;

        loading_speed: 5;
        cost_factor: 14;


        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 80 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;

        weight: 12 ton;
        length: 7;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_replace_cargoes) {
    property {
        refittable_cargo_classes: bitmask(); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: [GOOD]; cargo_disallow_refit: []; default_cargo_type: GOOD;
        cargo_capacity: 15*2;
    }
} else {
    property {
        refittable_cargo_classes: bitmask(); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: [BDMT, CBLK, CMNT, KAOL, LIME, QLME, SASH]; cargo_disallow_refit: []; default_cargo_type: BDMT;
        cargo_capacity: 15;
    }
}

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 75;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_sdwh_purchase;
        additional_text: return string(STR_BRAKE_HAND);
        default: sgroup_sdwh;
        purchase_running_cost_factor: return 2 +3; running_cost_factor: switch_SDWH_running_cost;
    }
}
# 291 "src/pkp.pnml" 2
# 1 "src/wagons/uacs.pnml" 1





spriteset(sset_uacs_purchase, "gfx/408s.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_uacs, "gfx/408s.png") { tmpl_sprite_train_sym(4, 20) }


item(FEAT_TRAINS, item_uacs) {
    property {

        name: string(STR_UACS_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1967, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;

        loading_speed: 12;
        cost_factor: 24;
        running_cost_factor: 4 -1;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;

        weight: 24 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_replace_cargoes) {
    property {
        refittable_cargo_classes: bitmask(); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: [GOOD]; cargo_disallow_refit: []; default_cargo_type: GOOD;
        cargo_capacity: 56*2;
    }
} else {
    property {
        refittable_cargo_classes: bitmask(); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: [BDMT, CBLK, CMNT, QLME, SASH]; cargo_disallow_refit: []; default_cargo_type: BDMT;
        cargo_capacity: 56;
    }
}

    graphics {
        purchase: sset_uacs_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: sset_uacs;
    }
}
# 292 "src/pkp.pnml" 2
# 1 "src/wagons/lekqss.pnml" 1





spriteset(sset_lekqss_purchase, "gfx/203z.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_lekqss_empty, "gfx/203z.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_lekqss_vehs1_half, "gfx/203z.png") { tmpl_sprite_train(4, 80) }
spriteset(sset_lekqss_vehs1_full, "gfx/203z.png") { tmpl_sprite_train(4, 120) }
spriteset(sset_lekqss_vehs2_half, "gfx/203z.png") { tmpl_sprite_train(4, 160) }
spriteset(sset_lekqss_vehs2_full, "gfx/203z.png") { tmpl_sprite_train(4, 200) }
spriteset(sset_lekqss_vehs3_half, "gfx/203z.png") { tmpl_sprite_train(4, 240) }
spriteset(sset_lekqss_vehs3_full, "gfx/203z.png") { tmpl_sprite_train(4, 280) }
spritegroup sgroup_lekqss_vehs1 {
    loaded: [sset_lekqss_empty, sset_lekqss_vehs1_half, sset_lekqss_vehs1_full];
    loading: [sset_lekqss_empty, sset_lekqss_vehs1_half, sset_lekqss_vehs1_full];
}
spritegroup sgroup_lekqss_vehs2 {
    loaded: [sset_lekqss_empty, sset_lekqss_vehs2_half, sset_lekqss_vehs2_full];
    loading: [sset_lekqss_empty, sset_lekqss_vehs2_half, sset_lekqss_vehs2_full];
}
spritegroup sgroup_lekqss_vehs3 {
    loaded: [sset_lekqss_empty, sset_lekqss_vehs3_half, sset_lekqss_vehs3_full];
    loading: [sset_lekqss_empty, sset_lekqss_vehs3_half, sset_lekqss_vehs3_full];
}


random_switch(FEAT_TRAINS, SELF, switch_lekqss_type, bitmask(TRIGGER_VEHICLE_UNLOAD_ALL, TRIGGER_VEHICLE_ANY_LOAD, TRIGGER_ALL_NEEDED)) {
    6: return sgroup_lekqss_vehs1;
    5: return sgroup_lekqss_vehs2;
    5: return sgroup_lekqss_vehs3;
}
switch(FEAT_TRAINS, SELF, switch_lekqss_capacity, cargo_type_in_veh ) {
    ENSP: return 10;
    return CB_FAILED;
}


item(FEAT_TRAINS, item_lekqss) {
    property {

        name: string(STR_LEKQSS_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1966, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;

        loading_speed: 4;
        cost_factor: 25;
        running_cost_factor: 4;
        cargo_age_period: int(185*1.19);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 120 km/h;
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        weight: 16 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_replace_cargoes) {
    property {
        refittable_cargo_classes: bitmask(); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: [GOOD]; cargo_disallow_refit: []; default_cargo_type: GOOD;
        cargo_capacity: 8*2;
    }
} else {
    property {
        refittable_cargo_classes: bitmask(); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: [ENSP, VEHI, VBOD]; cargo_disallow_refit: []; default_cargo_type: VEHI;
        cargo_capacity: 8;
    }
}

    graphics {
        purchase: sset_lekqss_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: switch_lekqss_type;
  random_trigger: switch_lekqss_type;
        cargo_capacity: switch_lekqss_capacity;
    }
}
# 293 "src/pkp.pnml" 2
# 1 "src/wagons/tads.pnml" 1





spriteset(sset_tadns_purchase, "gfx/439v.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_tadns, "gfx/439v.png") { tmpl_sprite_train12(4, 20) }
spriteset(sset_tadns_open, "gfx/439v.png") { tmpl_sprite_train12(4, 80) }
spriteset(sset_tadns_full, "gfx/439v.png") { tmpl_sprite_train12(4, 120) }
spriteset(sset_tadns_cut, "gfx/439v.png") { tmpl_sprite_train12(4, 160) }
spriteset(sset_tadns_open_cut, "gfx/439v.png") { tmpl_sprite_train12(4, 200) }
spritegroup sgroup_tadns {
    loaded: [sset_tadns_open, sset_tadns, sset_tadns];
    loading: [sset_tadns_open, sset_tadns_full];
}
spritegroup sgroup_tadns_cut {
    loaded: [sset_tadns_open_cut, sset_tadns_cut, sset_tadns_cut];
    loading: [sset_tadns_cut];
}


switch(FEAT_TRAINS, SELF, switch_tadns_articulated, extra_callback_info1) {
    1: return item_dummy_3;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_tadns_graphics, (extra_callback_info1&0xFF)==0 && other_veh_is_hidden(1)) {
    1: return sgroup_tadns_cut;
    return sgroup_tadns;
}


item(FEAT_TRAINS, item_tads) {
    property {

        name: string(STR_TADNS_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1998, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_BULK, CC_COVERED); non_refittable_cargo_classes: bitmask(CC_PIECE_GOODS, CC_REFRIGERATED, CC_NON_POURABLE); cargo_allow_refit: [BOOM, CBLK, FERT, PLAS]; cargo_disallow_refit: [COAL, IORE, CORE, AORE, GRVL, CLAY, SAND, PORE, COKE, PEAT, ZINC, FECR, LIME, MNO2, POTA, CASS]; default_cargo_type: GRAI;
        loading_speed: 12;
        cost_factor: 30;
        running_cost_factor: 4;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 120 km/h;
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 53;
        weight: 27 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

    graphics {
        purchase: sset_tadns_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: switch_tadns_graphics;
        articulated_part: switch_tadns_articulated;
        colour_mapping: switch_bulk_recolour;
    }
}
# 294 "src/pkp.pnml" 2


# 1 "src/engines/wm15a.pnml" 1





spriteset(sset_wm15a_purchase, "gfx/wm15a.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_wm15a_empty, "gfx/wm15a.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_pwm15_purchase, "gfx/wm15a.png") { tmpl_sprite_purchase(244, 60) }
spriteset(sset_pwm15_empty, "gfx/wm15a.png") { tmpl_sprite_train(244, 20) }

spriteset(sset_wm15a_goods_half, "gfx/wm15a.png") { tmpl_sprite_train(4, 80) }
spriteset(sset_wm15a_goods_full, "gfx/wm15a.png") { tmpl_sprite_train(4, 120) }
spriteset(sset_pwm15_goods_half, "gfx/wm15a.png") { tmpl_sprite_train(244, 80) }
spriteset(sset_pwm15_goods_full, "gfx/wm15a.png") { tmpl_sprite_train(244, 120) }
spritegroup sgroup_wm15a_goods {
 loaded: [sset_wm15a_empty, sset_wm15a_goods_half, sset_wm15a_goods_half, sset_wm15a_goods_full];
 loading: [sset_wm15a_empty, sset_wm15a_goods_half, sset_wm15a_goods_half, sset_wm15a_goods_full];
}
spritegroup sgroup_pwm15_goods {
 loaded: [sset_pwm15_empty, sset_pwm15_goods_half, sset_pwm15_goods_half, sset_pwm15_goods_full];
 loading: [sset_pwm15_empty, sset_pwm15_goods_half, sset_pwm15_goods_half, sset_pwm15_goods_full];
}
spriteset(sset_wm15a_wood_half, "gfx/wm15a.png") { tmpl_sprite_train(4, 160) }
spriteset(sset_wm15a_wood_full, "gfx/wm15a.png") { tmpl_sprite_train(4, 200) }
spriteset(sset_pwm15_wood_half, "gfx/wm15a.png") { tmpl_sprite_train(244, 160) }
spriteset(sset_pwm15_wood_full, "gfx/wm15a.png") { tmpl_sprite_train(244, 200) }
spritegroup sgroup_wm15a_wood {
 loaded: [sset_wm15a_empty, sset_wm15a_wood_half, sset_wm15a_wood_half, sset_wm15a_wood_full];
 loading: [sset_wm15a_empty, sset_wm15a_wood_half, sset_wm15a_wood_half, sset_wm15a_wood_full];
}
spritegroup sgroup_pwm15_wood {
 loaded: [sset_pwm15_empty, sset_pwm15_wood_half, sset_pwm15_wood_half, sset_pwm15_wood_full];
 loading: [sset_pwm15_empty, sset_pwm15_wood_half, sset_pwm15_wood_half, sset_pwm15_wood_full];
}
spriteset(sset_wm15a_steel_half, "gfx/wm15a.png") { tmpl_sprite_train(4, 240) }
spriteset(sset_wm15a_steel_full, "gfx/wm15a.png") { tmpl_sprite_train(4, 280) }
spriteset(sset_pwm15_steel_half, "gfx/wm15a.png") { tmpl_sprite_train(244, 240) }
spriteset(sset_pwm15_steel_full, "gfx/wm15a.png") { tmpl_sprite_train(244, 280) }
spritegroup sgroup_wm15a_steel {
 loaded: [sset_wm15a_empty, sset_wm15a_steel_half, sset_wm15a_steel_half, sset_wm15a_steel_full];
 loading: [sset_wm15a_empty, sset_wm15a_steel_half, sset_wm15a_steel_half, sset_wm15a_steel_full];
}
spritegroup sgroup_pwm15_steel {
 loaded: [sset_pwm15_empty, sset_pwm15_steel_half, sset_pwm15_steel_half, sset_pwm15_steel_full];
 loading: [sset_pwm15_empty, sset_pwm15_steel_half, sset_pwm15_steel_half, sset_pwm15_steel_full];
}
spriteset(sset_wm15a_lvstck_half, "gfx/wm15a.png") { tmpl_sprite_train(4, 320) }
spriteset(sset_wm15a_lvstck_full, "gfx/wm15a.png") { tmpl_sprite_train(4, 360) }
spriteset(sset_pwm15_lvstck_half, "gfx/wm15a.png") { tmpl_sprite_train(244, 320) }
spriteset(sset_pwm15_lvstck_full, "gfx/wm15a.png") { tmpl_sprite_train(244, 360) }
spritegroup sgroup_wm15a_lvstck {
 loaded: [sset_wm15a_empty, sset_wm15a_lvstck_half, sset_wm15a_lvstck_half, sset_wm15a_lvstck_full];
 loading: [sset_wm15a_empty, sset_wm15a_lvstck_half, sset_wm15a_lvstck_half, sset_wm15a_lvstck_full];
}
spritegroup sgroup_pwm15_lvstck {
 loaded: [sset_pwm15_empty, sset_pwm15_lvstck_half, sset_pwm15_lvstck_half, sset_pwm15_lvstck_full];
 loading: [sset_pwm15_empty, sset_pwm15_lvstck_half, sset_pwm15_lvstck_half, sset_pwm15_lvstck_full];
}
spriteset(sset_wm15a_paper_half, "gfx/wm15a.png") { tmpl_sprite_train(4, 400) }
spriteset(sset_wm15a_paper_full, "gfx/wm15a.png") { tmpl_sprite_train(4, 440) }
spriteset(sset_pwm15_paper_half, "gfx/wm15a.png") { tmpl_sprite_train(244, 400) }
spriteset(sset_pwm15_paper_full, "gfx/wm15a.png") { tmpl_sprite_train(244, 440) }
spritegroup sgroup_wm15a_paper {
 loaded: [sset_wm15a_empty, sset_wm15a_paper_half, sset_wm15a_paper_half, sset_wm15a_paper_full];
 loading: [sset_wm15a_empty, sset_wm15a_paper_half, sset_wm15a_paper_half, sset_wm15a_paper_full];
}
spritegroup sgroup_pwm15_paper {
 loaded: [sset_pwm15_empty, sset_pwm15_paper_half, sset_pwm15_paper_half, sset_pwm15_paper_full];
 loading: [sset_pwm15_empty, sset_pwm15_paper_half, sset_pwm15_paper_half, sset_pwm15_paper_full];
}


switch(FEAT_TRAINS, PARENT, switch_wm15a_visual_effect_local, 0) {
    return visual_effect_and_powered(VISUAL_EFFECT_DIESEL, -2, DISABLE_WAGON_POWER);
}
switch(FEAT_TRAINS, SELF, switch_wm15a_can_attach, vehicle_type_id) {
    item_pwm15: return CB_RESULT_ATTACH_ALLOW;
    return string(STR_ATTACH_DISALLOW, string(STR_WM15A_NAME));
}
switch (FEAT_TRAINS, SELF, switch_wm15a_start_stop, num_vehs_in_consist) {
    1..2: return CB_RESULT_NO_TEXT;
    return string(STR_TRAIN_TOO_LONG, string(STR_WM15A_NAME));
}
switch (FEAT_TRAINS, SELF, switch_wm15a_capacity, cargo_type_in_veh) {
    PASS: return 7;
    TOUR: return 7;
    MAIL: return 30;
    VEHI: return 2;
    return 15;
}
switch (FEAT_TRAINS, PARENT, switch_wm15a_running_cost2, current_speed ) { 0: return 10-2; return 25-2; } switch (FEAT_TRAINS, PARENT, switch_wm15a_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_wm15a_running_cost2; }
switch (FEAT_TRAINS, PARENT, switch_wm15a_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return CB_FAILED; }
switch(FEAT_TRAINS, PARENT, switch_wm15a_visual_effect, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER); return switch_wm15a_visual_effect_local; }


switch (FEAT_TRAINS, SELF, switch_pwm15_capacity, cargo_type_in_veh) {
 MAIL: return 30;
    VEHI: return 2;
 return 15;
}


item(FEAT_TRAINS, item_wm15a) {
    property {

        name: string(STR_WM15A_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1977, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 30;
        reliability_decay: 5;
        refittable_cargo_classes: bitmask(CC_PASSENGERS, CC_MAIL, CC_EXPRESS, CC_PIECE_GOODS);
        non_refittable_cargo_classes: bitmask(CC_REFRIGERATED, CC_LIQUID);
        cargo_allow_refit: [];
        cargo_disallow_refit: [];
        loading_speed: 5;
        cost_factor: 11;
        running_cost_factor: 25-2;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 80 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 147 kW;
        running_cost_base: RUNNING_COST_DIESEL;
        dual_headed: 0;
        cargo_capacity: 15;
        weight: 20 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_DIESEL;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.3;
        air_drag_coefficient: 0.1;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

    graphics {
        PASS: sset_wm15a_empty;
        TOUR: sset_wm15a_empty;
        WOOD: sgroup_wm15a_wood;
        LVST: sgroup_wm15a_lvstck;
        STEL: sgroup_wm15a_steel;
        PAPR: sgroup_wm15a_paper;
        purchase: sset_wm15a_purchase;
        default: sgroup_wm15a_goods;
        visual_effect_and_powered: switch_wm15a_visual_effect;
        can_attach_wagon: switch_wm15a_can_attach;
        start_stop: switch_wm15a_start_stop;
        cargo_capacity: switch_wm15a_capacity;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_wm15a_running_cost;
        purchase_power: return CB_FAILED; power: switch_wm15a_power;
    }
}

item(FEAT_TRAINS, item_pwm15) {
    property {

        name: string(STR_PWM15_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1977, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_MAIL, CC_EXPRESS, CC_PIECE_GOODS);
        non_refittable_cargo_classes: bitmask(CC_REFRIGERATED, CC_LIQUID);
        cargo_allow_refit: [];
        cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 20-3;
        running_cost_factor: 2;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 80 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 15;
        weight: 12 ton;
        length: 7;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

    graphics {
        WOOD: sgroup_pwm15_wood;
        LVST: sgroup_pwm15_lvstck;
        STEL: sgroup_pwm15_steel;
        PAPR: sgroup_pwm15_paper;
        default: sgroup_pwm15_goods;
  purchase: sset_pwm15_purchase;
  cargo_capacity: switch_pwm15_capacity;
    }
}
# 297 "src/pkp.pnml" 2
# 1 "src/engines/asf.pnml" 1





spriteset(sset_asf_purchase, "gfx/asf_el16b.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_asf, "gfx/asf_el16b.png") { tmpl_sprite_train(4, 20) }


switch (FEAT_TRAINS, SELF, switch_asf_subtype_text, cargo_subtype) {
    0: return string(STR_SUBTYPE_LIVERY_VISIBLE);
    1: return string(STR_SUBTYPE_LIVERY_INVISIBLE);
    return CB_RESULT_NO_TEXT;
}
switch (FEAT_TRAINS, SELF, switch_asf_graphics, ((extra_callback_info1&0xFF) == 0) * cargo_subtype) {
    1: return sset_dummy;
    return sset_asf;
}


item(FEAT_TRAINS, item_asf) {
    property {

        name: string(STR_ASF_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 40;
        reliability_decay: 0;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 1;
        running_cost_factor: 0;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 6 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 17 kW;
        running_cost_base: RUNNING_COST_DIESEL;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 12 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_DIESEL;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.340;
        air_drag_coefficient: 0.07;
        length: 3;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        extra_weight_per_wagon: 0 ton;
        bitmask_vehicle_info: 0;
    }
    graphics {
        purchase: sset_asf_purchase;
        additional_text: return string(STR_ENGINE_SHUNTER);
        default: switch_asf_graphics;
        cargo_subtype_text: switch_asf_subtype_text;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
    }
}
# 298 "src/pkp.pnml" 2
# 1 "src/engines/od13.pnml" 1





spriteset(sset_od13_purchase, "gfx/od13.png") { tmpl_sprite_purchase(4, 100) }
spriteset(sset_od13, "gfx/od13.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_od13_tender, "gfx/od13.png") { tmpl_sprite_train(4, 60) }


switch(FEAT_TRAINS, SELF, switch_od13_articulated, extra_callback_info1) {
    1: return item_od13;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_od13_graphics, position_in_vehid_chain % 2) {
    0: return sset_od13;
    return sset_od13_tender;
}
switch(FEAT_TRAINS, SELF, switch_od13_length, position_in_vehid_chain % 2) {
    1: return 3;
    return 6;
}
switch (FEAT_TRAINS, SELF, switch_od13_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_STEAM_POWER_TEXT, 180), string(STR_ENGINE_PASSENGER));
 return string(STR_ENGINE_PASSENGER);
}
switch (FEAT_TRAINS, PARENT, switch_od13_running_cost2, current_speed ) { 0: return 15; return 48; } switch (FEAT_TRAINS, PARENT, switch_od13_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_od13_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_od13_power2, position_in_consist > 0 ) { 1: return int(int(370*1.3410)*0.67); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_od13_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_od13_power2; }


item(FEAT_TRAINS, item_od13) {
    property {

        name: string(STR_OD13_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 33;
        reliability_decay: 18;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 14;
        running_cost_factor: 48;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 80 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_PASSENGER;
        power: 370 kW;
        running_cost_base: RUNNING_COST_STEAM;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 77 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_STEAM;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.069;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

if(param_orig_intro_dates) {
    property {
        introduction_date: date(1885, 1, 1);
    }
}

if(!param_keep_old_vehs) {
    if(param_orig_intro_dates) {
        property {
            model_life: 37+33;
            retire_early: 10;
        }
    } else {
        property {
            model_life: 37;
            retire_early: 10;
        }
    }
}

    graphics {
        purchase: sset_od13_purchase;
        additional_text: switch_od13_add_text;
        default: switch_od13_graphics;
        articulated_part: switch_od13_articulated;
        length: switch_od13_length;
        visual_effect_and_powered: switch_normal_steam_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_od13_running_cost;
        purchase_power: return CB_FAILED; power: switch_od13_power;
    }
}
# 299 "src/pkp.pnml" 2
# 1 "src/wagons/wdn.pnml" 1





spriteset(sset_wdn_purchase, "gfx/wdn-gray.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_wdn_empty, "gfx/wdn-gray.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_wdn_full, "gfx/wdn-gray.png") { tmpl_sprite_train(4, 80) }
spriteset(sset_wdn_wood_full, "gfx/wdn-gray.png") { tmpl_sprite_train(4, 120) }
spriteset(sset_wdn_wdprd_full, "gfx/wdn-gray.png") { tmpl_sprite_train(4, 160) }
spriteset(sset_wdn_steel_full, "gfx/wdn-gray.png") { tmpl_sprite_train(4, 200) }
spriteset(sset_wdn_bdmat_full, "gfx/wdn-gray.png") { tmpl_sprite_train(4, 240) }
spritegroup sgroup_wdn {
    loaded: [sset_wdn_empty, sset_wdn_full];
    loading: [sset_wdn_empty, sset_wdn_full];
}
spritegroup sgroup_wdn_wood {
    loaded: [sset_wdn_empty, sset_wdn_wood_full];
    loading: [sset_wdn_empty, sset_wdn_wood_full];
}
spritegroup sgroup_wdn_wdprd {
    loaded: [sset_wdn_empty, sset_wdn_wdprd_full];
    loading: [sset_wdn_empty, sset_wdn_wdprd_full];
}
spritegroup sgroup_wdn_steel {
    loaded: [sset_wdn_empty, sset_wdn_steel_full];
    loading: [sset_wdn_empty, sset_wdn_steel_full];
}
spritegroup sgroup_wdn_bdmat {
    loaded: [sset_wdn_empty, sset_wdn_bdmat_full];
    loading: [sset_wdn_empty, sset_wdn_bdmat_full];
}


switch(FEAT_TRAINS, SELF, switch_wdn_capacity, cargo_type_in_veh) {
    WOOD: return 12;
    WDPR: return 12;
    return CB_FAILED;
}
switch(FEAT_TRAINS, SELF, switch_wdn_loading_speed, cargo_type_in_veh) {
    WOOD: return 3;
    WDPR: return 3;
    return CB_FAILED;
}


item(FEAT_TRAINS, item_wdn) {
    property {

        name: string(STR_WDN_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_BULK); non_refittable_cargo_classes: bitmask(CC_REFRIGERATED); cargo_allow_refit: [WOOD, STEL, BDMT]; cargo_disallow_refit: [GRAI, WHEA, CERE, FICR, CBLK, CMNT, SUGR, BEAN, QLME, SASH, KAOL, SALT, PLAS, FERT]; default_cargo_type: COAL;
        loading_speed: 4;
        cost_factor: 10-2;
        running_cost_factor: 0;
        cargo_age_period: int(185*1.41);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 45 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 15;
        weight: 9 ton;
        length: 5;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_orig_intro_dates) {
    property {
        introduction_date: date(1882, 1, 1);
    }
}

if(!param_keep_old_vehs) {
    if(param_orig_intro_dates) {
        property {
            model_life: 47+36;
            retire_early: 16;
        }
    } else {
        property {
            model_life: 47;
            retire_early: 16;
        }
    }
}

    graphics {
        WOOD: sgroup_wdn_wood;
        WDPR: sgroup_wdn_wdprd;
        STEL: sgroup_wdn_steel;
        METL: sgroup_wdn_steel;
        BDMT: sgroup_wdn_bdmat;
        purchase: sset_wdn_purchase;
  additional_text: return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_NONE), string(STR_CAPACITY_NON_FRIABLE));
        default: sgroup_wdn;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_wdn_capacity;
        loading_speed: switch_wdn_loading_speed;
        colour_mapping: switch_bulk_recolour;
    }
}
# 300 "src/pkp.pnml" 2
# 1 "src/wagons/kd.pnml" 1





spriteset(sset_kd_purchase, "gfx/kd.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_kd, "gfx/kd.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_kd_open, "gfx/kd.png") { tmpl_sprite_train(4, 80) }
spritegroup sgroup_kd {
    loaded: [sset_kd_open, sset_kd, sset_kd];
    loading: [sset_kd_open];
}


switch(FEAT_TRAINS, SELF, switch_kd_capacity, hasbit(cargo_classes, CC_LIQUID)) {
    1: return 9;
    return CB_FAILED;
}
switch(FEAT_TRAINS, SELF, switch_kd_loading_speed, hasbit(cargo_classes, CC_LIQUID)) {
    1: return 2;
    return CB_FAILED;
}


item(FEAT_TRAINS, item_kd) {
    property {

        name: string(STR_KD_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_EXPRESS, CC_PIECE_GOODS, CC_LIQUID, CC_COVERED); non_refittable_cargo_classes: bitmask(CC_PASSENGERS, CC_OVERSIZED); cargo_allow_refit: [GRAI, WHEA, MAIZ, CERE, BEAN, QLME, SASH, SALT]; cargo_disallow_refit: [CLAY, SULP, WOOD, VBOD, VEHI]; default_cargo_type: GOOD;
        loading_speed: 3;
        cost_factor: 10-2;
        running_cost_factor: 0;
        cargo_age_period: int(185*1.19);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 45 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 12*2;
        weight: 9 ton;
        length: 5;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_orig_intro_dates) {
    property {
        introduction_date: date(1882, 1, 1);
    }
}

if(!param_keep_old_vehs) {
    if(param_orig_intro_dates) {
        property {
            model_life: 45+36;
            retire_early: 16;
        }
    } else {
        property {
            model_life: 45;
            retire_early: 16;
        }
    }
}

    graphics {
        purchase: sset_kd_purchase;
        additional_text: return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_NONE), string(STR_CAPACITY_LIQUID));
        default: sgroup_kd;
        purchase_cargo_capacity: return CB_FAILED;
        cargo_capacity: switch_kd_capacity;
        loading_speed: switch_kd_loading_speed;
    }
}
# 301 "src/pkp.pnml" 2
# 1 "src/wagons/hes.pnml" 1





spriteset(sset_hes_purchase, "gfx/201s1.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_hes, "gfx/201s1.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_hes_full, "gfx/201s1.png") { tmpl_sprite_train(4, 80) }
spriteset(sset_hes_open, "gfx/201s1.png") { tmpl_sprite_train(4, 120) }
spriteset(sset_hes_open_full, "gfx/201s1.png") { tmpl_sprite_train(4, 160) }
# 21 "src/wagons/hes.pnml"
spritegroup sgroup_hes {
    loaded: [sset_hes, sset_hes_full];
    loading: [sset_hes_open, sset_hes_open_full];
}


item(FEAT_TRAINS, item_hes) {
    property {

        name: string(STR_HES_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1959, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: [LVST]; cargo_disallow_refit: []; default_cargo_type: LVST;
        loading_speed: 5;
        cost_factor: 21;
        running_cost_factor: 3 + 3;
        cargo_age_period: int(185*1.41);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 21*2*1;
        weight: 16 ton;
        length: 7;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 56;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_hes_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: sgroup_hes;
    }
}
# 302 "src/pkp.pnml" 2
# 1 "src/wagons/rnh.pnml" 1





spriteset(sset_rnh_purchase, "gfx/kwasiarka.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_rnh, "gfx/kwasiarka.png") { tmpl_sprite_train(4, 20) }


switch (FEAT_TRAINS, PARENT, switch_RNH_running_cost, vehicle_is_in_depot & (current_speed == 0) ) { 1: return 2; return 2 +3; }




item(FEAT_TRAINS, item_rnh) {
    property {

        name: string(STR_RNH_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;

        loading_speed: 5;
        cost_factor: 14-1;

        cargo_age_period: int(185*1.41);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 65 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;

        weight: 16 ton;
        length: 7;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_replace_cargoes) {
    property {
        refittable_cargo_classes: bitmask(); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: [GOOD]; cargo_disallow_refit: []; default_cargo_type: GOOD;
        cargo_capacity: 16*2;
    }
} else {
    property {
        refittable_cargo_classes: bitmask(); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: [RFPR, DYES, ACID, LYE_, SOAP, SULP, COAT, CHLO, O2__, NH3_]; cargo_disallow_refit: []; default_cargo_type: RFPR;
        cargo_capacity: 16;
    }
}

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 66;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_rnh_purchase;
        additional_text: return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_AIR), string(STR_INCOME_CARGO_HIGH));
        default: sset_rnh;
        purchase_running_cost_factor: return 2 +3; running_cost_factor: switch_RNH_running_cost;
    }
}
# 303 "src/pkp.pnml" 2
# 1 "src/wagons/rnh-5r.pnml" 1





spriteset(sset_rnh_5r_purchase, "gfx/5r.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_rnh_5r, "gfx/5r.png") { tmpl_sprite_train(4, 20) }
# 16 "src/wagons/rnh-5r.pnml"
item(FEAT_TRAINS, item_rnh_5r) {
    property {

        name: string(STR_RNH_5R_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1948, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_LIQUID); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: []; cargo_disallow_refit: [ACID, BEER, CHLO, COAT, LYE_, O2__, NH3_, SOAP, SULP]; default_cargo_type: OIL_;
        loading_speed: 6;
        cost_factor: 16-1;
        running_cost_factor: 2 + 1;
        cargo_age_period: int(185*1.41);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 80 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;

        weight: 11 ton;
        length: 6;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_replace_cargoes) {
    property {
        refittable_cargo_classes: bitmask(); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: [GOOD]; cargo_disallow_refit: []; default_cargo_type: GOOD;
        cargo_capacity: 22*2;
    }
} else {
    property {
        refittable_cargo_classes: bitmask(); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: [RFPR, DYES, ACID, LYE_, SOAP, SULP, COAT, CHLO, O2__, NH3_]; cargo_disallow_refit: []; default_cargo_type: RFPR;
        cargo_capacity: 22;
    }
}
if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 58;
        retire_early: 16;
    }
}

    graphics {
        purchase: sset_rnh_5r_purchase;
        additional_text: return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_AIR), string(STR_INCOME_CARGO_HIGH));
        default: sset_rnh_5r;
    }
}
# 304 "src/pkp.pnml" 2
# 1 "src/wagons/uahs.pnml" 1





spriteset(sset_uahs_purchase, "gfx/408r.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_uahs_yellow, "gfx/408r.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_uahs_blue, "gfx/408r.png") { tmpl_sprite_train(4, 80) }


random_switch(FEAT_TRAINS, SELF, switch_uahs_graphics) {
    5: return sset_uahs_yellow;
    3: return sset_uahs_blue;
}





item(FEAT_TRAINS, item_uahs) {
    property {

        name: string(STR_UAHS_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1966, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 20;
        reliability_decay: 20;

        loading_speed: 6;
        cost_factor: 24-2;
        running_cost_factor: 2 + 1;
        cargo_age_period: int(185*1.41);

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 100 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;

        weight: 22 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_replace_cargoes) {
    property {
        refittable_cargo_classes: bitmask(); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: [GOOD]; cargo_disallow_refit: []; default_cargo_type: GOOD;
        cargo_capacity: 42*2;
    }
} else {
    property {
        refittable_cargo_classes: bitmask(); non_refittable_cargo_classes: bitmask(); cargo_allow_refit: [RFPR, DYES, ACID, LYE_, SOAP, SULP, COAT, CHLO, O2__, NH3_]; cargo_disallow_refit: []; default_cargo_type: RFPR;
        cargo_capacity: 42;
    }
}

    graphics {
        purchase: sset_uahs_purchase;
  additional_text: return string(STR_PURCHASE_DESCR_2L, string(STR_BRAKE_AIR), string(STR_INCOME_CARGO_HIGH));
        default: switch_uahs_graphics;
    }
}
# 305 "src/pkp.pnml" 2
# 1 "src/wagons/ppu.pnml" 1





spriteset(sset_ppu_purchase, "gfx/ppu.png") { tmpl_sprite_purchase(4, 60) }
spriteset(sset_ppu_empty, "gfx/ppu.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_ppu_half, "gfx/ppu.png") { tmpl_sprite_train(4, 80) }
spriteset(sset_ppu_full, "gfx/ppu.png") { tmpl_sprite_train(4, 120) }
spriteset(sset_ppu_steel_half, "gfx/ppu.png") { tmpl_sprite_train(4, 160) }
spriteset(sset_ppu_steel_full, "gfx/ppu.png") { tmpl_sprite_train(4, 200) }
spriteset(sset_ppu_coper_half, "gfx/ppu.png") { tmpl_sprite_train(4, 240) }
spriteset(sset_ppu_coper_full, "gfx/ppu.png") { tmpl_sprite_train(4, 280) }


spritegroup sgroup_ppu {
    loaded: [sset_ppu_empty, sset_ppu_half, sset_ppu_full];
    loading: [sset_ppu_empty, sset_ppu_half, sset_ppu_full];
}
spritegroup sgroup_ppu_steel {
    loaded: [sset_ppu_empty, sset_ppu_steel_half, sset_ppu_steel_full];
    loading: [sset_ppu_empty, sset_ppu_steel_half, sset_ppu_steel_full];
}
spritegroup sgroup_ppu_coper {
    loaded: [sset_ppu_empty, sset_ppu_coper_half, sset_ppu_coper_full];
    loading: [sset_ppu_empty, sset_ppu_coper_half, sset_ppu_coper_full];
}






item(FEAT_TRAINS, item_ppu) {
    property {

        name: string(STR_PPU_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1926, 1, 1);
        vehicle_life: 20;
        reliability_decay: 20;
        refittable_cargo_classes: bitmask(CC_BULK); non_refittable_cargo_classes: bitmask(CC_REFRIGERATED); cargo_allow_refit: [STEL, COPR, IRON, METL]; cargo_disallow_refit: [CBLK, COAL, GRAI, WHEA, CERE, FICR, OLSD, SGBT, SGCN, WDPR, SUGR, BEAN, QLME, SASH, FERT, SULP, KAOL, SALT, PLAS]; default_cargo_type: IORE;
        loading_speed: 6;
        cost_factor: 15;
        running_cost_factor: 3;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 75 km/h;
        misc_flags: bitmask(TRAIN_FLAG_AUTOREFIT);
        refit_cost: 0;
        track_type: RAIL;
        power: 0;
        running_cost_base: RUNNING_COST_STEAM;
        cargo_capacity: 30;
        weight: 13 ton;
        length: 8;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DISABLE, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: bitmask(1);
    }

if(param_keep_old_vehs) {
    property {
        model_life: VEHICLE_NEVER_EXPIRES;
    }
} else {
    property {
        model_life: 68;
        retire_early: 16;
    }
}
    graphics {
        STEL: sgroup_ppu_steel;
        METL: sgroup_ppu_steel;
        COPR: sgroup_ppu_coper;

        purchase: sset_ppu_purchase;
        additional_text: return string(STR_BRAKE_AIR);
        default: sgroup_ppu;
        colour_mapping: switch_bulk_recolour;
    }
}
# 306 "src/pkp.pnml" 2
# 1 "src/engines/ti12.pnml" 1





spriteset(sset_ti12_purchase, "gfx/ti12.png") { tmpl_sprite_purchase(4, 100) }
spriteset(sset_ti12, "gfx/ti12.png") { tmpl_sprite_train(4, 20) }
spriteset(sset_ti12_tender, "gfx/ti12.png") { tmpl_sprite_train(4, 60) }


switch(FEAT_TRAINS, SELF, switch_ti12_articulated, extra_callback_info1) {
    1: return item_ti12;
    return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}
switch(FEAT_TRAINS, SELF, switch_ti12_graphics, position_in_vehid_chain % 2) {
    0: return sset_ti12;
    return sset_ti12_tender;
}
switch(FEAT_TRAINS, SELF, switch_ti12_length, position_in_vehid_chain % 2) {
    1: return 4;
    return 6;
}
switch (FEAT_TRAINS, SELF, switch_ti12_add_text, climate == CLIMATE_ARCTIC ) {
 1: return string(STR_PURCHASE_DESCR_2L, string(STR_HEATING_STEAM_POWER_TEXT, 150), string(STR_ENGINE_FREIGHT));
 return string(STR_ENGINE_FREIGHT);
}
switch (FEAT_TRAINS, PARENT, switch_ti12_running_cost2, current_speed ) { 0: return 15; return 52; } switch (FEAT_TRAINS, PARENT, switch_ti12_running_cost, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ti12_running_cost2; }
switch (FEAT_TRAINS, SELF, switch_ti12_power2, position_in_consist > 0 ) { 1: return int(int(482*1.3410)*0.67); return CB_FAILED; } switch (FEAT_TRAINS, PARENT, switch_ti12_power, (grfid==str2number("MV\01\03")) * vehicle_type_id) { item_asf: return 0; return switch_ti12_power2; }


item(FEAT_TRAINS, item_ti12) {
    property {

        name: string(STR_TI12_NAME);
        climates_available: bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
        introduction_date: date(1918, 1, 1);
        model_life: VEHICLE_NEVER_EXPIRES;
        vehicle_life: 33;
        reliability_decay: 16;
        refittable_cargo_classes: bitmask(CC_PASSENGERS); non_refittable_cargo_classes: bitmask(); cargo_disallow_refit: [TOUR];
        loading_speed: 5;
        cost_factor: 10;
        running_cost_factor: 52;

        sprite_id: SPRITE_ID_NEW_TRAIN;
        speed: 60 km/h;
        misc_flags: bitmask();
        refit_cost: 0;
        track_type: RAIL;
        ai_special_flag: AI_FLAG_CARGO;
        power: 482 kW;
        running_cost_base: RUNNING_COST_STEAM;
        dual_headed: 0;
        cargo_capacity: 1;
        weight: 87 ton;
        ai_engine_rank: 0;
        engine_class: ENGINE_CLASS_STEAM;
        extra_power_per_wagon: 0 kW;
        tractive_effort_coefficient: 0.099;
        air_drag_coefficient: 0.07;
        length: 8;
        extra_weight_per_wagon: 0;
        visual_effect_and_powered: visual_effect_and_powered(VISUAL_EFFECT_DEFAULT, 0, DISABLE_WAGON_POWER);
        bitmask_vehicle_info: 0;
    }

if(param_orig_intro_dates) {
    property {
        introduction_date: date(1897, 1, 1);
    }
}

if(!param_keep_old_vehs) {
    if(param_orig_intro_dates) {
        property {
            model_life: 48+21;
            retire_early: 12;
        }
    } else {
        property {
            model_life: 48;
            retire_early: 12;
        }
    }
}

    graphics {
        purchase: sset_ti12_purchase;
        additional_text: switch_ti12_add_text;
        default: switch_ti12_graphics;
        articulated_part: switch_ti12_articulated;
        length: switch_ti12_length;
        visual_effect_and_powered: switch_normal_steam_effect;
        can_attach_wagon: switch_normal_can_attach;
        start_stop: switch_normal_start_stop;
        purchase_cargo_capacity: return 0; cargo_capacity: return 0;
        purchase_running_cost_factor: return CB_FAILED; running_cost_factor: switch_ti12_running_cost;
        purchase_power: return CB_FAILED; power: switch_ti12_power;
    }
}
# 307 "src/pkp.pnml" 2

sort(FEAT_TRAINS,

   [ item_tkh1, item_od13, item_ti12, item_tki3, item_tp4, item_ok1, item_ty23, item_okl27, item_pt31,
    item_okz32, item_ty37, item_ty2, item_pt47, item_tkt48, item_ol49, item_ty51,

    item_sm30, item_sm41, item_sm42, item_sp42, item_su42, item_sm31, item_st43, item_st44, item_sp45,
    item_su45, item_su46, item_sp32, item_br285, item_6dl, item_su160, item_sn61, item_sn81, item_sa106,

    item_ep01, item_ep02, item_et21, item_eu07, item_et22, item_ep05, item_et40, item_et41, item_et42,
    item_ep09, item_eu43, item_eu44, item_eu47, item_eu46, item_et26, item_en57, item_en71, item_ed72, item_ed74, item_en76, item_ed250, item_en63a, item_ed161,

    item_wm15a, item_asf ]);
sort(FEAT_TRAINS,

   [ item_gmy, item_gmw, item_ghmx, item_pdn,

    item_fg, item_fy, item_fhx, item_dhxt, item_dwxz, item_bdwxzd, item_ohxt,

    item_bcy, item_bcyh, item_bci, item_bh_ryf, item_bh_bon, item_bipa, item_bdhpumn, item_twindexx, item_twindexxcc,
    item_bhxz, item_abhxz, item_abdnu, item_abdhmnu, item_ab9mnopuz, item_wlabwxz, item_wlab, item_wlab10mnouz,

    item_jhx, item_jhix, item_wrdmnu, item_wrmnouz,

    item_wdn, item_wddo, item_wddoh, item_wddo_2w, item_es, item_eaos, item_eanos, item_eanos_445w, item_ppu, item_eamos,
    item_fals, item_falns, item_tads,
    item_kd, item_kdt, item_kdth, item_kddet, item_ggs, item_gags, item_gbs, item_hbbins, item_habbins,
    item_pdk31, item_pdkh31, item_kbkks, item_kgns, item_res, item_sgs, item_sdgmnss,
    item_slr, item_slms, item_ibhss, item_rh, item_rbh, item_zaes,
    item_sn, item_hes, item_rnh, item_rnh_5r, item_uahs, item_sdw, item_sdwh, item_uacs, item_lekqss,

    item_pwm15 ]);
